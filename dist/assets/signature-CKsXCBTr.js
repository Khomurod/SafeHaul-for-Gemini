let t,i,u=!1,a;function h(e,n){const r=e.getBoundingClientRect(),s=e.width/r.width,o=e.height/r.height;return{x:(n.clientX-r.left)*s,y:(n.clientY-r.top)*o}}function g(e,n){const r=e.getBoundingClientRect(),s=e.width/r.width,o=e.height/r.height;return{x:(n.touches[0].clientX-r.left)*s,y:(n.touches[0].clientY-r.top)*o}}function d(e){e.preventDefault(),u=!0,a=e.touches?g(t,e):h(t,e)}function c(){u=!1}function l(e){if(!u)return;e.preventDefault();const n=e.touches?g(t,e):h(t,e);i.beginPath(),i.moveTo(a.x,a.y),i.lineTo(n.x,n.y),i.stroke(),a=n}function v(){if(t=document.getElementById("signature-canvas"),!t)return;const e=t.getBoundingClientRect();t.width=e.width,t.height=e.height,i=t.getContext("2d"),i.lineWidth=3,i.lineCap="round",i.strokeStyle="#333",t.addEventListener("mousedown",d),t.addEventListener("mouseup",c),t.addEventListener("mousemove",l),t.addEventListener("mouseleave",c),t.addEventListener("touchstart",d,{passive:!1}),t.addEventListener("touchend",c,{passive:!1}),t.addEventListener("touchmove",l,{passive:!1});const n=document.getElementById("clear-signature");n&&n.addEventListener("click",f)}function f(){if(!i||!t)return;const e=t.width,n=t.height;i.clearRect(0,0,e,n),i.lineWidth=3,i.lineCap="round",i.strokeStyle="#333"}function p(){if(!t)return!0;const e=t.getContext("2d");try{return!new Uint32Array(e.getImageData(0,0,t.width,t.height).data.buffer).some(r=>r!==0)}catch(n){return console.error("Error reading canvas data:",n),!0}}function w(){return!t||p()?null:t.toDataURL("image/png")}export{p as a,f as c,w as g,v as i};
