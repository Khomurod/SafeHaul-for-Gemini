import{A as b,B as j,C,D as e,T as N,G as w,M as y,L as v,H as k,I as L}from"./index-Eut2KIY5.js";import{R as m}from"./CompanySettings-I1wroi0i.js";import"./pdfjs-CN6VhWT3.js";import"./send-DbngQNm2.js";import"./beaker-BDw6Lckq.js";import"./save-xDZOd2sT.js";import"./check-D3G6pll6.js";import"./CustomQuestionsBuilder-C9bbau8M.js";import"./trash-2-RTc4kdO5.js";import"./plus-DHyG1REA.js";import"./circle-BoyhTIEe.js";import"./shield-alert-CyrU0uX3.js";import"./shield-B8dSCmK2.js";import"./storage-gYyq0gBL.js";import"./pen-DKw8HDfG.js";import"./credit-card-DXG0d7j1.js";import"./dollar-sign-DE8xXdSp.js";import"./history-1Q_UTirS.js";function J({companyId:n,campaign:s,onLaunchSuccess:o}){b();const{showSuccess:u,showError:r}=j(),[c,d]=C.useState(!1),x=async()=>{if(!n)return r("Company ID missing");d(!0);try{const t=k(L,"initBulkSession"),{rawData:l,...g}=s.filters||{},p={companyId:n,name:s.name,filters:g,rawData:l||null,messageConfig:s.messageConfig,scheduledFor:null},i=await t(p);i.data.success?(u(`Campaign launched! Targeting ${i.data.targetCount} drivers. Session: ${i.data.sessionId?.slice(0,8)}...`),o&&o()):r(i.data.message||"Launch failed")}catch(t){console.error("Launch Error:",t);const l=t.message?.includes("bulk-actions-queue")?"Campaign infrastructure not ready. Please contact support.":t.message||"Failed to launch campaign";r(l)}finally{d(!1)}},a=[];(!s.matchCount||s.matchCount===0)&&a.push("No audience selected"),s.messageConfig?.message||a.push("Message content is empty");const h=a.length===0,f=Math.ceil((s.matchCount||0)*3/60);return e.jsx("div",{className:"max-w-2xl mx-auto text-center pt-12",children:e.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-50 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(m,{size:32,className:"text-blue-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Ready for Liftoff?"}),e.jsxs("p",{className:"text-slate-500 mb-8 max-w-md mx-auto",children:["You are about to message ",e.jsx("strong",{children:s.matchCount||0})," recipients via ",e.jsx("strong",{children:s.messageConfig?.method==="email"?"Email":"SMS"}),"."]}),a.length>0?e.jsxs("div",{className:"bg-red-50 p-6 rounded-2xl mb-8 text-left",children:[e.jsxs("h3",{className:"flex items-center gap-2 font-bold text-red-700 mb-3",children:[e.jsx(N,{size:18})," Pre-Flight Checks Failed"]}),e.jsx("ul",{className:"space-y-2",children:a.map((t,l)=>e.jsxs("li",{className:"text-sm text-red-600 flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-400"})," ",t]},l))})]}):e.jsxs("div",{className:"bg-emerald-50 p-6 rounded-2xl mb-8 flex flex-col items-center justify-center gap-2 text-emerald-800 font-bold",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{size:20})," All Systems Go"]}),s.matchCount>0&&e.jsxs("div",{className:"text-xs font-medium text-emerald-600 flex items-center gap-1",children:[e.jsx(y,{size:12})," Est. Duration: ~",f," min"]})]}),e.jsx("div",{className:"flex gap-4",children:e.jsxs("button",{disabled:!h||c,onClick:x,className:"flex-1 py-4 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-300 disabled:cursor-not-allowed text-white rounded-xl font-black text-lg shadow-lg shadow-blue-200 flex items-center justify-center gap-3 transition-all",children:[c?e.jsx(v,{size:24,className:"animate-spin"}):e.jsx(m,{size:24}),"Launch Immediately"]})})]})})}export{J as LaunchPad};
