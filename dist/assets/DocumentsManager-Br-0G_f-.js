import{c as Te,aw as Ce,J as Me,K as ze,C as F,D as e,ad as Le,L as V,a3 as ce,ar as ue,X as le,ax as re,r as ke,s as ae,u as Ue,x as Q,ae as ne,f as W,a as $,P as oe,q as ie,af as _e,e as Ee,i as Xe,G as Ae,M as Ye,S as $e,A as We,B as Ie,aa as Be,ay as He,az as Ve,aA as Ge,a4 as Ke,a2 as Qe,d as Je}from"./index-Eut2KIY5.js";import{D as Ze,P as et}from"./index-Dyi1V6Cy.js";import{F as H}from"./file-text-fIi5thw4.js";import{S as tt}from"./save-xDZOd2sT.js";import{P as pe}from"./pen-tool-CnWi3ktp.js";import{P as Re}from"./plus-DHyG1REA.js";import{G as st}from"./pdfjs-CN6VhWT3.js";import{D as rt,E as at}from"./external-link-DG7NPcwU.js";import{F as nt}from"./file-pen-line-CZApjMvZ.js";import{H as ot}from"./history-1Q_UTirS.js";import{T as it}from"./trash-2-RTc4kdO5.js";import{S as fe}from"./send-DbngQNm2.js";import"./clsx-B-dksMZM.js";const lt=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M14 15H9v-5",key:"pi4jk9"}],["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M21 3 9 15",key:"15kdhq"}]],dt=Te("scaling",lt);const ct=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],he=Te("type",ct);var I={exports:{}},Z={},ee={exports:{}},te,me;function ut(){if(me)return te;me=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return te=r,te}var se,ge;function pt(){if(ge)return se;ge=1;var r=ut();function y(){}function c(){}return c.resetWarningCache=y,se=function(){function o(j,C,N,w,R,u){if(u!==r){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}o.isRequired=o;function D(){return o}var d={array:o,bigint:o,bool:o,func:o,number:o,object:o,string:o,symbol:o,any:o,arrayOf:D,element:o,elementType:o,instanceOf:D,node:o,objectOf:D,oneOf:D,oneOfType:D,shape:D,exact:D,checkPropTypes:c,resetWarningCache:y};return d.PropTypes=d,d},se}var xe;function Fe(){return xe||(xe=1,ee.exports=pt()()),ee.exports}var G={exports:{}},be;function ft(){if(be)return G.exports;be=1;function r(c){var o,D,d="";if(typeof c=="string"||typeof c=="number")d+=c;else if(typeof c=="object")if(Array.isArray(c)){var j=c.length;for(o=0;o<j;o++)c[o]&&(D=r(c[o]))&&(d&&(d+=" "),d+=D)}else for(D in c)c[D]&&(d&&(d+=" "),d+=D);return d}function y(){for(var c,o,D=0,d="",j=arguments.length;D<j;D++)(c=arguments[D])&&(o=r(c))&&(d&&(d+=" "),d+=o);return d}return G.exports=y,G.exports.clsx=y,G.exports}var O={},A={},ye;function J(){if(ye)return A;ye=1,Object.defineProperty(A,"__esModule",{value:!0}),A.dontSetMe=D,A.findInArray=r,A.int=o,A.isFunction=y,A.isNum=c;function r(d,j){for(let C=0,N=d.length;C<N;C++)if(j.apply(j,[d[C],C,d]))return d[C]}function y(d){return typeof d=="function"||Object.prototype.toString.call(d)==="[object Function]"}function c(d){return typeof d=="number"&&!isNaN(d)}function o(d){return parseInt(d,10)}function D(d,j,C){if(d[j])return new Error(`Invalid prop ${j} passed to ${C} - do not set this, set it on the child.`)}return A}var Y={},ve;function ht(){if(ve)return Y;ve=1,Object.defineProperty(Y,"__esModule",{value:!0}),Y.browserPrefixToKey=c,Y.browserPrefixToStyle=o,Y.default=void 0,Y.getPrefix=y;const r=["Moz","Webkit","O","ms"];function y(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const j=window.document?.documentElement?.style;if(!j||d in j)return"";for(let C=0;C<r.length;C++)if(c(d,r[C])in j)return r[C];return""}function c(d,j){return j?`${j}${D(d)}`:d}function o(d,j){return j?`-${j.toLowerCase()}-${d}`:d}function D(d){let j="",C=!0;for(let N=0;N<d.length;N++)C?(j+=d[N].toUpperCase(),C=!1):d[N]==="-"?C=!0:j+=d[N];return j}return Y.default=y(),Y}var we;function de(){if(we)return O;we=1,Object.defineProperty(O,"__esModule",{value:!0}),O.addClassName=x,O.addEvent=j,O.addUserSelectStyles=i,O.createCSSTransform=S,O.createSVGTransform=T,O.getTouch=n,O.getTouchIdentifier=a,O.getTranslation=p,O.innerHeight=R,O.innerWidth=u,O.matchesSelector=D,O.matchesSelectorAndParentsTo=d,O.offsetXYFromParent=m,O.outerHeight=N,O.outerWidth=w,O.removeClassName=b,O.removeEvent=C,O.scheduleRemoveUserSelectStyles=l;var r=J(),y=c(ht());function c(t,s){if(typeof WeakMap=="function")var h=new WeakMap,k=new WeakMap;return(c=function(_,z){if(!z&&_&&_.__esModule)return _;var v,f,M={__proto__:null,default:_};if(_===null||typeof _!="object"&&typeof _!="function")return M;if(v=z?k:h){if(v.has(_))return v.get(_);v.set(_,M)}for(const P in _)P!=="default"&&{}.hasOwnProperty.call(_,P)&&((f=(v=Object.defineProperty)&&Object.getOwnPropertyDescriptor(_,P))&&(f.get||f.set)?v(M,P,f):M[P]=_[P]);return M})(t,s)}let o="";function D(t,s){return o||(o=(0,r.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(h){return(0,r.isFunction)(t[h])})),(0,r.isFunction)(t[o])?t[o](s):!1}function d(t,s,h){let k=t;do{if(D(k,s))return!0;if(k===h)return!1;k=k.parentNode}while(k);return!1}function j(t,s,h,k){if(!t)return;const _={capture:!0,...k};t.addEventListener?t.addEventListener(s,h,_):t.attachEvent?t.attachEvent("on"+s,h):t["on"+s]=h}function C(t,s,h,k){if(!t)return;const _={capture:!0,...k};t.removeEventListener?t.removeEventListener(s,h,_):t.detachEvent?t.detachEvent("on"+s,h):t["on"+s]=null}function N(t){let s=t.clientHeight;const h=t.ownerDocument.defaultView.getComputedStyle(t);return s+=(0,r.int)(h.borderTopWidth),s+=(0,r.int)(h.borderBottomWidth),s}function w(t){let s=t.clientWidth;const h=t.ownerDocument.defaultView.getComputedStyle(t);return s+=(0,r.int)(h.borderLeftWidth),s+=(0,r.int)(h.borderRightWidth),s}function R(t){let s=t.clientHeight;const h=t.ownerDocument.defaultView.getComputedStyle(t);return s-=(0,r.int)(h.paddingTop),s-=(0,r.int)(h.paddingBottom),s}function u(t){let s=t.clientWidth;const h=t.ownerDocument.defaultView.getComputedStyle(t);return s-=(0,r.int)(h.paddingLeft),s-=(0,r.int)(h.paddingRight),s}function m(t,s,h){const _=s===s.ownerDocument.body?{left:0,top:0}:s.getBoundingClientRect(),z=(t.clientX+s.scrollLeft-_.left)/h,v=(t.clientY+s.scrollTop-_.top)/h;return{x:z,y:v}}function S(t,s){const h=p(t,s,"px");return{[(0,y.browserPrefixToKey)("transform",y.default)]:h}}function T(t,s){return p(t,s,"")}function p(t,s,h){let{x:k,y:_}=t,z=`translate(${k}${h},${_}${h})`;if(s){const v=`${typeof s.x=="string"?s.x:s.x+h}`,f=`${typeof s.y=="string"?s.y:s.y+h}`;z=`translate(${v}, ${f})`+z}return z}function n(t,s){return t.targetTouches&&(0,r.findInArray)(t.targetTouches,h=>s===h.identifier)||t.changedTouches&&(0,r.findInArray)(t.changedTouches,h=>s===h.identifier)}function a(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function i(t){if(!t)return;let s=t.getElementById("react-draggable-style-el");s||(s=t.createElement("style"),s.type="text/css",s.id="react-draggable-style-el",s.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,s.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(s)),t.body&&x(t.body,"react-draggable-transparent-selection")}function l(t){window.requestAnimationFrame?window.requestAnimationFrame(()=>{g(t)}):g(t)}function g(t){if(t)try{if(t.body&&b(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const s=(t.defaultView||window).getSelection();s&&s.type!=="Caret"&&s.removeAllRanges()}}catch{}}function x(t,s){t.classList?t.classList.add(s):t.className.match(new RegExp(`(?:^|\\s)${s}(?!\\S)`))||(t.className+=` ${s}`)}function b(t,s){t.classList?t.classList.remove(s):t.className=t.className.replace(new RegExp(`(?:^|\\s)${s}(?!\\S)`,"g"),"")}return O}var X={},je;function qe(){if(je)return X;je=1,Object.defineProperty(X,"__esModule",{value:!0}),X.canDragX=D,X.canDragY=d,X.createCoreData=C,X.createDraggableData=N,X.getBoundPosition=c,X.getControlPosition=j,X.snapToGrid=o;var r=J(),y=de();function c(u,m,S){if(!u.props.bounds)return[m,S];let{bounds:T}=u.props;T=typeof T=="string"?T:w(T);const p=R(u);if(typeof T=="string"){const{ownerDocument:n}=p,a=n.defaultView;let i;if(T==="parent"?i=p.parentNode:i=p.getRootNode().querySelector(T),!(i instanceof a.HTMLElement))throw new Error('Bounds selector "'+T+'" could not find an element.');const l=i,g=a.getComputedStyle(p),x=a.getComputedStyle(l);T={left:-p.offsetLeft+(0,r.int)(x.paddingLeft)+(0,r.int)(g.marginLeft),top:-p.offsetTop+(0,r.int)(x.paddingTop)+(0,r.int)(g.marginTop),right:(0,y.innerWidth)(l)-(0,y.outerWidth)(p)-p.offsetLeft+(0,r.int)(x.paddingRight)-(0,r.int)(g.marginRight),bottom:(0,y.innerHeight)(l)-(0,y.outerHeight)(p)-p.offsetTop+(0,r.int)(x.paddingBottom)-(0,r.int)(g.marginBottom)}}return(0,r.isNum)(T.right)&&(m=Math.min(m,T.right)),(0,r.isNum)(T.bottom)&&(S=Math.min(S,T.bottom)),(0,r.isNum)(T.left)&&(m=Math.max(m,T.left)),(0,r.isNum)(T.top)&&(S=Math.max(S,T.top)),[m,S]}function o(u,m,S){const T=Math.round(m/u[0])*u[0],p=Math.round(S/u[1])*u[1];return[T,p]}function D(u){return u.props.axis==="both"||u.props.axis==="x"}function d(u){return u.props.axis==="both"||u.props.axis==="y"}function j(u,m,S){const T=typeof m=="number"?(0,y.getTouch)(u,m):null;if(typeof m=="number"&&!T)return null;const p=R(S),n=S.props.offsetParent||p.offsetParent||p.ownerDocument.body;return(0,y.offsetXYFromParent)(T||u,n,S.props.scale)}function C(u,m,S){const T=!(0,r.isNum)(u.lastX),p=R(u);return T?{node:p,deltaX:0,deltaY:0,lastX:m,lastY:S,x:m,y:S}:{node:p,deltaX:m-u.lastX,deltaY:S-u.lastY,lastX:u.lastX,lastY:u.lastY,x:m,y:S}}function N(u,m){const S=u.props.scale;return{node:m.node,x:u.state.x+m.deltaX/S,y:u.state.y+m.deltaY/S,deltaX:m.deltaX/S,deltaY:m.deltaY/S,lastX:u.state.x,lastY:u.state.y}}function w(u){return{left:u.left,top:u.top,right:u.right,bottom:u.bottom}}function R(u){const m=u.findDOMNode();if(!m)throw new Error("<DraggableCore>: Unmounted during event!");return m}return X}var B={},K={},Ne;function Oe(){if(Ne)return K;Ne=1,Object.defineProperty(K,"__esModule",{value:!0}),K.default=r;function r(){}return K}var Se;function mt(){if(Se)return B;Se=1,Object.defineProperty(B,"__esModule",{value:!0}),B.default=void 0;var r=N(Ce()),y=C(Fe()),c=C(Me()),o=de(),D=qe(),d=J(),j=C(Oe());function C(p){return p&&p.__esModule?p:{default:p}}function N(p,n){if(typeof WeakMap=="function")var a=new WeakMap,i=new WeakMap;return(N=function(l,g){if(!g&&l&&l.__esModule)return l;var x,b,t={__proto__:null,default:l};if(l===null||typeof l!="object"&&typeof l!="function")return t;if(x=g?i:a){if(x.has(l))return x.get(l);x.set(l,t)}for(const s in l)s!=="default"&&{}.hasOwnProperty.call(l,s)&&((b=(x=Object.defineProperty)&&Object.getOwnPropertyDescriptor(l,s))&&(b.get||b.set)?x(t,s,b):t[s]=l[s]);return t})(p,n)}function w(p,n,a){return(n=R(n))in p?Object.defineProperty(p,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):p[n]=a,p}function R(p){var n=u(p,"string");return typeof n=="symbol"?n:n+""}function u(p,n){if(typeof p!="object"||!p)return p;var a=p[Symbol.toPrimitive];if(a!==void 0){var i=a.call(p,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(p)}const m={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let S=m.mouse,T=class extends r.Component{constructor(){super(...arguments),w(this,"dragging",!1),w(this,"lastX",NaN),w(this,"lastY",NaN),w(this,"touchIdentifier",null),w(this,"mounted",!1),w(this,"handleDragStart",n=>{if(this.props.onMouseDown(n),!this.props.allowAnyClick&&typeof n.button=="number"&&n.button!==0)return!1;const a=this.findDOMNode();if(!a||!a.ownerDocument||!a.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:i}=a;if(this.props.disabled||!(n.target instanceof i.defaultView.Node)||this.props.handle&&!(0,o.matchesSelectorAndParentsTo)(n.target,this.props.handle,a)||this.props.cancel&&(0,o.matchesSelectorAndParentsTo)(n.target,this.props.cancel,a))return;n.type==="touchstart"&&!this.props.allowMobileScroll&&n.preventDefault();const l=(0,o.getTouchIdentifier)(n);this.touchIdentifier=l;const g=(0,D.getControlPosition)(n,l,this);if(g==null)return;const{x,y:b}=g,t=(0,D.createCoreData)(this,x,b);(0,j.default)("DraggableCore: handleDragStart: %j",t),(0,j.default)("calling",this.props.onStart),!(this.props.onStart(n,t)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,o.addUserSelectStyles)(i),this.dragging=!0,this.lastX=x,this.lastY=b,(0,o.addEvent)(i,S.move,this.handleDrag),(0,o.addEvent)(i,S.stop,this.handleDragStop))}),w(this,"handleDrag",n=>{const a=(0,D.getControlPosition)(n,this.touchIdentifier,this);if(a==null)return;let{x:i,y:l}=a;if(Array.isArray(this.props.grid)){let b=i-this.lastX,t=l-this.lastY;if([b,t]=(0,D.snapToGrid)(this.props.grid,b,t),!b&&!t)return;i=this.lastX+b,l=this.lastY+t}const g=(0,D.createCoreData)(this,i,l);if((0,j.default)("DraggableCore: handleDrag: %j",g),this.props.onDrag(n,g)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const t=document.createEvent("MouseEvents");t.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(t)}return}this.lastX=i,this.lastY=l}),w(this,"handleDragStop",n=>{if(!this.dragging)return;const a=(0,D.getControlPosition)(n,this.touchIdentifier,this);if(a==null)return;let{x:i,y:l}=a;if(Array.isArray(this.props.grid)){let t=i-this.lastX||0,s=l-this.lastY||0;[t,s]=(0,D.snapToGrid)(this.props.grid,t,s),i=this.lastX+t,l=this.lastY+s}const g=(0,D.createCoreData)(this,i,l);if(this.props.onStop(n,g)===!1||this.mounted===!1)return!1;const b=this.findDOMNode();b&&this.props.enableUserSelectHack&&(0,o.scheduleRemoveUserSelectStyles)(b.ownerDocument),(0,j.default)("DraggableCore: handleDragStop: %j",g),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,b&&((0,j.default)("DraggableCore: Removing handlers"),(0,o.removeEvent)(b.ownerDocument,S.move,this.handleDrag),(0,o.removeEvent)(b.ownerDocument,S.stop,this.handleDragStop))}),w(this,"onMouseDown",n=>(S=m.mouse,this.handleDragStart(n))),w(this,"onMouseUp",n=>(S=m.mouse,this.handleDragStop(n))),w(this,"onTouchStart",n=>(S=m.touch,this.handleDragStart(n))),w(this,"onTouchEnd",n=>(S=m.touch,this.handleDragStop(n)))}componentDidMount(){this.mounted=!0;const n=this.findDOMNode();n&&(0,o.addEvent)(n,m.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const n=this.findDOMNode();if(n){const{ownerDocument:a}=n;(0,o.removeEvent)(a,m.mouse.move,this.handleDrag),(0,o.removeEvent)(a,m.touch.move,this.handleDrag),(0,o.removeEvent)(a,m.mouse.stop,this.handleDragStop),(0,o.removeEvent)(a,m.touch.stop,this.handleDragStop),(0,o.removeEvent)(n,m.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,o.scheduleRemoveUserSelectStyles)(a)}}findDOMNode(){return this.props?.nodeRef?this.props?.nodeRef?.current:c.default.findDOMNode(this)}render(){return r.cloneElement(r.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};return B.default=T,w(T,"displayName","DraggableCore"),w(T,"propTypes",{allowAnyClick:y.default.bool,allowMobileScroll:y.default.bool,children:y.default.node.isRequired,disabled:y.default.bool,enableUserSelectHack:y.default.bool,offsetParent:function(p,n){if(p[n]&&p[n].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:y.default.arrayOf(y.default.number),handle:y.default.string,cancel:y.default.string,nodeRef:y.default.object,onStart:y.default.func,onDrag:y.default.func,onStop:y.default.func,onMouseDown:y.default.func,scale:y.default.number,className:d.dontSetMe,style:d.dontSetMe,transform:d.dontSetMe}),w(T,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),B}var De;function gt(){return De||(De=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"DraggableCore",{enumerable:!0,get:function(){return N.default}}),r.default=void 0;var y=u(Ce()),c=R(Fe()),o=R(Me()),D=ft(),d=de(),j=qe(),C=J(),N=R(mt()),w=R(Oe());function R(a){return a&&a.__esModule?a:{default:a}}function u(a,i){if(typeof WeakMap=="function")var l=new WeakMap,g=new WeakMap;return(u=function(x,b){if(!b&&x&&x.__esModule)return x;var t,s,h={__proto__:null,default:x};if(x===null||typeof x!="object"&&typeof x!="function")return h;if(t=b?g:l){if(t.has(x))return t.get(x);t.set(x,h)}for(const k in x)k!=="default"&&{}.hasOwnProperty.call(x,k)&&((s=(t=Object.defineProperty)&&Object.getOwnPropertyDescriptor(x,k))&&(s.get||s.set)?t(h,k,s):h[k]=x[k]);return h})(a,i)}function m(){return m=Object.assign?Object.assign.bind():function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var g in l)({}).hasOwnProperty.call(l,g)&&(a[g]=l[g])}return a},m.apply(null,arguments)}function S(a,i,l){return(i=T(i))in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function T(a){var i=p(a,"string");return typeof i=="symbol"?i:i+""}function p(a,i){if(typeof a!="object"||!a)return a;var l=a[Symbol.toPrimitive];if(l!==void 0){var g=l.call(a,i);if(typeof g!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(a)}class n extends y.Component{static getDerivedStateFromProps(i,l){let{position:g}=i,{prevPropsPosition:x}=l;return g&&(!x||g.x!==x.x||g.y!==x.y)?((0,w.default)("Draggable: getDerivedStateFromProps %j",{position:g,prevPropsPosition:x}),{x:g.x,y:g.y,prevPropsPosition:{...g}}):null}constructor(i){super(i),S(this,"onDragStart",(l,g)=>{if((0,w.default)("Draggable: onDragStart: %j",g),this.props.onStart(l,(0,j.createDraggableData)(this,g))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),S(this,"onDrag",(l,g)=>{if(!this.state.dragging)return!1;(0,w.default)("Draggable: onDrag: %j",g);const x=(0,j.createDraggableData)(this,g),b={x:x.x,y:x.y,slackX:0,slackY:0};if(this.props.bounds){const{x:s,y:h}=b;b.x+=this.state.slackX,b.y+=this.state.slackY;const[k,_]=(0,j.getBoundPosition)(this,b.x,b.y);b.x=k,b.y=_,b.slackX=this.state.slackX+(s-b.x),b.slackY=this.state.slackY+(h-b.y),x.x=b.x,x.y=b.y,x.deltaX=b.x-this.state.x,x.deltaY=b.y-this.state.y}if(this.props.onDrag(l,x)===!1)return!1;this.setState(b)}),S(this,"onDragStop",(l,g)=>{if(!this.state.dragging||this.props.onStop(l,(0,j.createDraggableData)(this,g))===!1)return!1;(0,w.default)("Draggable: onDragStop: %j",g);const b={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:s,y:h}=this.props.position;b.x=s,b.y=h}this.setState(b)}),this.state={dragging:!1,dragged:!1,x:i.position?i.position.x:i.defaultPosition.x,y:i.position?i.position.y:i.defaultPosition.y,prevPropsPosition:{...i.position},slackX:0,slackY:0,isElementSVG:!1},i.position&&!(i.onDrag||i.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){return this.props?.nodeRef?.current??o.default.findDOMNode(this)}render(){const{axis:i,bounds:l,children:g,defaultPosition:x,defaultClassName:b,defaultClassNameDragging:t,defaultClassNameDragged:s,position:h,positionOffset:k,scale:_,...z}=this.props;let v={},f=null;const P=!!!h||this.state.dragging,q=h||x,E={x:(0,j.canDragX)(this)&&P?this.state.x:q.x,y:(0,j.canDragY)(this)&&P?this.state.y:q.y};this.state.isElementSVG?f=(0,d.createSVGTransform)(E,k):v=(0,d.createCSSTransform)(E,k);const L=(0,D.clsx)(g.props.className||"",b,{[t]:this.state.dragging,[s]:this.state.dragged});return y.createElement(N.default,m({},z,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),y.cloneElement(y.Children.only(g),{className:L,style:{...g.props.style,...v},transform:f}))}}r.default=n,S(n,"displayName","Draggable"),S(n,"propTypes",{...N.default.propTypes,axis:c.default.oneOf(["both","x","y","none"]),bounds:c.default.oneOfType([c.default.shape({left:c.default.number,right:c.default.number,top:c.default.number,bottom:c.default.number}),c.default.string,c.default.oneOf([!1])]),defaultClassName:c.default.string,defaultClassNameDragging:c.default.string,defaultClassNameDragged:c.default.string,defaultPosition:c.default.shape({x:c.default.number,y:c.default.number}),positionOffset:c.default.shape({x:c.default.oneOfType([c.default.number,c.default.string]),y:c.default.oneOfType([c.default.number,c.default.string])}),position:c.default.shape({x:c.default.number,y:c.default.number}),className:C.dontSetMe,style:C.dontSetMe,transform:C.dontSetMe}),S(n,"defaultProps",{...N.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(Z)),Z}var Pe;function xt(){if(Pe)return I.exports;Pe=1;const{default:r,DraggableCore:y}=gt();return I.exports=r,I.exports.default=r,I.exports.DraggableCore=y,I.exports}var bt=xt();const yt=ze(bt);st.workerSrc=new URL("/assets/pdf.worker.min-qwK7q_zL.mjs",import.meta.url).toString();const vt=({field:r,pageNum:y,pageWidth:c,pageHeight:o,onStop:D,onResize:d,onRemove:j,getIcon:C,onLabelChange:N})=>{const w=F.useRef(null),R=o||800,u=r.width/100*c,m=r.height/100*R,S=r.x/100*c,T=r.y/100*R,[p,n]=F.useState({width:u,height:m});F.useEffect(()=>{n({width:u,height:m})},[u,m]);const a=l=>{l.stopPropagation();const g=l.clientX,x=l.clientY,b=p.width,t=p.height,s=k=>{n({width:Math.max(8,b+k.clientX-g),height:Math.max(8,t+k.clientY-x)})},h=()=>{window.removeEventListener("mousemove",s),window.removeEventListener("mouseup",h),d(r.id,p.width/c*100,p.height/R*100)};window.addEventListener("mousemove",s),window.addEventListener("mouseup",h)},i=(l,g)=>{D(r.id,y,g.x/c*100,g.y/R*100)};return e.jsx(yt,{nodeRef:w,bounds:"parent",position:{x:S,y:T},onStop:i,cancel:".resize-handle, .label-input",children:e.jsxs("div",{ref:w,className:`absolute cursor-move pointer-events-auto border-2 rounded flex flex-col shadow-lg transition z-50 group
                    ${r.type==="signature"?"bg-yellow-400/80 border-yellow-600":r.type==="text"?"bg-blue-100/90 border-blue-500":r.type==="date"?"bg-green-100/90 border-green-500":"bg-purple-100/90 border-purple-500"}`,style:{width:p.width,height:p.height},children:[e.jsxs("div",{className:"flex items-center gap-1 p-1 overflow-hidden shrink-0",children:[C(r.type),p.width>40&&e.jsx("input",{className:"label-input bg-transparent border-none text-[9px] font-bold uppercase w-full focus:ring-0 p-0 truncate cursor-text",value:r.label,onChange:l=>N(r.id,l.target.value),onMouseDown:l=>l.stopPropagation()})]}),e.jsx("button",{onMouseDown:l=>{l.stopPropagation(),j(r.id)},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-0.5 shadow hover:bg-red-700 z-50",children:e.jsx(le,{size:10})}),e.jsx("div",{className:"resize-handle absolute bottom-0 right-0 w-3 h-3 cursor-se-resize flex items-end justify-end p-0.5 opacity-0 group-hover:opacity-100 transition",onMouseDown:a,children:e.jsx(dt,{size:10,className:"text-gray-600"})})]})})};function wt({companyId:r,onClose:y,initialMode:c="request"}){const[o,D]=F.useState(null),[d,j]=F.useState(null),[C,N]=F.useState(!1),[w,R]=F.useState(c),[u,m]=F.useState(""),[S,T]=F.useState(""),[p,n]=F.useState(""),[a,i]=F.useState([]),[l,g]=F.useState({}),x=f=>{const M=f.target.files[0];M&&M.type==="application/pdf"?(D(M),n(M.name.replace(".pdf",""))):alert("Please upload a valid PDF.")},b=f=>{if(!o)return;let M=25,P=5;f==="checkbox"&&(M=4,P=3),f==="text"&&(M=30,P=5),f==="date"&&(M=20,P=5);const q={id:re(),type:f,page:1,x:10,y:10,width:M,height:P,label:f==="text"?"Label":f};i(E=>[...E,q])},t=f=>i(M=>M.filter(P=>P.id!==f)),s=(f,M,P,q)=>{i(E=>E.map(L=>L.id===f?{...L,x:P,y:q,page:M}:L))},h=(f,M,P)=>{i(q=>q.map(E=>E.id===f?{...E,width:M,height:P}:E))},k=(f,M)=>{i(P=>P.map(q=>q.id===f?{...q,label:M}:q))},_=f=>{g(M=>({...M,[f.pageNumber]:{width:f.width,height:f.height}}))},z=async()=>{if(!o||a.length===0){alert("Please upload a file and place fields.");return}if(w==="request"&&(!u||!S)){alert("Please provide recipient details for a direct request.");return}N(!0);const f={"{{full_name}}":S,"{{email}}":u},M=a.map(P=>P.type==="text"&&f[P.label]?{...P,defaultValue:f[P.label],readOnly:!0}:P);try{const q=`secure_documents/${r}/${w==="template"?"templates":"originals"}/${Date.now()}_${o.name}`,E=ke(ae,q);await Ue(E,o);const L={companyId:r,title:p,storagePath:q,fields:M.map(U=>({id:U.id,type:U.type,label:U.label,pageNumber:U.page,xPosition:U.x,yPosition:U.y,width:U.width,height:U.height,required:!0,defaultValue:U.defaultValue||null,readOnly:U.readOnly||!1})),updatedAt:Q()};if(w==="template")await ne(W($,"companies",r,"templates"),{...L,createdAt:Q(),createdBy:oe.currentUser.uid}),alert("Template saved successfully!");else{const U=re();await ne(W($,"companies",r,"signing_requests"),{...L,recipientEmail:u,recipientName:S,status:"sent",createdAt:Q(),senderId:oe.currentUser.uid,accessToken:U,sendEmail:!0}),alert("Document sent to recipient!")}y&&y()}catch(P){console.error("Error saving:",P),alert("Action failed. Check console for details.")}finally{N(!1)}},v=f=>{switch(f){case"signature":return e.jsx(pe,{size:14});case"text":return e.jsx(he,{size:14});case"checkbox":return e.jsx(ue,{size:14});case"date":return e.jsx(ce,{size:14});default:return e.jsx(Re,{size:14})}};return e.jsxs("div",{className:"flex flex-col h-screen bg-gray-100 font-sans",children:[e.jsxs("div",{className:"bg-white border-b px-6 py-4 flex justify-between items-center shadow-sm z-20 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 text-gray-800",children:[w==="template"?e.jsx(H,{className:"text-purple-600"}):e.jsx(Le,{className:"text-blue-600"}),w==="template"?"Create Template":"New Envelope"]}),e.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-lg",children:[e.jsx("button",{onClick:()=>R("request"),className:`px-3 py-1 text-xs font-bold rounded-md transition ${w==="request"?"bg-white shadow text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"One-off Send"}),e.jsx("button",{onClick:()=>R("template"),className:`px-3 py-1 text-xs font-bold rounded-md transition ${w==="template"?"bg-white shadow text-purple-600":"text-gray-500 hover:text-gray-700"}`,children:"Save Template"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:y,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:"Cancel"}),e.jsxs("button",{onClick:z,disabled:C,className:`px-6 py-2 text-white font-bold rounded-lg flex items-center gap-2 disabled:opacity-50 transition-all shadow-md
                    ${w==="template"?"bg-purple-600 hover:bg-purple-700":"bg-blue-600 hover:bg-blue-700"}`,children:[C?e.jsx(V,{className:"animate-spin"}):e.jsx(tt,{size:18}),w==="template"?"Save Template":"Send Document"]})]})]}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsxs("div",{className:"w-80 bg-white border-r flex flex-col z-10 shadow-lg shrink-0",children:[w==="request"&&e.jsxs("div",{className:"p-6 border-b animate-in fade-in slide-in-from-top-2",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"1. Recipient"}),e.jsx("input",{type:"text",placeholder:"Recipient Name",className:"w-full mb-2 p-2 text-sm border rounded bg-gray-50 focus:bg-white transition-colors",value:S,onChange:f=>T(f.target.value)}),e.jsx("input",{type:"email",placeholder:"Recipient Email",className:"w-full p-2 text-sm border rounded bg-gray-50 focus:bg-white transition-colors",value:u,onChange:f=>m(f.target.value)})]}),e.jsxs("div",{className:"p-6 flex-1 overflow-y-auto",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-4",children:w==="request"?"2. Setup Fields":"1. Setup Fields"}),o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[{id:"signature",label:"Signature",icon:e.jsx(pe,{size:18}),color:"bg-yellow-50 text-yellow-700 border-yellow-200"},{id:"text",label:"Text/Placeholder",icon:e.jsx(he,{size:18}),color:"bg-blue-50 text-blue-700 border-blue-200"},{id:"date",label:"Date",icon:e.jsx(ce,{size:18}),color:"bg-green-50 text-green-700 border-green-200"},{id:"checkbox",label:"Checkbox",icon:e.jsx(ue,{size:18}),color:"bg-purple-50 text-purple-700 border-purple-200"}].map(f=>e.jsxs("button",{onClick:()=>b(f.id),className:`flex flex-col items-center justify-center p-3 border rounded-xl transition hover:shadow-md active:scale-95 ${f.color}`,children:[e.jsx("div",{className:"mb-1",children:f.icon}),e.jsx("span",{className:"text-[10px] font-bold uppercase",children:f.label})]},f.id))}),a.some(f=>f.type==="text")&&e.jsx("div",{className:"mb-6 p-3 bg-blue-50 rounded-lg border border-blue-100",children:e.jsxs("p",{className:"text-[10px] text-blue-700 leading-relaxed font-medium",children:[e.jsx("strong",{children:"Tip:"})," Use labels like ",e.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"{{full_name}}"})," to auto-fill driver data when sending."]})})]}):e.jsxs("div",{className:"text-center p-6 border-2 border-dashed border-gray-300 rounded-xl bg-gray-50 hover:border-blue-400 transition-colors",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-2 font-medium",children:"Upload a PDF first"}),e.jsx("input",{type:"file",accept:"application/pdf",onChange:x,className:"hidden",id:"pdf-upload"}),e.jsx("label",{htmlFor:"pdf-upload",className:"px-4 py-2 bg-white border border-gray-300 rounded shadow-sm text-sm font-bold cursor-pointer hover:bg-gray-50 active:scale-95 transition-transform inline-block",children:"Choose File"})]}),a.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:["Placed Fields (",a.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-1",children:a.map(f=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 border rounded-lg text-xs group",children:[e.jsxs("div",{className:"flex items-center gap-2 truncate",children:[e.jsx("div",{className:"text-gray-400 shrink-0",children:v(f.type)}),e.jsx("span",{className:"font-bold truncate",children:f.label})]}),e.jsx("button",{onClick:()=>t(f.id),className:"text-red-400 hover:text-red-600 hover:bg-red-50 p-1 rounded transition-colors",children:e.jsx(le,{size:14})})]},f.id))})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-200 p-8 flex justify-center relative scroll-smooth",children:o&&e.jsx(Ze,{file:o,onLoadSuccess:({numPages:f})=>j(f),className:"flex flex-col gap-8 pb-16",children:Array.from(new Array(d),(f,M)=>{const P=M+1,q=l[P];return e.jsxs("div",{className:"relative shadow-2xl border border-gray-400 bg-white inline-block ring-1 ring-black/5",children:[e.jsx(et,{pageNumber:P,width:700,onLoadSuccess:_,renderAnnotationLayer:!1,renderTextLayer:!1}),e.jsx("div",{className:"absolute inset-0 z-10 pointer-events-none",children:a.filter(E=>E.page===P).map(E=>e.jsx(vt,{field:E,pageNum:P,pageWidth:700,pageHeight:q?q.height:900,onStop:s,onResize:h,onRemove:t,getIcon:v,onLabelChange:k},E.id))})]},P)})})})]})]})}function jt({companyId:r}){const[y,c]=F.useState([]),[o,D]=F.useState(!0);F.useEffect(()=>{d()},[r]);const d=async()=>{D(!0);try{const N=ie(W($,"companies",r,"signing_requests"),_e("createdAt","desc")),R=(await Ee(N)).docs.map(u=>({id:u.id,...u.data()}));c(R)}catch(N){console.error("Error loading history:",N)}finally{D(!1)}},j=async N=>{try{let w=N;if(N.startsWith("gs://")){const m=N.split(ae.app.options.storageBucket);m[1]&&(w=m[1].substring(1))}const R=ke(ae,w),u=await Xe(R);window.open(u,"_blank")}catch(w){console.error("Download Error:",w),alert("Could not download file. It may have been deleted or moved.")}},C=N=>{const w=(N||"").toLowerCase();return w==="signed"?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-bold bg-green-100 text-green-700 border border-green-200",children:[e.jsx(Ae,{size:12})," Signed"]}):w==="sent"?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-bold bg-blue-100 text-blue-700 border border-blue-200",children:[e.jsx(Ye,{size:12})," Sent"]}):w==="pending_seal"?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-bold bg-yellow-100 text-yellow-800 border border-yellow-200",children:[e.jsx(V,{size:12,className:"animate-spin"})," Sealing..."]}):e.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-gray-100 text-gray-600",children:N})};return o?e.jsx("div",{className:"p-8 text-center",children:e.jsx(V,{className:"animate-spin mx-auto text-blue-600"})}):e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-gray-50 text-xs font-bold text-gray-500 uppercase border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3",children:"Document Title"}),e.jsx("th",{className:"px-6 py-3",children:"Recipient"}),e.jsx("th",{className:"px-6 py-3",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right",children:"Sent Date"}),e.jsx("th",{className:"px-6 py-3 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:y.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"p-8 text-center text-gray-400",children:"No documents sent yet."})}):y.map(N=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4 font-medium text-gray-900 flex items-center gap-2",children:[e.jsx(H,{size:16,className:"text-blue-500"})," ",N.title||"Untitled"]}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-600",children:[e.jsx("div",{className:"font-medium text-gray-900",children:N.recipientName}),e.jsx("div",{className:"text-xs text-gray-400",children:N.recipientEmail})]}),e.jsx("td",{className:"px-6 py-4",children:C(N.status)}),e.jsx("td",{className:"px-6 py-4 text-right text-sm text-gray-500 font-mono",children:N.createdAt?.seconds?new Date(N.createdAt.seconds*1e3).toLocaleDateString():"--"}),e.jsx("td",{className:"px-6 py-4 text-right",children:N.status==="signed"?e.jsxs("button",{onClick:()=>j(N.signedPdfUrl||N.storagePath),className:"inline-flex items-center gap-2 px-3 py-1.5 bg-blue-50 text-blue-700 hover:bg-blue-100 rounded-lg text-xs font-bold transition-colors",children:[e.jsx(rt,{size:14})," Download"]}):e.jsx("button",{className:"text-gray-300 cursor-not-allowed",disabled:!0,children:e.jsx(at,{size:16})})})]},N.id))})]})})})}function zt(){const{currentCompanyProfile:r,loading:y}=$e(),c=We(),{showSuccess:o,showError:D}=Ie(),[d,j]=F.useState("list"),[C,N]=F.useState("view"),[w,R]=F.useState("request"),[u,m]=F.useState([]),[S,T]=F.useState(!0),[p,n]=F.useState(!1),[a,i]=F.useState(null),[l,g]=F.useState([]),[x,b]=F.useState(""),[t,s]=F.useState(!1);F.useEffect(()=>{if(!r?.id)return;const v=ie(W($,"companies",r.id,"templates"),_e("updatedAt","desc"));return Be(v,f=>{m(f.docs.map(M=>({id:M.id,...M.data()}))),T(!1)})},[r?.id]),F.useEffect(()=>{p&&r?.id&&(async()=>{const f=ie(W($,"companies",r.id,"leads")),M=await Ee(f);g(M.docs.map(P=>({id:P.id,...P.data()})))})()},[p,r?.id]);const h=v=>{i(v),n(!0)},k=async v=>{s(!0);try{const f=re(),M=a.fields.map(q=>{let E=null;const L=(q.label||"").toLowerCase();return L.includes("{{full_name}}")?E=`${v.firstName} ${v.lastName}`:L.includes("{{first_name}}")?E=v.firstName:L.includes("{{last_name}}")?E=v.lastName:L.includes("{{email}}")?E=v.email:L.includes("{{phone}}")?E=v.phone:L.includes("{{date}}")&&(E=new Date().toLocaleDateString()),{...q,defaultValue:E}}),P={companyId:r.id,recipientEmail:v.email,recipientName:`${v.firstName} ${v.lastName}`,recipientId:v.driverId||null,title:a.title,status:"sent",createdAt:Q(),storagePath:a.storagePath,senderId:oe.currentUser.uid,accessToken:f,sendEmail:!0,fields:M,templateId:a.id,fieldValues:M.reduce((q,E)=>(E.defaultValue&&(q[E.id]=E.defaultValue),q),{})};await ne(W($,"companies",r.id,"signing_requests"),P),o(`Document sent to ${v.firstName}!`),n(!1),j("list")}catch(f){console.error(f),D("Failed to send template.")}finally{s(!1)}},_=async v=>{window.confirm("Delete template?")&&await Qe(Je($,"companies",r.id,"templates",v))};if(y)return e.jsx(He,{});if(!r)return c("/company/dashboard"),null;if(C==="create")return e.jsx(wt,{companyId:r.id,initialMode:w,onClose:()=>N("view")});const z=l.filter(v=>`${v.firstName} ${v.lastName} ${v.email}`.toLowerCase().includes(x.toLowerCase()));return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6 sm:p-8",children:[e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>c("/company/dashboard"),className:"flex items-center gap-2 text-gray-500 hover:text-gray-800 text-sm font-medium mb-2 transition-colors",children:[e.jsx(Ve,{size:16})," Back to Dashboard"]}),e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(nt,{className:"text-blue-600"})," Documents Center"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>{R("template"),N("create")},className:"flex items-center gap-2 px-4 py-2.5 bg-white text-gray-700 border border-gray-200 font-bold rounded-xl shadow-sm hover:bg-gray-50 transition-all",children:[e.jsx(H,{size:18,className:"text-purple-600"})," Create Template"]}),e.jsxs("button",{onClick:()=>{R("request"),N("create")},className:"flex items-center gap-2 px-5 py-2.5 bg-blue-600 text-white font-bold rounded-xl shadow-lg hover:bg-blue-700 hover:shadow-blue-200 transition-all transform hover:-translate-y-0.5",children:[e.jsx(Re,{size:20})," Send One-off"]})]})]}),e.jsxs("div",{className:"flex border-b border-gray-200 bg-white px-4 rounded-t-xl",children:[e.jsxs("button",{onClick:()=>j("list"),className:`px-6 py-4 text-sm font-bold border-b-2 flex items-center gap-2 transition-all ${d==="list"?"border-blue-600 text-blue-600":"border-transparent text-gray-400 hover:text-gray-600"}`,children:[e.jsx(ot,{size:16})," History"]}),e.jsxs("button",{onClick:()=>j("templates"),className:`px-6 py-4 text-sm font-bold border-b-2 flex items-center gap-2 transition-all ${d==="templates"?"border-purple-600 text-purple-600":"border-transparent text-gray-400 hover:text-gray-600"}`,children:[e.jsx(H,{size:16})," Templates"]})]}),e.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-2 duration-300",children:d==="list"?e.jsx(jt,{companyId:r.id}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:S?e.jsx("div",{className:"col-span-full flex justify-center py-12",children:e.jsx(V,{className:"animate-spin text-gray-300"})}):u.length===0?e.jsx("div",{className:"col-span-full bg-white border-2 border-dashed rounded-2xl p-12 text-center text-gray-400",children:"No templates saved yet."}):u.map(v=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl p-5 shadow-sm hover:shadow-md transition-all group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"bg-purple-50 p-3 rounded-xl",children:e.jsx(H,{size:24,className:"text-purple-600"})}),e.jsx("button",{onClick:()=>_(v.id),className:"opacity-0 group-hover:opacity-100 p-2 text-red-500 hover:bg-red-50 rounded-lg transition-opacity",children:e.jsx(it,{size:16})})]}),e.jsx("h3",{className:"font-bold text-gray-900 mb-1 truncate",children:v.title}),e.jsxs("p",{className:"text-[10px] text-gray-400 uppercase font-bold mb-6",children:[v.fields?.length||0," Fields"]}),e.jsxs("button",{onClick:()=>h(v),className:"w-full py-2.5 bg-purple-600 text-white text-xs font-bold rounded-xl hover:bg-purple-700 flex items-center justify-center gap-2 transition-all shadow-sm",children:[e.jsx(fe,{size:14})," Use Template"]})]},v.id))})})]}),p&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"p-6 border-b flex justify-between items-center bg-gray-50",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Send Template"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Select a driver to receive: ",e.jsx("b",{children:a?.title})]})]}),e.jsx("button",{onClick:()=>n(!1),className:"p-2 hover:bg-white rounded-full transition-colors",children:e.jsx(le,{size:20})})]}),e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ge,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",placeholder:"Search by name or email...",className:"w-full pl-10 pr-4 py-2.5 bg-gray-100 border-none rounded-xl text-sm focus:ring-2 focus:ring-purple-500 transition-all",value:x,onChange:v=>b(v.target.value)})]})}),e.jsx("div",{className:"max-h-[400px] overflow-y-auto p-2 space-y-1",children:z.length===0?e.jsx("div",{className:"py-12 text-center text-gray-400 text-sm italic",children:"No drivers found."}):z.map(v=>e.jsxs("button",{disabled:t,onClick:()=>k(v),className:"w-full flex items-center justify-between p-3 rounded-xl hover:bg-purple-50 group transition-all text-left",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-gray-100 p-2 rounded-lg group-hover:bg-purple-100 group-hover:text-purple-600 transition-colors",children:e.jsx(Ke,{size:18})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-bold text-gray-900",children:[v.firstName," ",v.lastName]}),e.jsx("p",{className:"text-xs text-gray-500",children:v.email})]})]}),e.jsx("div",{className:"text-purple-600 opacity-0 group-hover:opacity-100 transition-opacity",children:t?e.jsx(V,{size:16,className:"animate-spin"}):e.jsx(fe,{size:16})})]},v.id))})]})})]})}export{zt as default};
