import{c as N,r as y,z as _,q as je,n as Ne,a as ve,ak as we,j as e,U as H,X as le,L as E,V as ne,H as P,p as M,d as S,G as oe,x as ie,y as ce,ah as de,$ as ke,a2 as F,aw as Ce,m as R,ad as xe,ae as me,ai as Se,a0 as ue,ag as Te,ax as J,D as B,t as Me,T as ze,Z as Ee,aa as Ae,E as G,a3 as Le,af as De,W as _e}from"./index-DL8sidqm.js";import{E as Ue,u as $e}from"./EditUserModal-DTQLbi1n.js";import{T as pe,S as Pe}from"./trash-2-wanxsFLc.js";import{L as Q,C as ge,P as Re,F as he}from"./userService-CF_Ufzlf.js";import{P as Y,C as K}from"./plus-7Y37wSRt.js";import{S as I}from"./save-BKvBBKs-.js";import{S as Ie,C as be,W as ee,A as Oe}from"./wrench-C8_VYHIS.js";import{D as He}from"./dollar-sign-Dv4Qb7XK.js";import{B as ye}from"./building-DlN8HlPJ.js";import{P as Ge}from"./pen-tool-D5cRxhsD.js";const qe=[["path",{d:"M10 22V7a1 1 0 0 0-1-1H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5a1 1 0 0 0-1-1H2",key:"1ah6g2"}],["rect",{x:"14",y:"2",width:"8",height:"8",rx:"1",key:"88lufb"}]],Fe=N("blocks",qe);const Be=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Qe=N("circle",Be);const Ye=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],Ve=N("cloud-upload",Ye);const We=[["rect",{x:"2",y:"6",width:"20",height:"8",rx:"1",key:"1estib"}],["path",{d:"M17 14v7",key:"7m2elx"}],["path",{d:"M7 14v7",key:"1cm7wv"}],["path",{d:"M17 3v3",key:"1v4jwn"}],["path",{d:"M7 3v3",key:"7o6guu"}],["path",{d:"M10 14 2.3 6.3",key:"1023jk"}],["path",{d:"m14 6 7.7 7.7",key:"1s8pl2"}],["path",{d:"m8 6 8 8",key:"hl96qh"}]],Xe=N("construction",We);const Ze=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Je=N("ellipsis-vertical",Ze);const Ke=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],es=N("eye-off",Ke);const ss=[["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M14 6a6 6 0 0 1 6 6v3",key:"1hnv84"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6",key:"9ciidu"}],["rect",{x:"2",y:"15",width:"20",height:"4",rx:"1",key:"g3x8cw"}]],as=N("hard-hat",ss);const ts=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],q=N("hash",ts);const rs=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],ls=N("heart",rs);const ns=[["path",{d:"M10 22v-6.57",key:"1wmca3"}],["path",{d:"M12 11h.01",key:"z322tv"}],["path",{d:"M12 7h.01",key:"1ivr5q"}],["path",{d:"M14 15.43V22",key:"1q2vjd"}],["path",{d:"M15 16a5 5 0 0 0-6 0",key:"o9wqvi"}],["path",{d:"M16 11h.01",key:"xkw8gn"}],["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 7h.01",key:"1vti4s"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],os=N("hotel",ns);const is=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],cs=N("key",is);const ds=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}]],xs=N("list-checks",ds);const ms=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],us=N("list",ms);const ps=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],gs=N("pencil",ps);const hs=[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]],bs=N("plane",hs);const ys=[["path",{d:"M3 5h18",key:"1u36vt"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 19h18",key:"awlh7x"}]],fs=N("text-align-justify",ys);const js=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],Ns=N("text-align-start",js);function vs({companyId:s,onClose:o}){const[g,m]=y.useState([]),[n,c]=y.useState(!0),[t,x]=y.useState(""),[f,l]=y.useState("Current Company"),[u,i]=y.useState(null),[a,r]=y.useState(null),{showSuccess:d,showInfo:p,showError:j}=_?_():{showSuccess:alert,showInfo:alert,showError:alert},b=window.location.origin;y.useEffect(()=>{if(!s)return;(async()=>{try{const z=await P(M(S,"companies",s));if(z.exists()){const $=z.data();x($.appSlug||s),l($.companyName||"Current Company")}}catch(z){console.warn("Error fetching company info:",z)}})();const v=je(ve(S,"memberships"),Ne("companyId","==",s)),w=we(v,async z=>{const $=[];for(const fe of z.docs){const V=fe.data(),O=V.userId;let W={name:"Unknown",email:"No Email"};try{const T=await P(M(S,"users",O));T.exists()&&(W=T.data())}catch(T){console.log("Error fetching user:",T)}let X={callGoal:150,contactGoal:50};try{const T=await P(M(S,"companies",s,"team",O));if(T.exists()){const Z=T.data();X={callGoal:Z.callGoal||150,contactGoal:Z.contactGoal||50}}}catch(T){console.log("Error fetching goals:",T)}$.push({id:O,...W,role:V.role,...X})}m($),c(!1)});return()=>w()},[s]);const A=h=>{const w=`${b.replace(/\/$/,"")}/apply/${t}?recruiter=${h}`;navigator.clipboard.writeText(w),d("Custom recruiter link copied!")},k=async(h,v,w)=>{try{await oe(M(S,"companies",s,"team",h),{[v]:Number(w),updatedAt:new Date},{merge:!0})}catch(z){console.error(z),alert("Error saving goal")}},U=async(h,v)=>{if(window.confirm(`Are you sure you want to remove ${v||"this user"} from the team?`)){r(h);try{await ie(ce,"deletePortalUser")({userId:h,companyId:s}),d(`${v||"User"} has been removed from the team.`)}catch(w){console.error("Error deleting user:",w),j("Failed to remove user: "+(w.message||"Unknown error"))}finally{r(null)}}},C=y.useMemo(()=>{const h=new Map;return h.set(s,f),h},[s,f]);return e.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl border border-gray-200 flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center bg-gray-50 rounded-t-xl",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(H,{className:"text-blue-600"})," Manage Team & Links"]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Set goals and get tracking links for your recruiters."})]}),e.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-200 rounded-full",children:e.jsx(le,{size:20})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:e.jsx("div",{children:n?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(E,{className:"animate-spin mx-auto mb-2"})," Loading team..."]}):g.length===0?e.jsx("p",{className:"text-center text-gray-400 italic py-4",children:"No members found."}):e.jsx("div",{className:"space-y-3",children:g.map(h=>e.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-between p-4 bg-white border border-gray-200 rounded-lg shadow-sm gap-4 hover:border-blue-300 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 w-full lg:w-1/3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center text-gray-600 font-bold shrink-0",children:h.name?h.name.charAt(0).toUpperCase():"?"}),e.jsxs("div",{className:"overflow-hidden",children:[e.jsx("p",{className:"font-bold text-gray-900 truncate",children:h.name||"Unknown"}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:h.email})]})]}),e.jsxs("div",{className:"flex gap-4 items-center w-full lg:w-auto",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 p-2 rounded-lg border border-gray-100",children:[e.jsx(ne,{size:14,className:"text-blue-500"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[8px] font-bold text-gray-400 uppercase",children:"Dials"}),e.jsx("input",{type:"number",className:"w-12 p-0 text-sm bg-transparent border-none text-center font-bold focus:ring-0 outline-none",defaultValue:h.callGoal,onBlur:v=>k(h.id,"callGoal",v.target.value)})]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 p-2 rounded-lg border border-gray-100",children:[e.jsx(H,{size:14,className:"text-green-600"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[8px] font-bold text-gray-400 uppercase",children:"Contacts"}),e.jsx("input",{type:"number",className:"w-12 p-0 text-sm bg-transparent border-none text-center font-bold focus:ring-0 outline-none",defaultValue:h.contactGoal,onBlur:v=>k(h.id,"contactGoal",v.target.value)})]})]}),e.jsxs("button",{onClick:()=>A(h.id),className:"flex items-center gap-2 px-3 py-2 bg-purple-50 text-purple-700 hover:bg-purple-100 rounded-lg border border-purple-200 transition-colors text-sm font-semibold ml-2",title:"Copy Custom Tracking Link",children:[e.jsx(Q,{size:14})," Link"]}),e.jsx("button",{onClick:()=>i(h.id),className:"flex items-center gap-2 px-3 py-2 bg-blue-50 text-blue-700 hover:bg-blue-100 rounded-lg border border-blue-200 transition-colors text-sm font-semibold",title:"Edit User",children:e.jsx(gs,{size:14})}),e.jsx("button",{onClick:()=>U(h.id,h.name),disabled:a===h.id,className:"flex items-center gap-2 px-3 py-2 bg-red-50 text-red-700 hover:bg-red-100 rounded-lg border border-red-200 transition-colors text-sm font-semibold disabled:opacity-50",title:"Remove from Team",children:a===h.id?e.jsx(E,{size:14,className:"animate-spin"}):e.jsx(pe,{size:14})})]})]},h.id))})})})]}),u&&e.jsx(Ue,{userId:u,companyId:s,allCompaniesMap:C,onClose:()=>i(null),onSave:()=>{}})]})}const se=[{id:"shortAnswer",label:"Short Answer",icon:Ns,description:"Single line text input for simple responses."},{id:"paragraph",label:"Paragraph",icon:fs,description:"Multi-line text area for detailed explanations."},{id:"multipleChoice",label:"Multiple Choice",icon:Qe,description:"Select one option from a list (Radio buttons)."},{id:"checkboxes",label:"Checkboxes",icon:de,description:"Select multiple options from a list."},{id:"dropdown",label:"Dropdown",icon:us,description:"Select one option from a dropdown menu."},{id:"fileUpload",label:"File Upload",icon:Ve,description:"Allow applicants to upload documents or images."},{id:"date",label:"Date",icon:ke,description:"Date picker input."},{id:"time",label:"Time",icon:F,description:"Time picker input."},{id:"linearScale",label:"Linear Scale",icon:q,description:"Rating scale (e.g., 1 to 5)."}],ws={id:"",type:"shortAnswer",label:"",required:!1,options:["Option 1"],helpText:"",min:1,max:5,minLabel:"Poor",maxLabel:"Excellent"},ae=s=>["multipleChoice","checkboxes","dropdown"].includes(s);function ks({question:s,index:o,onChange:g,onDelete:m}){const n=(l,u)=>{g(o,{...s,[l]:u})},c=(l,u)=>{const i=[...s.options||[]];i[l]=u,n("options",i)},t=()=>{const l=[...s.options||[],`Option ${(s.options?.length||0)+1}`];n("options",l)},x=l=>{const u=s.options.filter((i,a)=>a!==l);n("options",u)},f=l=>{const u=l.target.value,i={type:u};ae(u)&&(!s.options||s.options.length===0)&&(i.options=["Option 1"]),g(o,{...s,...i})};return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm relative group transition-all hover:shadow-md border-l-4 border-l-blue-500",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"p-1 text-gray-400 cursor-move",children:e.jsx(Je,{size:20})}),e.jsxs("div",{className:"flex-1 px-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx("input",{type:"text",placeholder:"Question Title",className:"w-full p-3 bg-gray-50 border border-gray-200 rounded-lg text-lg font-medium text-gray-900 focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all",value:s.label,onChange:l=>n("label",l.target.value)})}),e.jsx("div",{children:e.jsxs("div",{className:"relative",children:[e.jsx("select",{className:"w-full p-3 pl-10 border border-gray-200 rounded-lg bg-white appearance-none cursor-pointer hover:border-gray-300 focus:ring-2 focus:ring-blue-500 outline-none",value:s.type,onChange:f,children:se.map(l=>e.jsx("option",{value:l.id,children:l.label},l.id))}),e.jsx("div",{className:"absolute left-3 top-3.5 text-gray-500 pointer-events-none",children:(()=>{const l=se.find(u=>u.id===s.type)?.icon;return l?e.jsx(l,{size:18}):null})()})]})})]}),e.jsx("button",{onClick:()=>m(o),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors",title:"Delete Question",children:e.jsx(pe,{size:20})})]}),e.jsxs("div",{className:"pl-10 pr-12 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{size:14,className:"text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Description (optional)",className:"flex-1 text-sm text-gray-600 border-b border-transparent hover:border-gray-300 focus:border-blue-500 outline-none bg-transparent transition-colors py-1",value:s.helpText||"",onChange:l=>n("helpText",l.target.value)})]}),ae(s.type)&&e.jsxs("div",{className:"space-y-2 mt-4 ml-1 pl-4 border-l-2 border-gray-100",children:[s.options?.map((l,u)=>e.jsxs("div",{className:"flex items-center gap-3 group/opt",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-gray-300 rounded-full shrink-0"}),e.jsx("input",{type:"text",className:"flex-1 p-2 text-sm border border-transparent hover:border-gray-200 focus:border-blue-300 rounded outline-none transition-all",value:l,onChange:i=>c(u,i.target.value),placeholder:`Option ${u+1}`}),e.jsx("button",{onClick:()=>x(u),className:"opacity-0 group-hover/opt:opacity-100 p-1 text-gray-400 hover:text-red-500 transition-opacity",children:e.jsx(le,{size:16})})]},u)),e.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-sm text-blue-600 font-medium hover:text-blue-800 mt-2 px-2 py-1 rounded hover:bg-blue-50 transition-colors w-fit",children:[e.jsx(Y,{size:16})," Add Option"]})]}),s.type==="fileUpload"&&e.jsx("div",{className:"border-2 border-dashed border-gray-200 rounded-lg p-6 text-center bg-gray-50 text-gray-400 text-sm mt-4",children:e.jsx("p",{children:"Applicants will see a file upload button here."})}),e.jsx("div",{className:"pt-4 mt-4 border-t border-gray-100 flex justify-end items-center gap-4",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Required"}),e.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:s.required||!1,onChange:l=>n("required",l.target.checked)}),e.jsx("div",{className:"w-9 h-5 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600"})]})]})})]})]})}function Cs({questions:s=[],onChange:o,onSave:g,loading:m}){const[n,c]=y.useState(!1),t=y.useRef(null),x=y.useRef(null),f=()=>{const r={...ws,id:crypto.randomUUID()};o([...s,r])},l=(r,d)=>{const p=[...s];p[r]=d,o(p)},u=r=>{const d=s.filter((p,j)=>j!==r);o(d)},i=()=>{let r=[...s];const d=r.splice(t.current,1)[0];r.splice(x.current,0,d),t.current=null,x.current=null,o(r)},a=r=>{const d="w-full p-3 border border-gray-300 rounded-lg bg-white opacity-75 cursor-not-allowed";switch(r.type){case"paragraph":return e.jsx("textarea",{className:d,rows:"3",disabled:!0,placeholder:"Long answer text..."});case"multipleChoice":return e.jsx("div",{className:"space-y-2",children:r.options?.map((p,j)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-400"}),e.jsx("span",{className:"text-gray-600 text-sm",children:p})]},j))});case"checkboxes":return e.jsx("div",{className:"space-y-2",children:r.options?.map((p,j)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded border border-gray-400"}),e.jsx("span",{className:"text-gray-600 text-sm",children:p})]},j))});case"dropdown":return e.jsxs("select",{className:d,disabled:!0,children:[e.jsx("option",{children:"Select an option..."}),r.options?.map((p,j)=>e.jsx("option",{children:p},j))]});case"fileUpload":return e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center bg-gray-50",children:e.jsx("p",{className:"text-gray-500 text-sm",children:"Upload file button will appear here"})});case"date":return e.jsx("input",{type:"date",className:d,disabled:!0});case"time":return e.jsx("input",{type:"time",className:d,disabled:!0});case"linearScale":return e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-gray-50 rounded border border-gray-200",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:[r.min||1," (",r.minLabel||"Min",")"]}),e.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(p=>e.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-400"},p))}),e.jsxs("span",{className:"text-xs text-gray-500",children:[r.max||5," (",r.maxLabel||"Max",")"]})]});default:return e.jsx("input",{type:"text",className:d,disabled:!0,placeholder:"Short answer text"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 bg-white p-4 rounded-xl border border-gray-200 shadow-sm sticky top-0 z-20",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Custom Questions"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.length," questions added"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>c(!n),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${n?"bg-purple-100 text-purple-700":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[n?e.jsx(es,{size:18}):e.jsx(Ce,{size:18}),n?"Edit Mode":"Preview"]}),e.jsxs("button",{onClick:g,disabled:m,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 disabled:opacity-50 shadow-md transition-all",children:[m?e.jsx(E,{className:"animate-spin",size:18}):e.jsx(I,{size:18}),"Save Changes"]})]})]}),e.jsxs("div",{className:"space-y-4 min-h-[200px]",children:[s.length===0&&e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-200 rounded-xl",children:[e.jsx("p",{className:"text-gray-400 font-medium",children:"No questions yet."}),e.jsx("button",{onClick:f,className:"mt-4 text-blue-600 hover:text-blue-800 font-bold text-sm",children:"+ Add your first question"})]}),s.map((r,d)=>e.jsx("div",{draggable:!n,onDragStart:p=>{t.current=d,p.currentTarget.style.opacity="0.5"},onDragEnter:p=>{x.current=d},onDragEnd:p=>{p.currentTarget.style.opacity="1",i()},onDragOver:p=>p.preventDefault(),className:`transition-all duration-200 ${n?"":"cursor-move"}`,children:n?e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"block text-sm font-bold text-gray-800 mb-1",children:[r.label||"Untitled Question",r.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),r.helpText&&e.jsx("p",{className:"text-xs text-gray-500",children:r.helpText})]}),a(r)]}):e.jsx(ks,{question:r,index:d,onChange:l,onDelete:u})},r.id||d))]}),!n&&e.jsx("div",{className:"flex justify-center pt-4",children:e.jsxs("button",{onClick:f,className:"group flex flex-col items-center gap-2 text-gray-400 hover:text-blue-600 transition-colors",children:[e.jsx("div",{className:"w-12 h-12 bg-white border-2 border-dashed border-gray-300 rounded-full flex items-center justify-center group-hover:border-blue-500 group-hover:bg-blue-50 transition-all shadow-sm",children:e.jsx(Y,{size:24})}),e.jsx("span",{className:"text-sm font-medium",children:"Add Question"})]})})]})}const te=[{id:"ssn",label:"Social Security Number",defaultReq:!0},{id:"dob",label:"Date of Birth",defaultReq:!0},{id:"addressHistory",label:"3 Years Address History",defaultReq:!0},{id:"employmentHistory",label:"Employment History (3-10 Yrs)",defaultReq:!0},{id:"cdlUpload",label:"CDL Document Upload",defaultReq:!0},{id:"medCardUpload",label:"Medical Card Upload",defaultReq:!1},{id:"mvrConsent",label:"MVR Consent Form",defaultReq:!0},{id:"referralSource",label:"Referral Source",defaultReq:!1}];function Ss({config:s,onChange:o}){const g=s||{},m=(n,c)=>{let x={...g[n]||{required:te.find(f=>f.id===n)?.defaultReq||!1,hidden:!1}};c==="required"?(x.required=!x.required,x.required&&(x.hidden=!1)):c==="hidden"&&(x.hidden=!x.hidden,x.hidden&&(x.required=!1)),o({...g,[n]:x})};return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden mb-8",children:[e.jsxs("div",{className:"p-4 bg-gray-50 border-b border-gray-200 flex items-center gap-2",children:[e.jsx(Ie,{size:18,className:"text-gray-500"}),e.jsx("h3",{className:"font-bold text-gray-800",children:"Standard DOT Questions Configuration"})]}),e.jsx("div",{className:"p-0",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-white text-gray-500 font-bold border-b border-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"Field Name"}),e.jsx("th",{className:"p-4 text-center w-32",children:"Required"}),e.jsx("th",{className:"p-4 text-center w-32",children:"Hidden"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:te.map(n=>{const c=g[n.id]||{required:n.defaultReq,hidden:!1};return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"p-4 font-medium text-gray-700",children:n.label}),e.jsx("td",{className:"p-4 text-center",children:e.jsx("button",{onClick:()=>m(n.id,"required"),className:`w-10 h-6 rounded-full relative transition-colors ${c.required?"bg-green-500":"bg-gray-200"}`,children:e.jsx("div",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full shadow-sm transition-transform ${c.required?"translate-x-4":"translate-x-0"}`})})}),e.jsx("td",{className:"p-4 text-center",children:e.jsx("button",{onClick:()=>m(n.id,"hidden"),className:`w-10 h-6 rounded-full relative transition-colors ${c.hidden?"bg-red-500":"bg-gray-200"}`,children:e.jsx("div",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full shadow-sm transition-transform ${c.hidden?"translate-x-4":"translate-x-0"}`})})})]},n.id)})})]})}),e.jsx("div",{className:"p-4 bg-gray-50 border-t border-gray-200 text-xs text-gray-500",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Note:"})," Hiding DOT required fields (like SSN or Employment History) may make your application non-compliant."]})})]})}const Ts=[{value:"cpm",label:"Cents Per Mile (CPM)"},{value:"percentage",label:"Percentage of Load (%)"},{value:"flatRate",label:"Flat Weekly Rate ($)"},{value:"hourly",label:"Hourly Rate ($)"}],Ms=[{value:"lessThan6Months",label:"Less than 6 Months"},{value:"lessThan1Year",label:"Less than 1 Year"},{value:"moreThan1Year",label:"More than 1 Year"},{value:"moreThan2Years",label:"More than 2 Years"},{value:"moreThan5Years",label:"More than 5 Years"}],zs=["Dry Van","Reefer","Flatbed","Tanker","Box Truck","Car Hauler","Step Deck","Lowboy","Conestoga","Intermodal","Power Only","Hotshot"],Es=[{id:"healthInsurance",label:"Health Insurance"},{id:"dental",label:"Dental Insurance"},{id:"vision",label:"Vision Insurance"},{id:"retirement401k",label:"401(k) Retirement"},{id:"signOnBonus",label:"Sign-on Bonus"},{id:"petPolicy",label:"Pet Policy"},{id:"riderPolicy",label:"Rider Policy"},{id:"newEquipment",label:"New Equipment (2022+)"},{id:"fuelCard",label:"Fuel Card / Discounts"},{id:"paidOrientation",label:"Paid Orientation"}],D={enabled:!1,payType:"cpm",cpm:{min:"",max:""},percentage:{min:"",max:""},flatRate:{amount:""},hourly:{amount:""},experienceRequired:"moreThan1Year",hiringGeography:{nationwide:!0,states:[]},freightTypes:[],homeTime:"Weekly"},As={companyDriver:{enabled:!1,solo:{...D},team:{...D}},ownerOperator:{enabled:!1,solo:{...D},team:{...D}},leaseOperator:{enabled:!1,solo:{...D},team:{...D}},benefits:{coversTransportation:!1,coversHotel:!1}},Ls=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"];function re({title:s,data:o,onChange:g,category:m}){const n=a=>{g({...o,enabled:a})},c=a=>{g({...o,payType:a.target.value})},t=(a,r,d)=>{const p=o[a]||{};g({...o,[a]:{...p,[r]:d}})},x=a=>{g({...o,hiringGeography:{...o.hiringGeography,nationwide:a}})},f=a=>{const r=o.hiringGeography?.states||[],d=r.includes(a)?r.filter(p=>p!==a):[...r,a];g({...o,hiringGeography:{...o.hiringGeography,states:d}})},l=a=>{const r=o.freightTypes||[],d=r.includes(a)?r.filter(p=>p!==a):[...r,a];g({...o,freightTypes:d})},u=Ts.filter(a=>m==="ownerOperator"||m==="leaseOperator"?a.value==="percentage"||a.value==="flatRate":!0),i=()=>{const a=o.payType;if(a==="cpm")return e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs text-gray-500 uppercase font-bold",children:"Min CPM"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-2 top-2 text-gray-400 text-xs",children:"$"}),e.jsx("input",{type:"number",step:"0.01",placeholder:"0.50",className:"w-full pl-5 p-2 border border-gray-300 rounded bg-white text-sm",value:o.cpm?.min||"",onChange:r=>t("cpm","min",r.target.value)})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs text-gray-500 uppercase font-bold",children:"Max CPM"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-2 top-2 text-gray-400 text-xs",children:"$"}),e.jsx("input",{type:"number",step:"0.01",placeholder:"0.75",className:"w-full pl-5 p-2 border border-gray-300 rounded bg-white text-sm",value:o.cpm?.max||"",onChange:r=>t("cpm","max",r.target.value)})]})]})]});if(a==="percentage")return e.jsx("div",{className:"flex gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs text-gray-500 uppercase font-bold",children:"Flat %"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",placeholder:"25",className:"w-full pr-6 p-2 border border-gray-300 rounded bg-white text-sm",value:o.percentage?.min||"",onChange:r=>t("percentage","min",r.target.value)}),e.jsx("span",{className:"absolute right-2 top-2 text-gray-400 text-xs",children:"%"})]})]})});if(a==="flatRate"||a==="hourly"){const r=a==="flatRate"?"flatRate":"hourly";return e.jsx("div",{className:"flex gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs text-gray-500 uppercase font-bold",children:"Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-2 top-2 text-gray-400 text-xs",children:"$"}),e.jsx("input",{type:"number",placeholder:"1500",className:"w-full pl-5 p-2 border border-gray-300 rounded bg-white text-sm",value:o[r]?.amount||"",onChange:d=>t(r,"amount",d.target.value)})]})]})})}};return e.jsxs("div",{className:`border rounded-xl transition-all duration-200 ${o.enabled?"border-blue-300 bg-white shadow-sm":"border-gray-200 bg-gray-50 opacity-80"}`,children:[e.jsxs("div",{className:"p-4 flex justify-between items-center border-b border-gray-100",children:[e.jsxs("h4",{className:`font-bold flex items-center gap-2 ${o.enabled?"text-blue-900":"text-gray-500"}`,children:[e.jsx(R,{size:18}),s]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:o.enabled||!1,onChange:a=>n(a.target.checked)}),e.jsx("div",{className:"w-9 h-5 bg-gray-300 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600"})]})]}),o.enabled&&e.jsxs("div",{className:"p-5 space-y-6 animate-in fade-in slide-in-from-top-2",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-gray-700",children:[e.jsx(He,{size:16,className:"text-green-600"})," Pay Structure"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx("select",{className:"w-full p-2 border border-gray-300 rounded bg-white text-sm focus:ring-2 focus:ring-blue-500 outline-none",value:o.payType,onChange:c,children:u.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})}),i()]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-gray-700 mb-2",children:[e.jsx(F,{size:16,className:"text-orange-500"})," Required Experience"]}),e.jsx("select",{className:"w-full p-2 border border-gray-300 rounded bg-white text-sm",value:o.experienceRequired,onChange:a=>g({...o,experienceRequired:a.target.value}),children:Ms.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-gray-700 mb-2",children:[e.jsx(xe,{size:16,className:"text-red-500"})," Hiring Geography"]}),e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[e.jsx("input",{type:"radio",name:`geo_${s}`,checked:o.hiringGeography?.nationwide===!0,onChange:()=>x(!0),className:"text-blue-600 focus:ring-blue-500"}),"Nationwide"]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[e.jsx("input",{type:"radio",name:`geo_${s}`,checked:o.hiringGeography?.nationwide===!1,onChange:()=>x(!1),className:"text-blue-600 focus:ring-blue-500"}),"Specific States"]})]}),o.hiringGeography?.nationwide===!1&&e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200 h-32 overflow-y-auto grid grid-cols-4 sm:grid-cols-6 gap-2",children:Ls.map(a=>{const r=o.hiringGeography.states?.includes(a);return e.jsx("button",{onClick:()=>f(a),className:`text-xs py-1 px-1 rounded border text-center transition-colors ${r?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-600 border-gray-300 hover:bg-gray-100"}`,children:a},a)})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-gray-700 mb-2",children:[e.jsx(me,{size:16,className:"text-blue-500"})," Specific Freight"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:zs.map(a=>{const r=o.freightTypes?.includes(a);return e.jsxs("button",{onClick:()=>l(a),className:`flex items-center gap-1.5 px-3 py-1.5 text-xs rounded-full border transition-all ${r?"bg-blue-50 text-blue-700 border-blue-200 ring-1 ring-blue-200":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"}`,children:[r?e.jsx(de,{size:12}):e.jsx(Se,{size:12}),a]},a)})})]})]})]})}function Ds({data:s,onChange:o,isCompanyAdmin:g}){const[m,n]=y.useState({companyDriver:"solo",ownerOperator:"solo",leaseOperator:"solo"}),c=s||{},t=i=>c[i]||{solo:{},team:{}},x=(i,a,r)=>{o({...c,[i]:{...t(i),[a]:r}})},f=i=>{const a=c.benefits||{},r=!a[i];o({...c,benefits:{...a,[i]:r}})},l=(i,a)=>{n(r=>({...r,[i]:a}))},u=(i,a,r)=>{const d=m[i],p=t(i);return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl overflow-hidden shadow-sm",children:[e.jsxs("div",{className:"p-4 bg-gray-50 border-b border-gray-200 flex justify-between items-center",children:[e.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[r," ",a]}),e.jsxs("div",{className:"flex bg-gray-200 p-1 rounded-lg",children:[e.jsx("button",{onClick:()=>l(i,"solo"),className:`px-3 py-1 text-xs font-bold rounded-md transition-all ${d==="solo"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Solo"}),e.jsx("button",{onClick:()=>l(i,"team"),className:`px-3 py-1 text-xs font-bold rounded-md transition-all ${d==="team"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Team"})]})]}),e.jsx("div",{className:"p-4",children:d==="solo"?e.jsx(re,{title:`${a} (Solo)`,data:p.solo||{},onChange:j=>x(i,"solo",j),category:i}):e.jsx(re,{title:`${a} (Team)`,data:p.team||{},onChange:j=>x(i,"team",j),category:i})})]})};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[u("companyDriver","Company Driver",e.jsx(R,{size:20,className:"text-blue-600"})),u("ownerOperator","Owner Operator",e.jsx(me,{size:20,className:"text-purple-600"})),u("leaseOperator","Lease Operator",e.jsx(cs,{size:20,className:"text-orange-600"}))]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"font-bold text-gray-900 flex items-center gap-2 mb-4 border-b border-gray-100 pb-2",children:[e.jsx(ls,{size:20,className:"text-red-500",fill:"currentColor"}),"Benefits & Perks (Global)"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Es.map(i=>{const a=c.benefits?.[i.id]===!0;return e.jsxs("button",{onClick:()=>f(i.id),className:`flex items-center gap-3 p-3 rounded-lg border text-left transition-all ${a?"bg-blue-50 border-blue-200 shadow-sm":"bg-white border-gray-200 hover:bg-gray-50"}`,children:[e.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border ${a?"bg-blue-600 border-blue-600 text-white":"border-gray-300 bg-white"}`,children:a&&e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})})}),e.jsx("span",{className:`text-sm font-medium ${a?"text-blue-900":"text-gray-600"}`,children:i.label})]},i.id)})}),g&&e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-100",children:[e.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-3",children:"Driver Transportation and Stay"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border border-gray-200 cursor-pointer hover:bg-gray-100",children:[e.jsx("input",{type:"checkbox",className:"w-5 h-5 text-green-600 rounded focus:ring-green-500 border-gray-300",checked:c.benefits?.coversTransportation===!0,onChange:()=>f("coversTransportation")}),e.jsx(bs,{size:18,className:"text-gray-500"}),e.jsx("span",{className:"text-sm font-bold text-gray-700",children:"Covers Travel to HQ"})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border border-gray-200 cursor-pointer hover:bg-gray-100",children:[e.jsx("input",{type:"checkbox",className:"w-5 h-5 text-green-600 rounded focus:ring-green-500 border-gray-300",checked:c.benefits?.coversHotel===!0,onChange:()=>f("coversHotel")}),e.jsx(os,{size:18,className:"text-gray-500"}),e.jsx("span",{className:"text-sm font-bold text-gray-700",children:"Covers Hotel Stay"})]})]})]})]})]})}function _s({currentCompanyProfile:s}){const{showSuccess:o,showError:g}=_(),{currentUserClaims:m}=ue(),[n,c]=y.useState("info"),[t,x]=y.useState({}),[f,l]=y.useState(!1),[u,i]=y.useState(!1),[a,r]=y.useState(!1),d=m?.roles?.[s.id]==="company_admin"||m?.roles?.globalRole==="super_admin";y.useEffect(()=>{s&&x({companyName:s.companyName||"",phone:s.contact?.phone||"",email:s.contact?.email||"",street:s.address?.street||"",city:s.address?.city||"",state:s.address?.state||"",zip:s.address?.zip||"",mcNumber:s.legal?.mcNumber||"",dotNumber:s.legal?.dotNumber||"",companyLogoUrl:s.companyLogoUrl||"",applicationConfig:s.applicationConfig||{},customQuestions:s.customQuestions||[],hiringPositions:s.hiringPositions||As})},[s]);const p=async()=>{l(!0);try{const b={companyName:t.companyName,contact:{phone:t.phone,email:t.email},address:{street:t.street,city:t.city,state:t.state,zip:t.zip},legal:{mcNumber:t.mcNumber,dotNumber:t.dotNumber},applicationConfig:t.applicationConfig,customQuestions:t.customQuestions,hiringPositions:t.hiringPositions,companyLogoUrl:t.companyLogoUrl};await J(s.id,b),o("Company settings saved successfully."),r(!1)}catch(b){console.error("Save failed",b),g("Failed to save settings: "+b.message)}finally{l(!1)}},j=async b=>{const A=b.target.files[0];if(A){i(!0);try{const k=await $e(s.id,A);await J(s.id,{companyLogoUrl:k}),x(U=>({...U,companyLogoUrl:k})),o("Logo uploaded successfully!")}catch(k){console.error("Logo failed",k),g("Logo upload failed: "+k.message)}finally{i(!1)}}};return e.jsxs("div",{className:"space-y-6 max-w-6xl animate-in fade-in",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-end border-b border-gray-200 pb-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Company Profile"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage your public presence and application settings."})]}),d&&!a&&e.jsxs("button",{onClick:()=>r(!0),className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 font-bold rounded-lg hover:bg-gray-50 flex items-center gap-2 shadow-sm transition-all",children:[e.jsx(Re,{size:16})," Edit Profile"]}),a&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{r(!1)},className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg font-medium transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:p,disabled:f,className:"px-4 py-2 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 shadow-md flex items-center gap-2 disabled:opacity-50",children:[f?e.jsx(E,{className:"animate-spin",size:16}):e.jsx(I,{size:16})," Save Changes"]})]})]}),e.jsxs("div",{className:"flex border-b border-gray-200 overflow-x-auto no-scrollbar",children:[e.jsxs("button",{onClick:()=>c("info"),className:`px-4 py-3 text-sm font-medium border-b-2 flex items-center gap-2 whitespace-nowrap transition-colors ${n==="info"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(Te,{size:16})," Company Information"]}),e.jsxs("button",{onClick:()=>c("questions"),className:`px-4 py-3 text-sm font-medium border-b-2 flex items-center gap-2 whitespace-nowrap transition-colors ${n==="questions"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(xs,{size:16})," Application Form Questions"]}),e.jsxs("button",{onClick:()=>c("hiring"),className:`px-4 py-3 text-sm font-medium border-b-2 flex items-center gap-2 whitespace-nowrap transition-colors ${n==="hiring"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(R,{size:16})," Hiring Positions & Offers"]})]}),n==="info"&&e.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-2",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 flex flex-col md:flex-row gap-8 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-32 h-32 bg-gray-50 rounded-xl flex items-center justify-center border border-gray-200 overflow-hidden shadow-inner",children:t.companyLogoUrl?e.jsx("img",{src:t.companyLogoUrl,alt:"Logo",className:"w-full h-full object-contain"}):e.jsx(ye,{className:"text-gray-400",size:48})}),a&&e.jsxs("label",{className:"cursor-pointer px-3 py-1.5 bg-blue-50 text-blue-600 rounded-md text-xs font-bold hover:bg-blue-100 transition-colors",children:[u?"Uploading...":"Change Logo",e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:j,disabled:u})]})]}),e.jsxs("div",{className:"flex-1 space-y-4 w-full",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Company Name"}),a?e.jsx("input",{type:"text",value:t.companyName||"",onChange:b=>x({...t,companyName:b.target.value}),className:"w-full p-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none font-bold text-gray-900"}):e.jsx("p",{className:"text-xl font-bold text-gray-900",children:t.companyName||"Not Set"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"MC Number"}),a?e.jsxs("div",{className:"relative",children:[e.jsx(q,{size:14,className:"absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",value:t.mcNumber||"",onChange:b=>x({...t,mcNumber:b.target.value}),className:"w-full pl-9 p-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}):e.jsx("p",{className:"text-sm font-medium text-gray-800 bg-gray-50 px-3 py-2 rounded-lg border border-gray-200",children:t.mcNumber||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"DOT Number"}),a?e.jsxs("div",{className:"relative",children:[e.jsx(q,{size:14,className:"absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",value:t.dotNumber||"",onChange:b=>x({...t,dotNumber:b.target.value}),className:"w-full pl-9 p-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}):e.jsx("p",{className:"text-sm font-medium text-gray-800 bg-gray-50 px-3 py-2 rounded-lg border border-gray-200",children:t.dotNumber||"N/A"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm",children:[e.jsxs("h3",{className:"font-bold text-gray-900 border-b border-gray-100 pb-2 mb-4 flex items-center gap-2",children:[e.jsx(ne,{size:18,className:"text-blue-600"})," Contact Info"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Phone"}),a?e.jsx("input",{type:"text",value:t.phone||"",onChange:b=>x({...t,phone:b.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"}):e.jsx("p",{className:"text-sm font-medium text-gray-800",children:t.phone||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Email"}),a?e.jsx("input",{type:"email",value:t.email||"",onChange:b=>x({...t,email:b.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"}):e.jsx("p",{className:"text-sm font-medium text-gray-800",children:t.email||"N/A"})]})]})]}),e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm",children:[e.jsxs("h3",{className:"font-bold text-gray-900 border-b border-gray-100 pb-2 mb-4 flex items-center gap-2",children:[e.jsx(xe,{size:18,className:"text-blue-600"})," HQ Address"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Street"}),a?e.jsx("input",{type:"text",value:t.street||"",onChange:b=>x({...t,street:b.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"}):e.jsx("p",{className:"text-sm font-medium text-gray-800",children:t.street||"N/A"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"City"}),a?e.jsx("input",{type:"text",value:t.city||"",onChange:b=>x({...t,city:b.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"}):e.jsx("p",{className:"text-sm font-medium text-gray-800",children:t.city||"N/A"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"State"}),a?e.jsx("input",{type:"text",value:t.state||"",onChange:b=>x({...t,state:b.target.value}),maxLength:2,className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"}):e.jsx("p",{className:"text-sm font-medium text-gray-800",children:t.state||"XX"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Zip"}),a?e.jsx("input",{type:"text",value:t.zip||"",onChange:b=>x({...t,zip:b.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"}):e.jsx("p",{className:"text-sm font-medium text-gray-800",children:t.zip||"00000"})]})]})]})]})]})]}),n==="questions"&&e.jsxs("div",{className:"space-y-8 animate-in slide-in-from-bottom-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Standard DOT Questions"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Configure visibility and requirements for standard application fields."})]}),d?e.jsx(Ss,{config:t.applicationConfig,onChange:b=>x({...t,applicationConfig:b})}):e.jsx("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg text-center text-gray-500",children:e.jsx("p",{children:"Read-only view for standard questions."})})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(ge,{size:20,className:"text-blue-600"})," Custom Questions"]}),e.jsx("p",{className:"text-sm text-gray-500",children:'Add specific questions for your company (e.g. "Do you have flatbed experience?").'})]}),d?e.jsx(Cs,{questions:t.customQuestions||[],onChange:b=>x({...t,customQuestions:b}),onSave:p,loading:f}):e.jsx("div",{className:"p-6 bg-gray-50 border border-gray-200 rounded-xl text-center text-gray-500",children:e.jsx("p",{children:"Only Company Admins can edit application questions."})})]})]}),n==="hiring"&&e.jsxs("div",{className:"animate-in slide-in-from-bottom-2",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(R,{size:20,className:"text-blue-600"})," Hiring Positions & Offers"]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Configure pay structures, benefits, and logistics for your open positions."})]}),d?e.jsx(Ds,{data:t.hiringPositions,onChange:b=>x({...t,hiringPositions:b}),isCompanyAdmin:!0}):e.jsx("div",{className:"p-6 bg-gray-50 border border-gray-200 rounded-xl text-center text-gray-500",children:e.jsx("p",{children:"Only Company Admins can configure hiring positions."})})]})]})}function Us({currentCompanyProfile:s,isCompanyAdmin:o,onShowManageTeam:g}){const{showSuccess:m,showError:n}=_(),[c,t]=y.useState({fullName:"",email:"",password:"",role:"hr_user"}),[x,f]=y.useState(!1),[l,u]=y.useState(!1),i=`${window.location.origin}/join/${s?.id}`,a=async()=>{try{await navigator.clipboard.writeText(i),u(!0),m("Invite link copied to clipboard!"),setTimeout(()=>u(!1),3e3)}catch{n("Failed to copy link")}},r=async d=>{d.preventDefault(),f(!0);try{await ie(ce,"createPortalUser")({fullName:c.fullName,email:c.email,password:c.password,companyId:s.id,role:c.role}),m(`User ${c.fullName} created successfully!`),t({fullName:"",email:"",password:"",role:"hr_user"})}catch(p){console.error(p),n("Failed to create user: "+p.message)}finally{f(!1)}};return o?e.jsxs("div",{className:"space-y-8 max-w-3xl animate-in fade-in",children:[e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Team Management"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Add new recruiters or admins to your company dashboard."})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-bold text-blue-900 mb-2 flex items-center gap-2",children:[e.jsx(Q,{size:20})," Team Invite Link"]}),e.jsx("p",{className:"text-sm text-blue-700 mb-4",children:"Share this link with new team members. They can create their own account and join your company."}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",readOnly:!0,value:i,className:"flex-1 p-3 bg-white border border-blue-300 rounded-lg text-sm text-gray-700 font-mono"}),e.jsxs("button",{onClick:a,className:`px-4 py-3 font-bold rounded-lg flex items-center gap-2 transition-all ${l?"bg-green-600 text-white":"bg-blue-600 text-white hover:bg-blue-700"}`,children:[l?e.jsx(B,{size:18}):e.jsx(be,{size:18}),l?"Copied!":"Copy"]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Me,{size:20})," Add New User"]}),e.jsxs("form",{onSubmit:r,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Full Name"}),e.jsx("input",{required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",value:c.fullName,onChange:d=>t({...c,fullName:d.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Email"}),e.jsx("input",{required:!0,type:"email",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",value:c.email,onChange:d=>t({...c,email:d.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Password"}),e.jsx("input",{required:!0,type:"password",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",value:c.password,onChange:d=>t({...c,password:d.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Role"}),e.jsxs("select",{className:"w-full p-3 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 outline-none",value:c.role,onChange:d=>t({...c,role:d.target.value}),children:[e.jsx("option",{value:"hr_user",children:"Recruiter (Standard)"}),e.jsx("option",{value:"company_admin",children:"Company Admin (Full Access)"})]})]})]}),e.jsx("div",{className:"pt-2 flex justify-end",children:e.jsxs("button",{type:"submit",disabled:x,className:"px-6 py-2.5 bg-green-600 text-white font-bold rounded-lg hover:bg-green-700 flex items-center gap-2 disabled:opacity-50",children:[x?e.jsx(E,{className:"animate-spin"}):e.jsx(Y,{size:18})," Create User"]})})]})]}),e.jsx("div",{className:"text-center pt-4",children:e.jsx("button",{onClick:g,className:"text-blue-600 hover:underline text-sm font-semibold",children:"View All Team Members & Goals"})})]}):e.jsx("div",{className:"p-10 text-center text-gray-500",children:"Access Denied. Only Admins can manage the team."})}function $s({currentCompanyProfile:s}){const{showSuccess:o,showError:g}=_(),[m,n]=y.useState({provider:"gmail",email:"",appPassword:"",signature:"",templates:{no_answer:{enabled:!1,subject:"",body:""}}}),[c,t]=y.useState(!1);y.useEffect(()=>{s?.emailSettings&&n(l=>({...l,...s.emailSettings,templates:{...l.templates,...s.emailSettings.templates||{}}}))},[s]);const x=async()=>{t(!0);try{const l=M(S,"companies",s.id);await G(l,{emailSettings:m}),o("Email settings updated successfully.")}catch(l){console.error("Error saving email settings:",l),g("Failed to save email settings.")}finally{t(!1)}},f=(l,u,i)=>{n(a=>({...a,templates:{...a.templates,[l]:{...a.templates[l],[u]:i}}}))};return e.jsxs("div",{className:"space-y-8 max-w-3xl animate-in fade-in",children:[e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Email Integration"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Configure your email to send messages directly from the dashboard."})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-100 p-4 rounded-lg flex gap-3 items-start mb-6",children:[e.jsx(ze,{className:"text-blue-600 shrink-0 mt-1",size:20}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-bold",children:"For Gmail Users:"}),e.jsxs("p",{children:["You must use an ",e.jsx("strong",{children:"App Password"}),". Go to Google Account > Security > 2-Step Verification > App Passwords to generate one."]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm space-y-4",children:[e.jsx("h3",{className:"font-bold text-gray-800 border-b pb-2 mb-4",children:"SMTP Credentials"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),e.jsx("input",{type:"email",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",value:m.email||"",onChange:l=>n({...m,email:l.target.value}),placeholder:"recruiting@company.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"App Password (SMTP)"}),e.jsx("input",{type:"password",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",value:m.appPassword||"",onChange:l=>n({...m,appPassword:l.target.value}),placeholder:"xxxx xxxx xxxx xxxx"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Signature"}),e.jsx("textarea",{className:"w-full p-3 border border-gray-300 rounded-lg h-24 focus:ring-2 focus:ring-blue-500 outline-none",value:m.signature||"",onChange:l=>n({...m,signature:l.target.value}),placeholder:`Best regards,
Recruiting Team`})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm space-y-4",children:[e.jsxs("h3",{className:"font-bold text-gray-800 border-b pb-2 mb-4 flex items-center gap-2",children:[e.jsx(Ee,{size:20,className:"text-yellow-500",fill:"currentColor"})," Automated Templates"]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ae,{size:18,className:"text-gray-600"}),e.jsx("span",{className:"font-semibold text-gray-800",children:'Trigger: "No Answer" or "Voicemail"'})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:m.templates?.no_answer?.enabled||!1,onChange:l=>f("no_answer","enabled",l.target.checked)}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-900",children:"Enable"})]})]}),m.templates?.no_answer?.enabled&&e.jsxs("div",{className:"space-y-3 animate-in fade-in",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Subject Line"}),e.jsx("input",{className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Sorry we missed you!",value:m.templates?.no_answer?.subject||"",onChange:l=>f("no_answer","subject",l.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Email Body"}),e.jsx("textarea",{className:"w-full p-2 border border-gray-300 rounded h-32 focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Hi {driverfirstname}, I tried calling you...",value:m.templates?.no_answer?.body||"",onChange:l=>f("no_answer","body",l.target.value)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Available placeholders: ",e.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"{driverfullname}"}),", ",e.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"{driverfirstname}"}),", ",e.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"{recruitername}"})]})]})]})]})]}),e.jsx("div",{className:"pt-4 flex justify-end",children:e.jsxs("button",{onClick:x,disabled:c,className:"px-6 py-3 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 flex items-center gap-2 disabled:opacity-50 shadow-md",children:[c?e.jsx(E,{className:"animate-spin"}):e.jsx(I,{size:18})," Save Settings"]})})]})}function Ps({currentUser:s,currentCompanyProfile:o}){const{showSuccess:g,showError:m}=_(),[n,c]=y.useState({name:""}),[t,x]=y.useState(null),[f,l]=y.useState(!1),[u,i]=y.useState(!0),[a,r]=y.useState(!1),d=window.location.origin;y.useEffect(()=>{(async()=>{if(s?.uid)try{const h=M(S,"users",s.uid),v=await P(h);if(v.exists()){const w=v.data();c({name:w.name||""}),w.recruitingCode?(x(w.recruitingCode),i(!1)):await p(s.uid)}}catch(h){console.error("Error fetching profile:",h),i(!1)}})()},[s]);const p=async C=>{i(!0);try{const h=Math.random().toString(36).substring(2,8).toUpperCase();await oe(M(S,"recruiter_links",h),{userId:C,companyId:o.id,createdAt:new Date}),await G(M(S,"users",C),{recruitingCode:h}),x(h)}catch(h){console.error("Error generating link:",h),m("Could not generate tracking link.")}finally{i(!1)}},j=async()=>{l(!0);try{const C=M(S,"users",s.uid);await G(C,{name:n.name}),g("Personal profile updated successfully.")}catch(C){console.error("User save failed",C),m("Failed to update profile.")}finally{l(!1)}},b=o?.appSlug||"general",A=d.replace(/\/$/,""),k=t?`${A}/apply/${b}?r=${t}`:`${A}/apply/${b}?recruiter=${s?.uid}`,U=()=>{k&&(navigator.clipboard.writeText(k),r(!0),g("Short link copied!"),setTimeout(()=>r(!1),2e3))};return e.jsxs("div",{className:"space-y-8 max-w-4xl animate-in fade-in",children:[e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Personal Profile"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Update your personal details and access your recruiting tools."})]}),e.jsx("div",{className:"border rounded-xl p-6 shadow-sm bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-100",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 rounded-lg shadow-sm bg-white text-blue-600",children:e.jsx(Q,{size:24})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold mb-1 text-blue-900",children:"Your Short Recruiting Link"}),e.jsxs("p",{className:"text-sm text-blue-700 mb-4",children:["Share this link. Drivers who apply will be ",e.jsx("strong",{children:"automatically assigned to you"}),"."]}),u?e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(E,{className:"animate-spin",size:16})," Generating unique code..."]}):e.jsxs("div",{className:"flex items-center gap-2 bg-white p-2 rounded-lg border border-blue-200",children:[e.jsx("code",{className:"flex-1 text-xs sm:text-sm font-mono text-gray-600 truncate px-2",children:k}),e.jsxs("button",{onClick:U,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold rounded-md transition-all flex items-center gap-2",children:[a?e.jsx(B,{size:16}):e.jsx(be,{size:16}),a?"Copied":"Copy"]})]})]})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-8 space-y-6 shadow-sm",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Full Name"}),e.jsx("input",{type:"text",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",value:n.name,onChange:C=>c({...n,name:C.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"text",className:"w-full p-3 border border-gray-200 rounded-lg bg-gray-50 text-gray-500 cursor-not-allowed",value:s?.email||"",readOnly:!0}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Email cannot be changed directly."})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs("button",{onClick:j,disabled:f,className:"flex items-center gap-2 px-6 py-2.5 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 disabled:opacity-50 shadow-md transition-all",children:[f?e.jsx(E,{className:"animate-spin"}):e.jsx(I,{size:18})," Update Profile"]})})]})]})}function Rs(){return e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-4",children:[e.jsxs("div",{className:"relative mb-8",children:[e.jsx("div",{className:"absolute inset-0 bg-yellow-200 rounded-full blur-xl opacity-50 animate-pulse"}),e.jsx("div",{className:"relative bg-yellow-100 p-6 rounded-full border-4 border-yellow-300",children:e.jsx(Xe,{size:64,className:"text-yellow-600"})})]}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-3",children:"Under Development"}),e.jsx("p",{className:"text-gray-500 text-center max-w-md mb-6",children:"We're working hard to bring you this feature. Check back soon!"}),e.jsxs("div",{className:"flex items-center gap-4 text-gray-400",children:[e.jsx("div",{className:"flex items-center gap-1 animate-bounce",style:{animationDelay:"0ms"},children:e.jsx(ee,{size:20})}),e.jsx("div",{className:"flex items-center gap-1 animate-bounce",style:{animationDelay:"150ms"},children:e.jsx(as,{size:20})}),e.jsx("div",{className:"flex items-center gap-1 animate-bounce",style:{animationDelay:"300ms"},children:e.jsx(ee,{size:20})})]})]})}function Is(){return e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-4",children:[e.jsxs("div",{className:"relative mb-8",children:[e.jsx("div",{className:"absolute inset-0 bg-blue-200 rounded-full blur-xl opacity-50 animate-pulse"}),e.jsx("div",{className:"relative bg-blue-100 p-6 rounded-full border-4 border-blue-300",children:e.jsx(he,{size:64,className:"text-blue-600"})})]}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-3",children:"E-Signature Coming Soon"}),e.jsx("p",{className:"text-gray-500 text-center max-w-md mb-8",children:"Digital document signing is on the way. You'll be able to send, sign, and manage documents securely."}),e.jsxs("div",{className:"grid grid-cols-3 gap-6 text-center",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx(Ge,{size:24,className:"text-green-600"})}),e.jsx("span",{className:"text-sm text-gray-600",children:"Easy Signing"})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:e.jsx(Pe,{size:24,className:"text-purple-600"})}),e.jsx("span",{className:"text-sm text-gray-600",children:"Secure"})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"p-3 bg-orange-100 rounded-full",children:e.jsx(F,{size:24,className:"text-orange-600"})}),e.jsx("span",{className:"text-sm text-gray-600",children:"Track Status"})]})]})]})}const L=({id:s,label:o,icon:g,activeTab:m,onClick:n})=>e.jsxs("button",{onClick:()=>n(s),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 text-left ${m===s?"bg-blue-50 text-blue-700 border-l-4 border-blue-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[e.jsx(g,{size:18,className:m===s?"text-blue-600":"text-gray-400"}),o]}),Os=({title:s,subtitle:o})=>e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:s}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:o})]});function Zs(){const{currentCompanyProfile:s,currentUser:o,currentUserClaims:g}=ue(),[m,n]=y.useState("company"),[c,t]=y.useState(""),[x,f]=y.useState(!1),l=Le(),u=g?.roles?.[s?.id]==="company_admin"||g?.roles?.globalRole==="super_admin",i=r=>{t(r),setTimeout(()=>t(""),3e3)},a=()=>{switch(m){case"company":return e.jsx(_s,{currentCompanyProfile:s,onShowSuccess:i});case"team":return e.jsx(Us,{currentCompanyProfile:s,isCompanyAdmin:u,onShowSuccess:i,onShowManageTeam:()=>f(!0)});case"personal":return e.jsx(Ps,{currentUser:o,currentCompanyProfile:s,onShowSuccess:i});case"email":return e.jsx($s,{currentCompanyProfile:s,onShowSuccess:i});case"integrations":return e.jsx(Rs,{});case"eforms":return e.jsx(Is,{});case"billing":return e.jsxs("div",{className:"space-y-8 max-w-4xl animate-in fade-in",children:[e.jsx(Os,{title:"Billing & Plan",subtitle:"Manage your subscription."}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-10 text-center text-gray-500",children:[e.jsx(K,{size:48,className:"mx-auto mb-4 opacity-20"}),e.jsxs("p",{children:["Current Plan: ",e.jsx("strong",{children:s?.planType==="paid"?"Pro Plan":"Free Plan"})]}),e.jsx("p",{className:"text-sm mt-2",children:"To upgrade or cancel, please contact support."})]})]});default:return e.jsx("div",{className:"p-10 text-center text-gray-500",children:"Select a tab to view settings."})}};return s?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"h-16 bg-white border-b border-gray-200 mb-8 flex items-center px-8 sticky top-0 z-10",children:e.jsxs("button",{onClick:()=>l("/company/dashboard"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors font-medium",children:[e.jsx(Oe,{size:20})," Back to Dashboard"]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-20",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[e.jsx("aside",{className:"w-full md:w-64 flex-shrink-0",children:e.jsxs("div",{className:"sticky top-24 space-y-1",children:[e.jsx("h3",{className:"px-4 text-xs font-bold text-gray-400 uppercase tracking-wider mb-2",children:"General"}),e.jsx(L,{id:"company",label:"Company Profile",icon:ye,activeTab:m,onClick:n}),e.jsx(L,{id:"team",label:"Team & Users",icon:H,activeTab:m,onClick:n}),e.jsx("h3",{className:"px-4 text-xs font-bold text-gray-400 uppercase tracking-wider mt-6 mb-2",children:"Communication"}),e.jsx(L,{id:"email",label:"Email Settings",icon:De,activeTab:m,onClick:n}),e.jsx("h3",{className:"px-4 text-xs font-bold text-gray-400 uppercase tracking-wider mt-6 mb-2",children:"Modules"}),e.jsx(L,{id:"integrations",label:"Integrations",icon:Fe,activeTab:m,onClick:n}),e.jsx(L,{id:"eforms",label:"E-Signature Docs",icon:he,activeTab:m,onClick:n}),e.jsx("h3",{className:"px-4 text-xs font-bold text-gray-400 uppercase tracking-wider mt-6 mb-2",children:"Account"}),e.jsx(L,{id:"billing",label:"Billing & Plan",icon:K,activeTab:m,onClick:n}),e.jsx(L,{id:"personal",label:"Personal Profile",icon:_e,activeTab:m,onClick:n})]})}),e.jsxs("main",{className:"flex-1 min-h-[600px] relative",children:[c&&e.jsxs("div",{className:"fixed bottom-8 right-8 bg-green-600 text-white px-6 py-3 rounded-lg shadow-xl flex items-center gap-3 animate-in slide-in-from-bottom-5 z-50",children:[e.jsx(B,{size:20})," ",c]}),a()]})]})}),x&&e.jsx(vs,{companyId:s.id,onClose:()=>f(!1)})]}):null}export{Zs as CompanySettings};
