import{C as Q,H as Tn,I as Sn,q as lo,w as io,f as ao,a as Jt,aa as co,g as uo,d as mo,R as B,D as f,U as Qt,L as en,E as fo,ab as Cn,S as ho,ac as go,ad as po,a1 as xo}from"./index-Eut2KIY5.js";import{u as vo,F as Io}from"./useBulkImport-DleduGt8.js";import{f as bo}from"./index-DjK99qPH.js";import"./pdfjs-CN6VhWT3.js";const wo=[{id:"new",label:"New Application",value:"New Application"},{id:"contacted",label:"Contacted",value:"Contacted"},{id:"interview",label:"Interview Scheduled",value:"Interview Scheduled"},{id:"offer",label:"Offer Sent",value:"Offer Sent"},{id:"hired",label:"Hired",value:"Hired"},{id:"rejected",label:"Rejected",value:"Rejected"},{id:"withdrawn",label:"Withdrawn",value:"Withdrawn"},{id:"inactive",label:"Inactive (30d+)",value:"Inactive"}],To={ZERO_RESULTS:"No drivers match these filters. Try removing the 'Date' or 'Recruiter' filter to see more results.",MISSING_AUTH:"Verifying your security credentials...",MISSING_COMPANY:"Selecting your company profile...",LOADING:"Scanning the network for active matches..."};function So(e,t,n){const[o,r]=Q.useState(0),[s,i]=Q.useState(!1),[l,a]=Q.useState(null),u=Q.useRef(null);return Q.useEffect(()=>{if(!n||!e)return;const h=async()=>{i(!0),a(null);try{const v=Tn(Sn,"getFilterCount"),p={...t,excludeRecentDays:t.excludeRecentDays?7:null,campaignLimit:t.campaignLimit?parseInt(t.campaignLimit):null};let S=(await v({companyId:e,filters:p})).data.count||0;p.campaignLimit&&(S=Math.min(S,p.campaignLimit)),r(S),S===0&&a(To.ZERO_RESULTS)}catch(v){console.error("Targeting Error:",v),r(0),a("Failed to calculate audience.")}finally{i(!1)}};return u.current&&clearTimeout(u.current),u.current=setTimeout(h,500),()=>clearTimeout(u.current)},[t.leadType,t.status?.join(","),t.recruiterId,t.createdAfter,t.notContactedSince,t.lastCallOutcome,t.segmentId,t.excludeRecentDays,t.campaignLimit,e,n]),{matchCount:o,isLoading:s,error:l}}function Co(e){const[t,n]=Q.useState([]),[o,r]=Q.useState(!0),[s,i]=Q.useState(null);return Q.useEffect(()=>{if(!e){r(!1);return}const l=lo(ao(Jt,"memberships"),io("companyId","==",e)),a=co(l,async u=>{try{const h=u.docs.map(async p=>{const I=p.data(),S=I.userId;let R={name:"Unknown",email:""};try{const x=await uo(mo(Jt,"users",S));if(x.exists()){const d=x.data();R={name:d.fullName||d.displayName||(d.firstName&&d.lastName?`${d.firstName} ${d.lastName}`:d.email||"Unknown User"),email:d.email}}}catch(x){console.warn(`Error fetching user profile for ${S}:`,x)}return{id:S,role:I.role,...R}}),v=await Promise.all(h);n(v),r(!1)}catch(h){console.error("Error processing team members:",h),i(h.message),r(!1)}});return()=>a()},[e]),{team:t,isLoading:o,error:s}}const vt=0,De=1,Ye=2,yn=4;function tn(e){return()=>e}function yo(e){e()}function Rn(e,t){return n=>e(t(n))}function nn(e,t){return()=>e(t)}function Ro(e,t){return n=>e(t,n)}function Ot(e){return e!==void 0}function zo(...e){return()=>{e.map(yo)}}function Xe(){}function It(e,t){return t(e),e}function jo(e,t){return t(e)}function te(...e){return e}function q(e,t){return e(De,t)}function P(e,t){e(vt,t)}function Lt(e){e(Ye)}function re(e){return e(yn)}function N(e,t){return q(e,Ro(t,vt))}function je(e,t){const n=e(De,o=>{n(),t(o)});return n}function on(e){let t,n;return o=>r=>{t=r,n&&clearTimeout(n),n=setTimeout(()=>{o(t)},e)}}function zn(e,t){return e===t}function ee(e=zn){let t;return n=>o=>{e(t,o)||(t=o,n(o))}}function M(e){return t=>n=>{e(n)&&t(n)}}function H(e){return t=>Rn(t,e)}function ke(e){return t=>()=>{t(e)}}function b(e,...t){const n=Ho(...t);return((o,r)=>{switch(o){case Ye:Lt(e);return;case De:return q(e,n(r))}})}function Be(e,t){return n=>o=>{n(t=e(t,o))}}function Ge(e){return t=>n=>{e>0?e--:t(n)}}function Oe(e){let t=null,n;return o=>r=>{t=r,!n&&(n=setTimeout(()=>{n=void 0,o(t)},e))}}function V(...e){const t=new Array(e.length);let n=0,o=null;const r=Math.pow(2,e.length)-1;return e.forEach((s,i)=>{const l=Math.pow(2,i);q(s,a=>{const u=n;n=n|l,t[i]=a,u!==r&&n===r&&o&&(o(),o=null)})}),s=>i=>{const l=()=>{s([i].concat(t))};n===r?l():o=l}}function Ho(...e){return t=>e.reduceRight(jo,t)}function Eo(e){let t,n;const o=()=>t?.();return function(r,s){switch(r){case De:return s?n===s?void 0:(o(),n=s,t=q(e,s),t):(o(),Xe);case Ye:o(),n=null;return}}}function T(e){let t=e;const n=U();return((o,r)=>{switch(o){case vt:t=r;break;case De:{r(t);break}case yn:return t}return n(o,r)})}function he(e,t){return It(T(t),n=>N(e,n))}function U(){const e=[];return((t,n)=>{switch(t){case vt:e.slice().forEach(o=>{o(n)});return;case Ye:e.splice(0,e.length);return;case De:return e.push(n),()=>{const o=e.indexOf(n);o>-1&&e.splice(o,1)}}})}function Te(e){return It(U(),t=>N(e,t))}function _(e,t=[],{singleton:n}={singleton:!0}){return{constructor:e,dependencies:t,id:ko(),singleton:n}}const ko=()=>Symbol();function Bo(e){const t=new Map,n=({constructor:o,dependencies:r,id:s,singleton:i})=>{if(i&&t.has(s))return t.get(s);const l=o(r.map(a=>n(a)));return i&&t.set(s,l),l};return n(e)}function ie(...e){const t=U(),n=new Array(e.length);let o=0;const r=Math.pow(2,e.length)-1;return e.forEach((s,i)=>{const l=Math.pow(2,i);q(s,a=>{n[i]=a,o=o|l,o===r&&P(t,n)})}),function(s,i){switch(s){case Ye:{Lt(t);return}case De:return o===r&&i(n),q(t,i)}}}function F(e,t=zn){return b(e,ee(t))}function jt(...e){return function(t,n){switch(t){case Ye:return;case De:return zo(...e.map(o=>q(o,n)))}}}var pe=(e=>(e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR",e))(pe||{});const No={0:"debug",3:"error",1:"log",2:"warn"},Oo=()=>typeof globalThis>"u"?window:globalThis,We=_(()=>{const e=T(3);return{log:T((t,n,o=1)=>{var r;const s=(r=Oo().VIRTUOSO_LOG_LEVEL)!=null?r:re(e);o>=s&&console[No[o]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",t,n)}),logLevel:e}},[],{singleton:!0});function Ue(e,t,n){return Ft(e,t,n).callbackRef}function Ft(e,t,n){const o=B.useRef(null);let r=i=>{};const s=B.useMemo(()=>typeof ResizeObserver<"u"?new ResizeObserver(i=>{const l=()=>{const a=i[0].target;a.offsetParent!==null&&e(a)};n?l():requestAnimationFrame(l)}):null,[e,n]);return r=i=>{i&&t?(s?.observe(i),o.current=i):(o.current&&s?.unobserve(o.current),o.current=null)},{callbackRef:r,ref:o}}function Lo(e,t,n,o,r,s,i,l,a){const u=B.useCallback(h=>{const v=Fo(h.children,t,l?"offsetWidth":"offsetHeight",r);let p=h.parentElement;for(;!p.dataset.virtuosoScroller;)p=p.parentElement;const I=p.lastElementChild.dataset.viewportType==="window";let S;I&&(S=p.ownerDocument.defaultView);const R=i?l?i.scrollLeft:i.scrollTop:I?l?S.scrollX||S.document.documentElement.scrollLeft:S.scrollY||S.document.documentElement.scrollTop:l?p.scrollLeft:p.scrollTop,x=i?l?i.scrollWidth:i.scrollHeight:I?l?S.document.documentElement.scrollWidth:S.document.documentElement.scrollHeight:l?p.scrollWidth:p.scrollHeight,d=i?l?i.offsetWidth:i.offsetHeight:I?l?S.innerWidth:S.innerHeight:l?p.offsetWidth:p.offsetHeight;o({scrollHeight:x,scrollTop:Math.max(R,0),viewportHeight:d}),s?.(l?rn("column-gap",getComputedStyle(h).columnGap,r):rn("row-gap",getComputedStyle(h).rowGap,r)),v!==null&&e(v)},[e,t,r,s,i,o,l]);return Ft(u,n,a)}function Fo(e,t,n,o){const r=e.length;if(r===0)return null;const s=[];for(let i=0;i<r;i++){const l=e.item(i);if(l.dataset.index===void 0)continue;const a=parseInt(l.dataset.index),u=parseFloat(l.dataset.knownSize),h=t(l,n);if(h===0&&o("Zero-sized element, this should not happen",{child:l},pe.ERROR),h===u)continue;const v=s[s.length-1];s.length===0||v.size!==h||v.endIndex!==a-1?s.push({endIndex:a,size:h,startIndex:a}):s[s.length-1].endIndex++}return s}function rn(e,t,n){return t!=="normal"&&!(t!=null&&t.endsWith("px"))&&n(`${e} was not resolved to pixel value correctly`,t,pe.WARN),t==="normal"?0:parseInt(t??"0",10)}function jn(e,t,n){const o=B.useRef(null),r=B.useCallback(a=>{if(!(a!=null&&a.offsetParent))return;const u=a.getBoundingClientRect(),h=u.width;let v,p;if(t){const I=t.getBoundingClientRect(),S=u.top-I.top;p=I.height-Math.max(0,S),v=S+t.scrollTop}else{const I=i.current.ownerDocument.defaultView;p=I.innerHeight-Math.max(0,u.top),v=u.top+I.scrollY}o.current={offsetTop:v,visibleHeight:p,visibleWidth:h},e(o.current)},[e,t]),{callbackRef:s,ref:i}=Ft(r,!0,n),l=B.useCallback(()=>{r(i.current)},[r,i]);return B.useEffect(()=>{var a;if(t){t.addEventListener("scroll",l);const u=new ResizeObserver(()=>{requestAnimationFrame(l)});return u.observe(t),()=>{t.removeEventListener("scroll",l),u.unobserve(t)}}else{const u=(a=i.current)==null?void 0:a.ownerDocument.defaultView;return u?.addEventListener("scroll",l),u?.addEventListener("resize",l),()=>{u?.removeEventListener("scroll",l),u?.removeEventListener("resize",l)}}},[l,t,i]),s}const ge=_(()=>{const e=U(),t=U(),n=T(0),o=U(),r=T(0),s=U(),i=U(),l=T(0),a=T(0),u=T(0),h=T(0),v=U(),p=U(),I=T(!1),S=T(!1),R=T(!1);return N(b(e,H(({scrollTop:x})=>x)),t),N(b(e,H(({scrollHeight:x})=>x)),i),N(t,r),{deviation:n,fixedFooterHeight:u,fixedHeaderHeight:a,footerHeight:h,headerHeight:l,horizontalDirection:S,scrollBy:p,scrollContainerState:e,scrollHeight:i,scrollingInProgress:I,scrollTo:v,scrollTop:t,skipAnimationFrameInResizeObserver:R,smoothScrollTargetReached:o,statefulScrollTop:r,viewportHeight:s}},[],{singleton:!0}),tt={lvl:0};function Hn(e,t){const n=e.length;if(n===0)return[];let{index:o,value:r}=t(e[0]);const s=[];for(let i=1;i<n;i++){const{index:l,value:a}=t(e[i]);s.push({end:l-1,start:o,value:r}),o=l,r=a}return s.push({end:1/0,start:o,value:r}),s}function Y(e){return e===tt}function nt(e,t){if(!Y(e))return t===e.k?e.v:t<e.k?nt(e.l,t):nt(e.r,t)}function He(e,t,n="k"){if(Y(e))return[-1/0,void 0];if(Number(e[n])===t)return[e.k,e.v];if(Number(e[n])<t){const o=He(e.r,t,n);return o[0]===-1/0?[e.k,e.v]:o}return He(e.l,t,n)}function we(e,t,n){return Y(e)?Bn(t,n,1):t===e.k?ce(e,{k:t,v:n}):t<e.k?sn(ce(e,{l:we(e.l,t,n)})):sn(ce(e,{r:we(e.r,t,n)}))}function Ke(){return tt}function Ze(e,t,n){if(Y(e))return[];const o=He(e,t)[0];return Mo(Et(e,o,n))}function Ht(e,t){if(Y(e))return tt;const{k:n,l:o,r}=e;if(t===n){if(Y(o))return r;if(Y(r))return o;{const[s,i]=kn(o);return ht(ce(e,{k:s,l:En(o),v:i}))}}else return t<n?ht(ce(e,{l:Ht(o,t)})):ht(ce(e,{r:Ht(r,t)}))}function Ve(e){return Y(e)?[]:[...Ve(e.l),{k:e.k,v:e.v},...Ve(e.r)]}function Et(e,t,n){if(Y(e))return[];const{k:o,l:r,r:s,v:i}=e;let l=[];return o>t&&(l=l.concat(Et(r,t,n))),o>=t&&o<=n&&l.push({k:o,v:i}),o<=n&&(l=l.concat(Et(s,t,n))),l}function ht(e){const{l:t,lvl:n,r:o}=e;if(o.lvl>=n-1&&t.lvl>=n-1)return e;if(n>o.lvl+1){if(St(t))return Nn(ce(e,{lvl:n-1}));if(!Y(t)&&!Y(t.r))return ce(t.r,{l:ce(t,{r:t.r.l}),lvl:n,r:ce(e,{l:t.r.r,lvl:n-1})});throw new Error("Unexpected empty nodes")}else{if(St(e))return kt(ce(e,{lvl:n-1}));if(!Y(o)&&!Y(o.l)){const r=o.l,s=St(r)?o.lvl-1:o.lvl;return ce(r,{l:ce(e,{lvl:n-1,r:r.l}),lvl:r.lvl+1,r:kt(ce(o,{l:r.r,lvl:s}))})}else throw new Error("Unexpected empty nodes")}}function ce(e,t){return Bn(t.k!==void 0?t.k:e.k,t.v!==void 0?t.v:e.v,t.lvl!==void 0?t.lvl:e.lvl,t.l!==void 0?t.l:e.l,t.r!==void 0?t.r:e.r)}function En(e){return Y(e.r)?e.l:ht(ce(e,{r:En(e.r)}))}function St(e){return Y(e)||e.lvl>e.r.lvl}function kn(e){return Y(e.r)?[e.k,e.v]:kn(e.r)}function Bn(e,t,n,o=tt,r=tt){return{k:e,l:o,lvl:n,r,v:t}}function sn(e){return kt(Nn(e))}function Nn(e){const{l:t}=e;return!Y(t)&&t.lvl===e.lvl?ce(t,{r:ce(e,{l:t.r})}):e}function kt(e){const{lvl:t,r:n}=e;return!Y(n)&&!Y(n.r)&&n.lvl===t&&n.r.lvl===t?ce(n,{l:ce(e,{r:n.l}),lvl:t+1}):e}function Mo(e){return Hn(e,({k:t,v:n})=>({index:t,value:n}))}function On(e,t){return!!(e&&e.startIndex===t.startIndex&&e.endIndex===t.endIndex)}function ot(e,t){return!!(e&&e[0]===t[0]&&e[1]===t[1])}const Mt=_(()=>({recalcInProgress:T(!1)}),[],{singleton:!0});function Ln(e,t,n){return e[pt(e,t,n)]}function pt(e,t,n,o=0){let r=e.length-1;for(;o<=r;){const s=Math.floor((o+r)/2),i=e[s],l=n(i,t);if(l===0)return s;if(l===-1){if(r-o<2)return s-1;r=s-1}else{if(r===o)return s;o=s+1}}throw new Error(`Failed binary finding record in array - ${e.join(",")}, searched for ${t}`)}function Do(e,t,n,o){const r=pt(e,t,o),s=pt(e,n,o,r);return e.slice(r,s+1)}function Me(e,t){return Math.round(e.getBoundingClientRect()[t])}function bt(e){return!Y(e.groupOffsetTree)}function Dt({index:e},t){return t===e?0:t<e?-1:1}function Wo(){return{groupIndices:[],groupOffsetTree:Ke(),lastIndex:0,lastOffset:0,lastSize:0,offsetTree:[],sizeTree:Ke()}}function Ao(e,t){let n=Y(e)?0:1/0;for(const o of t){const{endIndex:r,size:s,startIndex:i}=o;if(n=Math.min(n,i),Y(e)){e=we(e,0,s);continue}const l=Ze(e,i-1,r+1);if(l.some(qo(o)))continue;let a=!1,u=!1;for(const{end:h,start:v,value:p}of l)a?(r>=v||s===p)&&(e=Ht(e,v)):(u=p!==s,a=!0),h>r&&r>=v&&p!==s&&(e=we(e,r+1,p));u&&(e=we(e,i,s))}return[e,n]}function Po(e){return typeof e.groupIndex<"u"}function Vo({offset:e},t){return t===e?0:t<e?-1:1}function rt(e,t,n){if(t.length===0)return 0;const{index:o,offset:r,size:s}=Ln(t,e,Dt),i=e-o,l=s*i+(i-1)*n+r;return l>0?l+n:l}function Fn(e,t){if(!bt(t))return e;let n=0;for(;t.groupIndices[n]<=e+n;)n++;return e+n}function Mn(e,t,n){if(Po(e))return t.groupIndices[e.groupIndex]+1;{const o=e.index==="LAST"?n:e.index;let r=Fn(o,t);return r=Math.max(0,r,Math.min(n,r)),r}}function Go(e,t,n,o=0){return o>0&&(t=Math.max(t,Ln(e,o,Dt).offset)),Hn(Do(e,t,n,Vo),$o)}function Uo(e,[t,n,o,r]){t.length>0&&o("received item sizes",t,pe.DEBUG);const s=e.sizeTree;let i=s,l=0;if(n.length>0&&Y(s)&&t.length===2){const p=t[0].size,I=t[1].size;i=n.reduce((S,R)=>we(we(S,R,p),R+1,I),i)}else[i,l]=Ao(i,t);if(i===s)return e;const{lastIndex:a,lastOffset:u,lastSize:h,offsetTree:v}=Bt(e.offsetTree,l,i,r);return{groupIndices:n,groupOffsetTree:n.reduce((p,I)=>we(p,I,rt(I,v,r)),Ke()),lastIndex:a,lastOffset:u,lastSize:h,offsetTree:v,sizeTree:i}}function _o(e){return Ve(e).map(({k:t,v:n},o,r)=>{const s=r[o+1];return{endIndex:s?s.k-1:1/0,size:n,startIndex:t}})}function ln(e,t){let n=0,o=0;for(;n<e;)n+=t[o+1]-t[o]-1,o++;return o-(n===e?0:1)}function Bt(e,t,n,o){let r=e,s=0,i=0,l=0,a=0;if(t!==0){a=pt(r,t-1,Dt),l=r[a].offset;const u=He(n,t-1);s=u[0],i=u[1],r.length&&r[a].size===He(n,t)[1]&&(a-=1),r=r.slice(0,a+1)}else r=[];for(const{start:u,value:h}of Ze(n,t,1/0)){const v=u-s,p=v*i+l+v*o;r.push({index:u,offset:p,size:h}),s=u,l=p,i=h}return{lastIndex:s,lastOffset:l,lastSize:i,offsetTree:r}}function $o(e){return{index:e.index,value:e}}function qo(e){const{endIndex:t,size:n,startIndex:o}=e;return r=>r.start===o&&(r.end===t||r.end===1/0)&&r.value===n}const Ko={offsetHeight:"height",offsetWidth:"width"},Ne=_(([{log:e},{recalcInProgress:t}])=>{const n=U(),o=U(),r=he(o,0),s=U(),i=U(),l=T(0),a=T([]),u=T(void 0),h=T(void 0),v=T(void 0),p=T(void 0),I=T((c,w)=>Me(c,Ko[w])),S=T(void 0),R=T(0),x=Wo(),d=he(b(n,V(a,e,R),Be(Uo,x),ee()),x),m=he(b(a,ee(),Be((c,w)=>({current:w,prev:c.current}),{current:[],prev:[]}),H(({prev:c})=>c)),[]);N(b(a,M(c=>c.length>0),V(d,R),H(([c,w,y])=>{const E=c.reduce((O,W,A)=>we(O,W,rt(W,w.offsetTree,y)||A),Ke());return{...w,groupIndices:c,groupOffsetTree:E}})),d),N(b(o,V(d),M(([c,{lastIndex:w}])=>c<w),H(([c,{lastIndex:w,lastSize:y}])=>[{endIndex:w,size:y,startIndex:c}])),n),N(u,h);const g=he(b(u,H(c=>c===void 0)),!0);N(b(h,M(c=>c!==void 0&&Y(re(d).sizeTree)),H(c=>{const w=re(v),y=re(a).length>0;return w?y?[{endIndex:0,size:w,startIndex:0},{endIndex:1,size:c,startIndex:1}]:[]:[{endIndex:0,size:c,startIndex:0}]})),n),N(b(p,M(c=>c!==void 0&&c.length>0&&Y(re(d).sizeTree)),H(c=>{const w=[];let y=c[0],E=0;for(let O=1;O<c.length;O++){const W=c[O];W!==y&&(w.push({endIndex:O-1,size:y,startIndex:E}),y=W,E=O)}return w.push({endIndex:c.length-1,size:y,startIndex:E}),w})),n),N(b(a,V(v,h),M(([,c,w])=>c!==void 0&&w!==void 0),H(([c,w,y])=>{const E=[];for(let O=0;O<c.length;O++){const W=c[O],A=c[O+1];E.push({startIndex:W,endIndex:W,size:w}),A!==void 0&&E.push({startIndex:W+1,endIndex:A-1,size:y})}return E})),n);const z=Te(b(n,V(d),Be(({sizes:c},[w,y])=>({changed:y!==c,sizes:y}),{changed:!1,sizes:x}),H(c=>c.changed)));q(b(l,Be((c,w)=>({diff:c.prev-w,prev:w}),{diff:0,prev:0}),H(c=>c.diff)),c=>{const{groupIndices:w}=re(d);if(c>0)P(t,!0),P(s,c+ln(c,w));else if(c<0){const y=re(m);y.length>0&&(c-=ln(-c,y)),P(i,c)}}),q(b(l,V(e)),([c,w])=>{c<0&&w("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:l},pe.ERROR)});const C=Te(s);N(b(s,V(d),H(([c,w])=>{const y=w.groupIndices.length>0,E=[],O=w.lastSize;if(y){const W=nt(w.sizeTree,0);let A=0,L=0;for(;A<c;){const K=w.groupIndices[L],X=w.groupIndices.length===L+1?1/0:w.groupIndices[L+1]-K-1;E.push({endIndex:K,size:W,startIndex:K}),E.push({endIndex:K+1+X-1,size:O,startIndex:K+1}),L++,A+=X+1}const G=Ve(w.sizeTree);return A!==c&&G.shift(),G.reduce((K,{k:X,v:xe})=>{let ve=K.ranges;return K.prevSize!==0&&(ve=[...K.ranges,{endIndex:X+c-1,size:K.prevSize,startIndex:K.prevIndex}]),{prevIndex:X+c,prevSize:xe,ranges:ve}},{prevIndex:c,prevSize:0,ranges:E}).ranges}return Ve(w.sizeTree).reduce((W,{k:A,v:L})=>({prevIndex:A+c,prevSize:L,ranges:[...W.ranges,{endIndex:A+c-1,size:W.prevSize,startIndex:W.prevIndex}]}),{prevIndex:0,prevSize:O,ranges:[]}).ranges})),n);const k=Te(b(i,V(d,R),H(([c,{offsetTree:w},y])=>{const E=-c;return rt(E,w,y)})));return N(b(i,V(d,R),H(([c,w,y])=>{if(w.groupIndices.length>0){if(Y(w.sizeTree))return w;let E=Ke();const O=re(m);let W=0,A=0,L=0;for(;W<-c;){L=O[A];const G=O[A+1]-L-1;A++,W+=G+1}if(E=Ve(w.sizeTree).reduce((G,{k:K,v:X})=>we(G,Math.max(0,K+c),X),E),W!==-c){const G=nt(w.sizeTree,L);E=we(E,0,G);const K=He(w.sizeTree,-c+1)[1];E=we(E,1,K)}return{...w,sizeTree:E,...Bt(w.offsetTree,0,E,y)}}else{const E=Ve(w.sizeTree).reduce((O,{k:W,v:A})=>we(O,Math.max(0,W+c),A),Ke());return{...w,sizeTree:E,...Bt(w.offsetTree,0,E,y)}}})),d),{beforeUnshiftWith:C,data:S,defaultItemSize:h,firstItemIndex:l,fixedItemSize:u,fixedGroupSize:v,gap:R,groupIndices:a,heightEstimates:p,itemSize:I,listRefresh:z,shiftWith:i,shiftWithOffset:k,sizeRanges:n,sizes:d,statefulTotalCount:r,totalCount:o,trackItemSizes:g,unshiftWith:s}},te(We,Mt),{singleton:!0});function Zo(e){return e.reduce((t,n)=>(t.groupIndices.push(t.totalCount),t.totalCount+=n+1,t),{groupIndices:[],totalCount:0})}const Dn=_(([{groupIndices:e,sizes:t,totalCount:n},{headerHeight:o,scrollTop:r}])=>{const s=U(),i=U(),l=Te(b(s,H(Zo)));return N(b(l,H(a=>a.totalCount)),n),N(b(l,H(a=>a.groupIndices)),e),N(b(ie(r,t,o),M(([a,u])=>bt(u)),H(([a,u,h])=>He(u.groupOffsetTree,Math.max(a-h,0),"v")[0]),ee(),H(a=>[a])),i),{groupCounts:s,topItemsIndexes:i}},te(Ne,ge)),Ae=_(([{log:e}])=>{const t=T(!1),n=Te(b(t,M(o=>o),ee()));return q(t,o=>{o&&re(e)("props updated",{},pe.DEBUG)}),{didMount:n,propsReady:t}},te(We),{singleton:!0}),Yo=typeof document<"u"&&"scrollBehavior"in document.documentElement.style;function Wn(e){const t=typeof e=="number"?{index:e}:e;return t.align||(t.align="start"),(!t.behavior||!Yo)&&(t.behavior="auto"),t.offset||(t.offset=0),t}const at=_(([{gap:e,listRefresh:t,sizes:n,totalCount:o},{fixedFooterHeight:r,fixedHeaderHeight:s,footerHeight:i,headerHeight:l,scrollingInProgress:a,scrollTo:u,smoothScrollTargetReached:h,viewportHeight:v},{log:p}])=>{const I=U(),S=U(),R=T(0);let x=null,d=null,m=null;function g(){x&&(x(),x=null),m&&(m(),m=null),d&&(clearTimeout(d),d=null),P(a,!1)}return N(b(I,V(n,v,o,R,l,i,p),V(e,s,r),H(([[z,C,k,c,w,y,E,O],W,A,L])=>{const G=Wn(z),{align:K,behavior:X,offset:xe}=G,ve=c-1,Ie=Mn(G,C,ve);let be=rt(Ie,C.offsetTree,W)+y;K==="end"?(be+=A+He(C.sizeTree,Ie)[1]-k+L,Ie===ve&&(be+=E)):K==="center"?be+=(A+He(C.sizeTree,Ie)[1]-k+L)/2:be-=w,xe&&(be+=xe);const Ee=ze=>{g(),ze?(O("retrying to scroll to",{location:z},pe.DEBUG),P(I,z)):(P(S,!0),O("list did not change, scroll successful",{},pe.DEBUG))};if(g(),X==="smooth"){let ze=!1;m=q(t,Le=>{ze=ze||Le}),x=je(h,()=>{Ee(ze)})}else x=je(b(t,Xo(150)),Ee);return d=setTimeout(()=>{g()},1200),P(a,!0),O("scrolling from index to",{behavior:X,index:Ie,top:be},pe.DEBUG),{behavior:X,top:be}})),u),{scrollTargetReached:S,scrollToIndex:I,topListHeight:R}},te(Ne,ge,We),{singleton:!0});function Xo(e){return t=>{const n=setTimeout(()=>{t(!1)},e);return o=>{o&&(t(!0),clearTimeout(n))}}}function Wt(e,t){e==0?t():requestAnimationFrame(()=>{Wt(e-1,t)})}function At(e,t){const n=t-1;return typeof e=="number"?e:e.index==="LAST"?n:e.index}const ct=_(([{defaultItemSize:e,listRefresh:t,sizes:n},{scrollTop:o},{scrollTargetReached:r,scrollToIndex:s},{didMount:i}])=>{const l=T(!0),a=T(0),u=T(!0);return N(b(i,V(a),M(([h,v])=>!!v),ke(!1)),l),N(b(i,V(a),M(([h,v])=>!!v),ke(!1)),u),q(b(ie(t,i),V(l,n,e,u),M(([[,h],v,{sizeTree:p},I,S])=>h&&(!Y(p)||Ot(I))&&!v&&!S),V(a)),([,h])=>{je(r,()=>{P(u,!0)}),Wt(4,()=>{je(o,()=>{P(l,!0)}),P(s,h)})}),{initialItemFinalLocationReached:u,initialTopMostItemIndex:a,scrolledToInitialItem:l}},te(Ne,ge,at,Ae),{singleton:!0});function An(e,t){return Math.abs(e-t)<1.01}const st="up",Qe="down",Jo="none",Qo={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollHeight:0,scrollTop:0,viewportHeight:0}},er=0,ut=_(([{footerHeight:e,headerHeight:t,scrollBy:n,scrollContainerState:o,scrollTop:r,viewportHeight:s}])=>{const i=T(!1),l=T(!0),a=U(),u=U(),h=T(4),v=T(er),p=he(b(jt(b(F(r),Ge(1),ke(!0)),b(F(r),Ge(1),ke(!1),on(100))),ee()),!1),I=he(b(jt(b(n,ke(!0)),b(n,ke(!1),on(200))),ee()),!1);N(b(ie(F(r),F(v)),H(([m,g])=>m<=g),ee()),l),N(b(l,Oe(50)),u);const S=Te(b(ie(o,F(s),F(t),F(e),F(h)),Be((m,[{scrollHeight:g,scrollTop:z},C,k,c,w])=>{const y=z+C-g>-w,E={scrollHeight:g,scrollTop:z,viewportHeight:C};if(y){let W,A;return z>m.state.scrollTop?(W="SCROLLED_DOWN",A=m.state.scrollTop-z):(W="SIZE_DECREASED",A=m.state.scrollTop-z||m.scrollTopDelta),{atBottom:!0,atBottomBecause:W,scrollTopDelta:A,state:E}}let O;return E.scrollHeight>m.state.scrollHeight?O="SIZE_INCREASED":C<m.state.viewportHeight?O="VIEWPORT_HEIGHT_DECREASING":z<m.state.scrollTop?O="SCROLLING_UPWARDS":O="NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",{atBottom:!1,notAtBottomBecause:O,state:E}},Qo),ee((m,g)=>m&&m.atBottom===g.atBottom))),R=he(b(o,Be((m,{scrollHeight:g,scrollTop:z,viewportHeight:C})=>{if(An(m.scrollHeight,g))return{changed:!1,jump:0,scrollHeight:g,scrollTop:z};{const k=g-(z+C)<1;return m.scrollTop!==z&&k?{changed:!0,jump:m.scrollTop-z,scrollHeight:g,scrollTop:z}:{changed:!0,jump:0,scrollHeight:g,scrollTop:z}}},{changed:!1,jump:0,scrollHeight:0,scrollTop:0}),M(m=>m.changed),H(m=>m.jump)),0);N(b(S,H(m=>m.atBottom)),i),N(b(i,Oe(50)),a);const x=T(Qe);N(b(o,H(({scrollTop:m})=>m),ee(),Be((m,g)=>re(I)?{direction:m.direction,prevScrollTop:g}:{direction:g<m.prevScrollTop?st:Qe,prevScrollTop:g},{direction:Qe,prevScrollTop:0}),H(m=>m.direction)),x),N(b(o,Oe(50),ke(Jo)),x);const d=T(0);return N(b(p,M(m=>!m),ke(0)),d),N(b(r,Oe(100),V(p),M(([m,g])=>g),Be(([m,g],[z])=>[g,z],[0,0]),H(([m,g])=>g-m)),d),{atBottomState:S,atBottomStateChange:a,atBottomThreshold:h,atTopStateChange:u,atTopThreshold:v,isAtBottom:i,isAtTop:l,isScrolling:p,lastJumpDueToItemResize:R,scrollDirection:x,scrollVelocity:d}},te(ge)),lt="top",it="bottom",an="none";function cn(e,t,n){return typeof e=="number"?n===st&&t===lt||n===Qe&&t===it?e:0:n===st?t===lt?e.main:e.reverse:t===it?e.main:e.reverse}function un(e,t){var n;return typeof e=="number"?e:(n=e[t])!=null?n:0}const Pt=_(([{deviation:e,fixedHeaderHeight:t,headerHeight:n,scrollTop:o,viewportHeight:r}])=>{const s=U(),i=T(0),l=T(0),a=T(0),u=he(b(ie(F(o),F(r),F(n),F(s,ot),F(a),F(i),F(t),F(e),F(l)),H(([h,v,p,[I,S],R,x,d,m,g])=>{const z=h-m,C=x+d,k=Math.max(p-z,0);let c=an;const w=un(g,lt),y=un(g,it);return I-=m,I+=p+d,S+=p+d,S-=m,I>h+C-w&&(c=st),S<h-k+v+y&&(c=Qe),c!==an?[Math.max(z-p-cn(R,lt,c)-w,0),z-k-d+v+cn(R,it,c)+y]:null}),M(h=>h!=null),ee(ot)),[0,0]);return{increaseViewportBy:l,listBoundary:s,overscan:a,topListHeight:i,visibleRange:u}},te(ge),{singleton:!0});function tr(e,t,n){if(bt(t)){const o=Fn(e,t);return[{index:He(t.groupOffsetTree,o)[0],offset:0,size:0},{data:n?.[0],index:o,offset:0,size:0}]}return[{data:n?.[0],index:e,offset:0,size:0}]}const Ct={bottom:0,firstItemIndex:0,items:[],offsetBottom:0,offsetTop:0,top:0,topItems:[],topListHeight:0,totalCount:0};function gt(e,t,n,o,r,s){const{lastIndex:i,lastOffset:l,lastSize:a}=r;let u=0,h=0;if(e.length>0){u=e[0].offset;const R=e[e.length-1];h=R.offset+R.size}const v=n-i,p=l+v*a+(v-1)*o,I=u,S=p-h;return{bottom:h,firstItemIndex:s,items:dn(e,r,s),offsetBottom:S,offsetTop:u,top:I,topItems:dn(t,r,s),topListHeight:t.reduce((R,x)=>x.size+R,0),totalCount:n}}function Pn(e,t,n,o,r,s){let i=0;if(n.groupIndices.length>0)for(const h of n.groupIndices){if(h-i>=e)break;i++}const l=e+i,a=At(t,l),u=Array.from({length:l}).map((h,v)=>({data:s[v+a],index:v+a,offset:0,size:0}));return gt(u,[],l,r,n,o)}function dn(e,t,n){if(e.length===0)return[];if(!bt(t))return e.map(u=>({...u,index:u.index+n,originalIndex:u.index}));const o=e[0].index,r=e[e.length-1].index,s=[],i=Ze(t.groupOffsetTree,o,r);let l,a=0;for(const u of e){(!l||l.end<u.index)&&(l=i.shift(),a=t.groupIndices.indexOf(l.start));let h;u.index===l.start?h={index:a,type:"group"}:h={groupIndex:a,index:u.index-(a+1)+n},s.push({...h,data:u.data,offset:u.offset,originalIndex:u.index,size:u.size})}return s}function mn(e,t){var n;return e===void 0?0:typeof e=="number"?e:(n=e[t])!=null?n:0}const _e=_(([{data:e,firstItemIndex:t,gap:n,sizes:o,totalCount:r},s,{listBoundary:i,topListHeight:l,visibleRange:a},{initialTopMostItemIndex:u,scrolledToInitialItem:h},{topListHeight:v},p,{didMount:I},{recalcInProgress:S}])=>{const R=T([]),x=T(0),d=U(),m=T(0);N(s.topItemsIndexes,R);const g=he(b(ie(I,S,F(a,ot),F(r),F(o),F(u),h,F(R),F(t),F(n),F(m),e),M(([c,w,,y,,,,,,,,E])=>{const O=E&&E.length!==y;return c&&!w&&!O}),H(([,,[c,w],y,E,O,W,A,L,G,K,X])=>{var xe,ve,Ie,be;const Ee=E,{offsetTree:ze,sizeTree:Le}=Ee,Je=re(x);if(y===0)return{...Ct,totalCount:y};if(c===0&&w===0)return Je===0?{...Ct,totalCount:y}:Pn(Je,O,E,L,G,X||[]);if(Y(Le))return Je>0?null:gt(tr(At(O,y),Ee,X),[],y,G,Ee,L);const $e=[];if(A.length>0){const ae=A[0],se=A[A.length-1];let ue=0;for(const le of Ze(Le,ae,se)){const Z=le.value,J=Math.max(le.start,ae),Ce=Math.min(le.end,se);for(let me=J;me<=Ce;me++)$e.push({data:X?.[me],index:me,offset:ue,size:Z}),ue+=Z}}if(!W)return gt([],$e,y,G,Ee,L);const Fe=A.length>0?A[A.length-1]+1:0,j=Go(ze,c,w,Fe);if(j.length===0)return null;const $=y-1,ne=It([],ae=>{for(const se of j){const ue=se.value;let le=ue.offset,Z=se.start;const J=ue.size;if(ue.offset<c){Z+=Math.floor((c-ue.offset+G)/(J+G));const me=Z-se.start;le+=me*J+me*G}Z<Fe&&(le+=(Fe-Z)*J,Z=Fe);const Ce=Math.min(se.end,$);for(let me=Z;me<=Ce&&!(le>=w);me++)ae.push({data:X?.[me],index:me,offset:le,size:J}),le+=J+G}}),de=mn(K,lt),Se=mn(K,it);if(ne.length>0&&(de>0||Se>0)){const ae=ne[0],se=ne[ne.length-1];if(de>0&&ae.index>Fe){const ue=Math.min(de,ae.index-Fe),le=[];let Z=ae.offset;for(let J=ae.index-1;J>=ae.index-ue;J--){const Ce=(ve=(xe=Ze(Le,J,J)[0])==null?void 0:xe.value)!=null?ve:ae.size;Z-=Ce+G,le.unshift({data:X?.[J],index:J,offset:Z,size:Ce})}ne.unshift(...le)}if(Se>0&&se.index<$){const ue=Math.min(Se,$-se.index);let le=se.offset+se.size+G;for(let Z=se.index+1;Z<=se.index+ue;Z++){const J=(be=(Ie=Ze(Le,Z,Z)[0])==null?void 0:Ie.value)!=null?be:se.size;ne.push({data:X?.[Z],index:Z,offset:le,size:J}),le+=J+G}}}return gt(ne,$e,y,G,Ee,L)}),M(c=>c!==null),ee()),Ct);N(b(e,M(Ot),H(c=>c?.length)),r),N(b(g,H(c=>c.topListHeight)),v),N(v,l),N(b(g,H(c=>[c.top,c.bottom])),i),N(b(g,H(c=>c.items)),d);const z=Te(b(g,M(({items:c})=>c.length>0),V(r,e),M(([{items:c},w])=>c[c.length-1].originalIndex===w-1),H(([,c,w])=>[c-1,w]),ee(ot),H(([c])=>c))),C=Te(b(g,Oe(200),M(({items:c,topItems:w})=>c.length>0&&c[0].originalIndex===w.length),H(({items:c})=>c[0].index),ee())),k=Te(b(g,M(({items:c})=>c.length>0),H(({items:c})=>{let w=0,y=c.length-1;for(;c[w].type==="group"&&w<y;)w++;for(;c[y].type==="group"&&y>w;)y--;return{endIndex:c[y].index,startIndex:c[w].index}}),ee(On)));return{endReached:z,initialItemCount:x,itemsRendered:d,listState:g,minOverscanItemCount:m,rangeChanged:k,startReached:C,topItemsIndexes:R,...p}},te(Ne,Dn,Pt,ct,at,ut,Ae,Mt),{singleton:!0}),Vn=_(([{fixedFooterHeight:e,fixedHeaderHeight:t,footerHeight:n,headerHeight:o},{listState:r}])=>{const s=U(),i=he(b(ie(n,e,o,t,r),H(([l,a,u,h,v])=>l+a+u+h+v.offsetBottom+v.bottom)),0);return N(F(i),s),{totalListHeight:i,totalListHeightChanged:s}},te(ge,_e),{singleton:!0}),nr=_(([{viewportHeight:e},{totalListHeight:t}])=>{const n=T(!1),o=he(b(ie(n,e,t),M(([r])=>r),H(([,r,s])=>Math.max(0,r-s)),Oe(0),ee()),0);return{alignToBottom:n,paddingTopAddition:o}},te(ge,Vn),{singleton:!0}),Gn=_(()=>({context:T(null)})),or=({itemBottom:e,itemTop:t,locationParams:{align:n,behavior:o,...r},viewportBottom:s,viewportTop:i})=>t<i?{...r,align:n??"start",behavior:o}:e>s?{...r,align:n??"end",behavior:o}:null,Un=_(([{gap:e,sizes:t,totalCount:n},{fixedFooterHeight:o,fixedHeaderHeight:r,headerHeight:s,scrollingInProgress:i,scrollTop:l,viewportHeight:a},{scrollToIndex:u}])=>{const h=U();return N(b(h,V(t,a,n,s,r,o,l),V(e),H(([[v,p,I,S,R,x,d,m],g])=>{const{align:z,behavior:C,calculateViewLocation:k=or,done:c,...w}=v,y=Mn(v,p,S-1),E=rt(y,p.offsetTree,g)+R+x,O=E+He(p.sizeTree,y)[1],W=m+x,A=m+I-d,L=k({itemBottom:O,itemTop:E,locationParams:{align:z,behavior:C,...w},viewportBottom:A,viewportTop:W});return L?c&&je(b(i,M(G=>!G),Ge(re(i)?1:2)),c):c?.(),L}),M(v=>v!==null)),u),{scrollIntoView:h}},te(Ne,ge,at,_e,We),{singleton:!0});function fn(e){return e?e==="smooth"?"smooth":"auto":!1}const rr=(e,t)=>typeof e=="function"?fn(e(t)):t&&fn(e),sr=_(([{listRefresh:e,totalCount:t,fixedItemSize:n,data:o},{atBottomState:r,isAtBottom:s},{scrollToIndex:i},{scrolledToInitialItem:l},{didMount:a,propsReady:u},{log:h},{scrollingInProgress:v},{context:p},{scrollIntoView:I}])=>{const S=T(!1),R=U();let x=null;function d(C){P(i,{align:"end",behavior:C,index:"LAST"})}q(b(ie(b(F(t),Ge(1)),a),V(F(S),s,l,v),H(([[C,k],c,w,y,E])=>{let O=k&&y,W="auto";return O&&(W=rr(c,w||E),O=O&&!!W),{followOutputBehavior:W,shouldFollow:O,totalCount:C}}),M(({shouldFollow:C})=>C)),({followOutputBehavior:C,totalCount:k})=>{x&&(x(),x=null),re(n)?requestAnimationFrame(()=>{re(h)("following output to ",{totalCount:k},pe.DEBUG),d(C)}):x=je(e,()=>{re(h)("following output to ",{totalCount:k},pe.DEBUG),d(C),x=null})});function m(C){const k=je(r,c=>{C&&!c.atBottom&&c.notAtBottomBecause==="SIZE_INCREASED"&&!x&&(re(h)("scrolling to bottom due to increased size",{},pe.DEBUG),d("auto"))});setTimeout(k,100)}q(b(ie(F(S),t,u),M(([C,,k])=>C&&k),Be(({value:C},[,k])=>({refreshed:C===k,value:k}),{refreshed:!1,value:0}),M(({refreshed:C})=>C),V(S,t)),([,C])=>{re(l)&&m(C!==!1)}),q(R,()=>{m(re(S)!==!1)}),q(ie(F(S),r),([C,k])=>{C&&!k.atBottom&&k.notAtBottomBecause==="VIEWPORT_HEIGHT_DECREASING"&&d("auto")});const g=T(null),z=U();return N(jt(b(F(o),H(C=>{var k;return(k=C?.length)!=null?k:0})),b(F(t))),z),q(b(ie(b(z,Ge(1)),a),V(F(g),l,v,p),H(([[C,k],c,w,y,E])=>k&&w&&c?.({context:E,totalCount:C,scrollingInProgress:y})),M(C=>!!C),Oe(0)),C=>{x&&(x(),x=null),re(n)?requestAnimationFrame(()=>{re(h)("scrolling into view",{}),P(I,C)}):x=je(e,()=>{re(h)("scrolling into view",{}),P(I,C),x=null})}),{autoscrollToBottom:R,followOutput:S,scrollIntoViewOnChange:g}},te(Ne,ut,at,ct,Ae,We,ge,Gn,Un)),lr=_(([{data:e,firstItemIndex:t,gap:n,sizes:o},{initialTopMostItemIndex:r},{initialItemCount:s,listState:i},{didMount:l}])=>(N(b(l,V(s),M(([,a])=>a!==0),V(r,o,t,n,e),H(([[,a],u,h,v,p,I=[]])=>Pn(a,u,h,v,p,I))),i),{}),te(Ne,ct,_e,Ae),{singleton:!0}),ir=_(([{didMount:e},{scrollTo:t},{listState:n}])=>{const o=T(0);return q(b(e,V(o),M(([,r])=>r!==0),H(([,r])=>({top:r}))),r=>{je(b(n,Ge(1),M(s=>s.items.length>1)),()=>{requestAnimationFrame(()=>{P(t,r)})})}),{initialScrollTop:o}},te(Ae,ge,_e),{singleton:!0}),_n=_(([{scrollVelocity:e}])=>{const t=T(!1),n=U(),o=T(!1);return N(b(e,V(o,t,n),M(([r,s])=>!!s),H(([r,s,i,l])=>{const{enter:a,exit:u}=s;if(i){if(u(r,l))return!1}else if(a(r,l))return!0;return i}),ee()),t),q(b(ie(t,e,n),V(o)),([[r,s,i],l])=>{r&&l&&l.change&&l.change(s,i)}),{isSeeking:t,scrollSeekConfiguration:o,scrollSeekRangeChanged:n,scrollVelocity:e}},te(ut),{singleton:!0}),Vt=_(([{scrollContainerState:e,scrollTo:t}])=>{const n=U(),o=U(),r=U(),s=T(!1),i=T(void 0);return N(b(ie(n,o),H(([{scrollHeight:l,scrollTop:a,viewportHeight:u},{offsetTop:h}])=>({scrollHeight:l,scrollTop:Math.max(0,a-h),viewportHeight:u}))),e),N(b(t,V(o),H(([l,{offsetTop:a}])=>({...l,top:l.top+a}))),r),{customScrollParent:i,useWindowScroll:s,windowScrollContainerState:n,windowScrollTo:r,windowViewportRect:o}},te(ge)),ar=_(([{sizeRanges:e,sizes:t},{headerHeight:n,scrollTop:o},{initialTopMostItemIndex:r},{didMount:s},{useWindowScroll:i,windowScrollContainerState:l,windowViewportRect:a}])=>{const u=U(),h=T(void 0),v=T(null),p=T(null);return N(l,v),N(a,p),q(b(u,V(t,o,i,v,p,n)),([I,S,R,x,d,m,g])=>{const z=_o(S.sizeTree);x&&d!==null&&m!==null&&(R=d.scrollTop-m.offsetTop),R-=g,I({ranges:z,scrollTop:R})}),N(b(h,M(Ot),H(cr)),r),N(b(s,V(h),M(([,I])=>I!==void 0),ee(),H(([,I])=>I.ranges)),e),{getState:u,restoreStateFrom:h}},te(Ne,ge,ct,Ae,Vt));function cr(e){return{align:"start",index:0,offset:e.scrollTop}}const ur=_(([{topItemsIndexes:e}])=>{const t=T(0);return N(b(t,M(n=>n>=0),H(n=>Array.from({length:n}).map((o,r)=>r))),e),{topItemCount:t}},te(_e));function $n(e){let t=!1,n;return(()=>(t||(t=!0,n=e()),n))}const dr=$n(()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent)),mr=_(([{deviation:e,scrollBy:t,scrollingInProgress:n,scrollTop:o},{isAtBottom:r,isScrolling:s,lastJumpDueToItemResize:i,scrollDirection:l},{listState:a},{beforeUnshiftWith:u,gap:h,shiftWithOffset:v,sizes:p},{log:I},{recalcInProgress:S}])=>{const R=Te(b(a,V(i),Be(([,d,m,g],[{bottom:z,items:C,offsetBottom:k,totalCount:c},w])=>{const y=z+k;let E=0;return m===c&&d.length>0&&C.length>0&&(C[0].originalIndex===0&&d[0].originalIndex===0||(E=y-g,E!==0&&(E+=w))),[E,C,c,y]},[0,[],0,0]),M(([d])=>d!==0),V(o,l,n,r,I,S),M(([,d,m,g,,,z])=>!z&&!g&&d!==0&&m===st),H(([[d],,,,,m])=>(m("Upward scrolling compensation",{amount:d},pe.DEBUG),d))));function x(d){d>0?(P(t,{behavior:"auto",top:-d}),P(e,0)):(P(e,0),P(t,{behavior:"auto",top:-d}))}return q(b(R,V(e,s)),([d,m,g])=>{g&&dr()?P(e,m-d):x(-d)}),q(b(ie(he(s,!1),e,S),M(([d,m,g])=>!d&&!g&&m!==0),H(([d,m])=>m),Oe(1)),x),N(b(v,H(d=>({top:-d}))),t),q(b(u,V(p,h),H(([d,{groupIndices:m,lastSize:g,sizeTree:z},C])=>{function k(c){return c*(g+C)}if(m.length===0)return k(d);{let c=0;const w=nt(z,0);let y=0,E=0;for(;y<d;){y++,c+=w;let O=m.length===E+1?1/0:m[E+1]-m[E]-1;y+O>d&&(c-=w,O=d-y+1),y+=O,c+=k(O),E++}return c}})),d=>{P(e,d),requestAnimationFrame(()=>{P(t,{top:d}),requestAnimationFrame(()=>{P(e,0),P(S,!1)})})}),{deviation:e}},te(ge,ut,_e,Ne,We,Mt)),fr=_(([e,t,n,o,r,s,i,l,a,u,h])=>({...e,...t,...n,...o,...r,...s,...i,...l,...a,...u,...h}),te(Pt,lr,Ae,_n,Vn,ir,nr,Vt,Un,We,Gn)),qn=_(([{data:e,defaultItemSize:t,firstItemIndex:n,fixedItemSize:o,fixedGroupSize:r,gap:s,groupIndices:i,heightEstimates:l,itemSize:a,sizeRanges:u,sizes:h,statefulTotalCount:v,totalCount:p,trackItemSizes:I},{initialItemFinalLocationReached:S,initialTopMostItemIndex:R,scrolledToInitialItem:x},d,m,g,z,{scrollToIndex:C},k,{topItemCount:c},{groupCounts:w},y])=>{const{listState:E,minOverscanItemCount:O,topItemsIndexes:W,rangeChanged:A,...L}=z;return N(A,y.scrollSeekRangeChanged),N(b(y.windowViewportRect,H(G=>G.visibleHeight)),d.viewportHeight),{data:e,defaultItemHeight:t,firstItemIndex:n,fixedItemHeight:o,fixedGroupHeight:r,gap:s,groupCounts:w,heightEstimates:l,initialItemFinalLocationReached:S,initialTopMostItemIndex:R,scrolledToInitialItem:x,sizeRanges:u,topItemCount:c,topItemsIndexes:W,totalCount:p,...g,groupIndices:i,itemSize:a,listState:E,minOverscanItemCount:O,scrollToIndex:C,statefulTotalCount:v,trackItemSizes:I,rangeChanged:A,...L,...y,...d,sizes:h,...m}},te(Ne,ct,ge,ar,sr,_e,at,mr,ur,Dn,fr));function hr(e,t){const n={},o={};let r=0;const s=e.length;for(;r<s;)o[e[r]]=1,r+=1;for(const i in t)Object.hasOwn(o,i)||(n[i]=t[i]);return n}const mt=typeof document<"u"?B.useLayoutEffect:B.useEffect;function Kn(e,t,n){const o=Object.keys(t.required||{}),r=Object.keys(t.optional||{}),s=Object.keys(t.methods||{}),i=Object.keys(t.events||{}),l=B.createContext({});function a(x,d){x.propsReady&&P(x.propsReady,!1);for(const m of o){const g=x[t.required[m]];P(g,d[m])}for(const m of r)if(m in d){const g=x[t.optional[m]];P(g,d[m])}x.propsReady&&P(x.propsReady,!0)}function u(x){return s.reduce((d,m)=>(d[m]=g=>{const z=x[t.methods[m]];P(z,g)},d),{})}function h(x){return i.reduce((d,m)=>(d[m]=Eo(x[t.events[m]]),d),{})}const v=B.forwardRef((x,d)=>{const{children:m,...g}=x,[z]=B.useState(()=>It(Bo(e),c=>{a(c,g)})),[C]=B.useState(nn(h,z));mt(()=>{for(const c of i)c in g&&q(C[c],g[c]);return()=>{Object.values(C).map(Lt)}},[g,C,z]),mt(()=>{a(z,g)}),B.useImperativeHandle(d,tn(u(z)));const k=n;return f.jsx(l.Provider,{value:z,children:n?f.jsx(k,{...hr([...o,...r,...i],g),children:m}):m})}),p=x=>{const d=B.useContext(l);return B.useCallback(m=>{P(d[x],m)},[d,x])},I=x=>{const d=B.useContext(l)[x],m=B.useCallback(g=>q(d,g),[d]);return B.useSyncExternalStore(m,()=>re(d),()=>re(d))},S=x=>{const d=B.useContext(l)[x],[m,g]=B.useState(nn(re,d));return mt(()=>q(d,z=>{z!==m&&g(tn(z))}),[d,m]),m},R=B.version.startsWith("18")?I:S;return{Component:v,useEmitter:(x,d)=>{const m=B.useContext(l)[x];mt(()=>q(m,d),[d,m])},useEmitterValue:R,usePublisher:p}}const Zn=B.createContext(void 0),Yn=B.createContext(void 0),Xn=typeof document<"u"?B.useLayoutEffect:B.useEffect;function yt(e){return"self"in e}function gr(e){return"body"in e}function Jn(e,t,n,o=Xe,r,s){const i=B.useRef(null),l=B.useRef(null),a=B.useRef(null),u=B.useCallback(p=>{let I,S,R;const x=p.target;if(gr(x)||yt(x)){const m=yt(x)?x:x.defaultView;R=s?m.scrollX:m.scrollY,I=s?m.document.documentElement.scrollWidth:m.document.documentElement.scrollHeight,S=s?m.innerWidth:m.innerHeight}else R=s?x.scrollLeft:x.scrollTop,I=s?x.scrollWidth:x.scrollHeight,S=s?x.offsetWidth:x.offsetHeight;const d=()=>{e({scrollHeight:I,scrollTop:Math.max(R,0),viewportHeight:S})};p.suppressFlushSync?d():bo.flushSync(d),l.current!==null&&(R===l.current||R<=0||R===I-S)&&(l.current=null,t(!0),a.current&&(clearTimeout(a.current),a.current=null))},[e,t,s]);B.useEffect(()=>{const p=r||i.current;return o(r||i.current),u({suppressFlushSync:!0,target:p}),p.addEventListener("scroll",u,{passive:!0}),()=>{o(null),p.removeEventListener("scroll",u)}},[i,u,n,o,r]);function h(p){const I=i.current;if(!I||(s?"offsetWidth"in I&&I.offsetWidth===0:"offsetHeight"in I&&I.offsetHeight===0))return;const S=p.behavior==="smooth";let R,x,d;yt(I)?(x=Math.max(Me(I.document.documentElement,s?"width":"height"),s?I.document.documentElement.scrollWidth:I.document.documentElement.scrollHeight),R=s?I.innerWidth:I.innerHeight,d=s?window.scrollX:window.scrollY):(x=I[s?"scrollWidth":"scrollHeight"],R=Me(I,s?"width":"height"),d=I[s?"scrollLeft":"scrollTop"]);const m=x-R;if(p.top=Math.ceil(Math.max(Math.min(m,p.top),0)),An(R,x)||p.top===d){e({scrollHeight:x,scrollTop:d,viewportHeight:R}),S&&t(!0);return}S?(l.current=p.top,a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{a.current=null,l.current=null,t(!0)},1e3)):l.current=null,s&&(p={behavior:p.behavior,left:p.top}),I.scrollTo(p)}function v(p){s&&(p={behavior:p.behavior,left:p.top}),i.current.scrollBy(p)}return{scrollByCallback:v,scrollerRef:i,scrollToCallback:h}}const Rt="-webkit-sticky",hn="sticky",Gt=$n(()=>{if(typeof document>"u")return hn;const e=document.createElement("div");return e.style.position=Rt,e.style.position===Rt?Rt:hn});function Ut(e){return e}const pr=_(()=>{const e=T(l=>`Item ${l}`),t=T(l=>`Group ${l}`),n=T({}),o=T(Ut),r=T("div"),s=T(Xe),i=(l,a=null)=>he(b(n,H(u=>u[l]),ee()),a);return{components:n,computeItemKey:o,EmptyPlaceholder:i("EmptyPlaceholder"),FooterComponent:i("Footer"),GroupComponent:i("Group","div"),groupContent:t,HeaderComponent:i("Header"),HeaderFooterTag:r,ItemComponent:i("Item","div"),itemContent:e,ListComponent:i("List","div"),ScrollerComponent:i("Scroller","div"),scrollerRef:s,ScrollSeekPlaceholder:i("ScrollSeekPlaceholder"),TopItemListComponent:i("TopItemList")}}),xr=_(([e,t])=>({...e,...t}),te(qn,pr)),vr=({height:e})=>f.jsx("div",{style:{height:e}}),Ir={overflowAnchor:"none",position:Gt(),zIndex:1},Qn={overflowAnchor:"none"},br={...Qn,display:"inline-block",height:"100%"},gn=B.memo(function({showTopList:e=!1}){const t=D("listState"),n=ye("sizeRanges"),o=D("useWindowScroll"),r=D("customScrollParent"),s=ye("windowScrollContainerState"),i=ye("scrollContainerState"),l=r||o?s:i,a=D("itemContent"),u=D("context"),h=D("groupContent"),v=D("trackItemSizes"),p=D("itemSize"),I=D("log"),S=ye("gap"),R=D("horizontalDirection"),{callbackRef:x}=Lo(n,p,v,e?Xe:l,I,S,r,R,D("skipAnimationFrameInResizeObserver")),[d,m]=B.useState(0);_t("deviation",L=>{d!==L&&m(L)});const g=D("EmptyPlaceholder"),z=D("ScrollSeekPlaceholder")||vr,C=D("ListComponent"),k=D("ItemComponent"),c=D("GroupComponent"),w=D("computeItemKey"),y=D("isSeeking"),E=D("groupIndices").length>0,O=D("alignToBottom"),W=D("initialItemFinalLocationReached"),A=e?{}:{boxSizing:"border-box",...R?{display:"inline-block",height:"100%",marginLeft:d!==0?d:O?"auto":0,paddingLeft:t.offsetTop,paddingRight:t.offsetBottom,whiteSpace:"nowrap"}:{marginTop:d!==0?d:O?"auto":0,paddingBottom:t.offsetBottom,paddingTop:t.offsetTop},...W?{}:{visibility:"hidden"}};return!e&&t.totalCount===0&&g?f.jsx(g,{...fe(g,u)}):f.jsx(C,{...fe(C,u),"data-testid":e?"virtuoso-top-item-list":"virtuoso-item-list",ref:x,style:A,children:(e?t.topItems:t.items).map(L=>{const G=L.originalIndex,K=w(G+t.firstItemIndex,L.data,u);return y?Q.createElement(z,{...fe(z,u),height:L.size,index:L.index,key:K,type:L.type||"item",...L.type==="group"?{}:{groupIndex:L.groupIndex}}):L.type==="group"?Q.createElement(c,{...fe(c,u),"data-index":G,"data-item-index":L.index,"data-known-size":L.size,key:K,style:Ir},h(L.index,u)):Q.createElement(k,{...fe(k,u),...Cr(k,L.data),"data-index":G,"data-item-group-index":L.groupIndex,"data-item-index":L.index,"data-known-size":L.size,key:K,style:R?br:Qn},E?a(L.index,L.groupIndex,L.data,u):a(L.index,L.data,u))})})}),wr={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},Tr={outline:"none",overflowX:"auto",position:"relative"},wt=e=>({height:"100%",position:"absolute",top:0,width:"100%",...e?{display:"flex",flexDirection:"column"}:{}}),Sr={position:Gt(),top:0,width:"100%",zIndex:1};function fe(e,t){if(typeof e!="string")return{context:t}}function Cr(e,t){return{item:typeof e=="string"?void 0:t}}const yr=B.memo(function(){const e=D("HeaderComponent"),t=ye("headerHeight"),n=D("HeaderFooterTag"),o=Ue(B.useMemo(()=>s=>{t(Me(s,"height"))},[t]),!0,D("skipAnimationFrameInResizeObserver")),r=D("context");return e?f.jsx(n,{ref:o,children:f.jsx(e,{...fe(e,r)})}):null}),Rr=B.memo(function(){const e=D("FooterComponent"),t=ye("footerHeight"),n=D("HeaderFooterTag"),o=Ue(B.useMemo(()=>s=>{t(Me(s,"height"))},[t]),!0,D("skipAnimationFrameInResizeObserver")),r=D("context");return e?f.jsx(n,{ref:o,children:f.jsx(e,{...fe(e,r)})}):null});function eo({useEmitter:e,useEmitterValue:t,usePublisher:n}){return B.memo(function({children:o,style:r,context:s,...i}){const l=n("scrollContainerState"),a=t("ScrollerComponent"),u=n("smoothScrollTargetReached"),h=t("scrollerRef"),v=t("horizontalDirection")||!1,{scrollByCallback:p,scrollerRef:I,scrollToCallback:S}=Jn(l,u,a,h,void 0,v);return e("scrollTo",S),e("scrollBy",p),f.jsx(a,{"data-testid":"virtuoso-scroller","data-virtuoso-scroller":!0,ref:I,style:{...v?Tr:wr,...r},tabIndex:0,...i,...fe(a,s),children:o})})}function to({useEmitter:e,useEmitterValue:t,usePublisher:n}){return B.memo(function({children:o,style:r,context:s,...i}){const l=n("windowScrollContainerState"),a=t("ScrollerComponent"),u=n("smoothScrollTargetReached"),h=t("totalListHeight"),v=t("deviation"),p=t("customScrollParent"),I=B.useRef(null),S=t("scrollerRef"),{scrollByCallback:R,scrollerRef:x,scrollToCallback:d}=Jn(l,u,a,S,p);return Xn(()=>{var m;return x.current=p||((m=I.current)==null?void 0:m.ownerDocument.defaultView),()=>{x.current=null}},[x,p]),e("windowScrollTo",d),e("scrollBy",R),f.jsx(a,{ref:I,"data-virtuoso-scroller":!0,style:{position:"relative",...r,...h!==0?{height:h+v}:{}},...i,...fe(a,s),children:o})})}const zr=({children:e})=>{const t=B.useContext(Zn),n=ye("viewportHeight"),o=ye("fixedItemHeight"),r=D("alignToBottom"),s=D("horizontalDirection"),i=B.useMemo(()=>Rn(n,a=>Me(a,s?"width":"height")),[n,s]),l=Ue(i,!0,D("skipAnimationFrameInResizeObserver"));return B.useEffect(()=>{t&&(n(t.viewportHeight),o(t.itemHeight))},[t,n,o]),f.jsx("div",{"data-viewport-type":"element",ref:l,style:wt(r),children:e})},jr=({children:e})=>{const t=B.useContext(Zn),n=ye("windowViewportRect"),o=ye("fixedItemHeight"),r=D("customScrollParent"),s=jn(n,r,D("skipAnimationFrameInResizeObserver")),i=D("alignToBottom");return B.useEffect(()=>{t&&(o(t.itemHeight),n({offsetTop:0,visibleHeight:t.viewportHeight,visibleWidth:100}))},[t,n,o]),f.jsx("div",{"data-viewport-type":"window",ref:s,style:wt(i),children:e})},Hr=({children:e})=>{const t=D("TopItemListComponent")||"div",n=D("headerHeight"),o={...Sr,marginTop:`${n}px`},r=D("context");return f.jsx(t,{style:o,...fe(t,r),children:e})},Er=B.memo(function(e){const t=D("useWindowScroll"),n=D("topItemsIndexes").length>0,o=D("customScrollParent"),r=D("context");return f.jsxs(o||t?Nr:Br,{...e,context:r,children:[n&&f.jsx(Hr,{children:f.jsx(gn,{showTopList:!0})}),f.jsxs(o||t?jr:zr,{children:[f.jsx(yr,{}),f.jsx(gn,{}),f.jsx(Rr,{})]})]})}),{Component:kr,useEmitter:_t,useEmitterValue:D,usePublisher:ye}=Kn(xr,{required:{},optional:{restoreStateFrom:"restoreStateFrom",context:"context",followOutput:"followOutput",scrollIntoViewOnChange:"scrollIntoViewOnChange",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",minOverscanItemCount:"minOverscanItemCount",totalCount:"totalCount",groupCounts:"groupCounts",topItemCount:"topItemCount",firstItemIndex:"firstItemIndex",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedGroupHeight:"fixedGroupHeight",fixedItemHeight:"fixedItemHeight",heightEstimates:"heightEstimates",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"HeaderFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",horizontalDirection:"horizontalDirection",skipAnimationFrameInResizeObserver:"skipAnimationFrameInResizeObserver"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",autoscrollToBottom:"autoscrollToBottom",getState:"getState"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},Er),Br=eo({useEmitter:_t,useEmitterValue:D,usePublisher:ye}),Nr=to({useEmitter:_t,useEmitterValue:D,usePublisher:ye}),Or=kr,Lr=_(()=>{const e=T(u=>f.jsxs("td",{children:["Item $",u]})),t=T(null),n=T(u=>f.jsxs("td",{colSpan:1e3,children:["Group ",u]})),o=T(null),r=T(null),s=T({}),i=T(Ut),l=T(Xe),a=(u,h=null)=>he(b(s,H(v=>v[u]),ee()),h);return{components:s,computeItemKey:i,context:t,EmptyPlaceholder:a("EmptyPlaceholder"),FillerRow:a("FillerRow"),fixedFooterContent:r,fixedHeaderContent:o,itemContent:e,groupContent:n,ScrollerComponent:a("Scroller","div"),scrollerRef:l,ScrollSeekPlaceholder:a("ScrollSeekPlaceholder"),TableBodyComponent:a("TableBody","tbody"),TableComponent:a("Table","table"),TableFooterComponent:a("TableFoot","tfoot"),TableHeadComponent:a("TableHead","thead"),TableRowComponent:a("TableRow","tr"),GroupComponent:a("Group","tr")}});te(qn,Lr);Gt();const pn={bottom:0,itemHeight:0,items:[],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},Fr={bottom:0,itemHeight:0,items:[{index:0}],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},{ceil:xn,floor:xt,max:et,min:zt,round:vn}=Math;function In(e,t,n){return Array.from({length:t-e+1}).map((o,r)=>({data:n===null?null:n[r+e],index:r+e}))}function Mr(e){return{...Fr,items:e}}function ft(e,t){return e&&e.width===t.width&&e.height===t.height}function Dr(e,t){return e&&e.column===t.column&&e.row===t.row}const Wr=_(([{increaseViewportBy:e,listBoundary:t,overscan:n,visibleRange:o},{footerHeight:r,headerHeight:s,scrollBy:i,scrollContainerState:l,scrollTo:a,scrollTop:u,smoothScrollTargetReached:h,viewportHeight:v},p,I,{didMount:S,propsReady:R},{customScrollParent:x,useWindowScroll:d,windowScrollContainerState:m,windowScrollTo:g,windowViewportRect:z},C])=>{const k=T(0),c=T(0),w=T(pn),y=T({height:0,width:0}),E=T({height:0,width:0}),O=U(),W=U(),A=T(0),L=T(null),G=T({column:0,row:0}),K=U(),X=U(),xe=T(!1),ve=T(0),Ie=T(!0),be=T(!1),Ee=T(!1);q(b(S,V(ve),M(([j,$])=>!!$)),()=>{P(Ie,!1)}),q(b(ie(S,Ie,E,y,ve,be),M(([j,$,ne,de,,Se])=>j&&!$&&ne.height!==0&&de.height!==0&&!Se)),([,,,,j])=>{P(be,!0),Wt(1,()=>{P(O,j)}),je(b(u),()=>{P(t,[0,0]),P(Ie,!0)})}),N(b(X,M(j=>j!=null&&j.scrollTop>0),ke(0)),c),q(b(S,V(X),M(([,j])=>j!=null)),([,j])=>{j&&(P(y,j.viewport),P(E,j.item),P(G,j.gap),j.scrollTop>0&&(P(xe,!0),je(b(u,Ge(1)),$=>{P(xe,!1)}),P(a,{top:j.scrollTop})))}),N(b(y,H(({height:j})=>j)),v),N(b(ie(F(y,ft),F(E,ft),F(G,(j,$)=>j&&j.column===$.column&&j.row===$.row),F(u)),H(([j,$,ne,de])=>({gap:ne,item:$,scrollTop:de,viewport:j}))),K),N(b(ie(F(k),o,F(G,Dr),F(E,ft),F(y,ft),F(L),F(c),F(xe),F(Ie),F(ve)),M(([,,,,,,,j])=>!j),H(([j,[$,ne],de,Se,ae,se,ue,,le,Z])=>{const{column:J,row:Ce}=de,{height:me,width:Tt}=Se,{width:$t}=ae;if(ue===0&&(j===0||$t===0))return pn;if(Tt===0){const Xt=At(Z,j),so=Xt+Math.max(ue-1,0);return Mr(In(Xt,so,se))}const dt=no($t,Tt,J);let qe,Pe;le?$===0&&ne===0&&ue>0?(qe=0,Pe=ue-1):(qe=dt*xt(($+Ce)/(me+Ce)),Pe=dt*xn((ne+Ce)/(me+Ce))-1,Pe=zt(j-1,et(Pe,dt-1)),qe=zt(Pe,et(0,qe))):(qe=0,Pe=-1);const qt=In(qe,Pe,se),{bottom:Kt,top:Zt}=bn(ae,de,Se,qt),Yt=xn(j/dt),ro=Yt*me+(Yt-1)*Ce-Kt;return{bottom:Kt,itemHeight:me,items:qt,itemWidth:Tt,offsetBottom:ro,offsetTop:Zt,top:Zt}})),w),N(b(L,M(j=>j!==null),H(j=>j.length)),k),N(b(ie(y,E,w,G),M(([j,$,{items:ne}])=>ne.length>0&&$.height!==0&&j.height!==0),H(([j,$,{items:ne},de])=>{const{bottom:Se,top:ae}=bn(j,de,$,ne);return[ae,Se]}),ee(ot)),t);const ze=T(!1);N(b(u,V(ze),H(([j,$])=>$||j!==0)),ze);const Le=Te(b(ie(w,k),M(([{items:j}])=>j.length>0),V(ze),M(([[j,$],ne])=>{const de=j.items[j.items.length-1].index===$-1;return(ne||j.bottom>0&&j.itemHeight>0&&j.offsetBottom===0&&j.items.length===$)&&de}),H(([[,j]])=>j-1),ee())),Je=Te(b(F(w),M(({items:j})=>j.length>0&&j[0].index===0),ke(0),ee())),$e=Te(b(F(w),V(xe),M(([{items:j},$])=>j.length>0&&!$),H(([{items:j}])=>({endIndex:j[j.length-1].index,startIndex:j[0].index})),ee(On),Oe(0)));N($e,I.scrollSeekRangeChanged),N(b(O,V(y,E,k,G),H(([j,$,ne,de,Se])=>{const ae=Wn(j),{align:se,behavior:ue,offset:le}=ae;let Z=ae.index;Z==="LAST"&&(Z=de-1),Z=et(0,Z,zt(de-1,Z));let J=Nt($,Se,ne,Z);return se==="end"?J=vn(J-$.height+ne.height):se==="center"&&(J=vn(J-$.height/2+ne.height/2)),le&&(J+=le),{behavior:ue,top:J}})),a);const Fe=he(b(w,H(j=>j.offsetBottom+j.bottom)),0);return N(b(z,H(j=>({height:j.visibleHeight,width:j.visibleWidth}))),y),{customScrollParent:x,data:L,deviation:A,footerHeight:r,gap:G,headerHeight:s,increaseViewportBy:e,initialItemCount:c,itemDimensions:E,overscan:n,restoreStateFrom:X,scrollBy:i,scrollContainerState:l,scrollHeight:W,scrollTo:a,scrollToIndex:O,scrollTop:u,smoothScrollTargetReached:h,totalCount:k,useWindowScroll:d,viewportDimensions:y,windowScrollContainerState:m,windowScrollTo:g,windowViewportRect:z,...I,gridState:w,horizontalDirection:Ee,initialTopMostItemIndex:ve,totalListHeight:Fe,...p,endReached:Le,propsReady:R,rangeChanged:$e,startReached:Je,stateChanged:K,stateRestoreInProgress:xe,...C}},te(Pt,ge,ut,_n,Ae,Vt,We));function no(e,t,n){return et(1,xt((e+n)/(xt(t)+n)))}function bn(e,t,n,o){const{height:r}=n;if(r===void 0||o.length===0)return{bottom:0,top:0};const s=Nt(e,t,n,o[0].index);return{bottom:Nt(e,t,n,o[o.length-1].index)+r,top:s}}function Nt(e,t,n,o){const r=no(e.width,n.width,t.column),s=xt(o/r),i=s*n.height+et(0,s-1)*t.row;return i>0?i+t.row:i}const Ar=_(()=>{const e=T(v=>`Item ${v}`),t=T({}),n=T(null),o=T("virtuoso-grid-item"),r=T("virtuoso-grid-list"),s=T(Ut),i=T("div"),l=T(Xe),a=(v,p=null)=>he(b(t,H(I=>I[v]),ee()),p),u=T(!1),h=T(!1);return N(F(h),u),{components:t,computeItemKey:s,context:n,FooterComponent:a("Footer"),HeaderComponent:a("Header"),headerFooterTag:i,itemClassName:o,ItemComponent:a("Item","div"),itemContent:e,listClassName:r,ListComponent:a("List","div"),readyStateChanged:u,reportReadyState:h,ScrollerComponent:a("Scroller","div"),scrollerRef:l,ScrollSeekPlaceholder:a("ScrollSeekPlaceholder","div")}}),Pr=_(([e,t])=>({...e,...t}),te(Wr,Ar)),Vr=B.memo(function(){const e=oe("gridState"),t=oe("listClassName"),n=oe("itemClassName"),o=oe("itemContent"),r=oe("computeItemKey"),s=oe("isSeeking"),i=Re("scrollHeight"),l=oe("ItemComponent"),a=oe("ListComponent"),u=oe("ScrollSeekPlaceholder"),h=oe("context"),v=Re("itemDimensions"),p=Re("gap"),I=oe("log"),S=oe("stateRestoreInProgress"),R=Re("reportReadyState"),x=Ue(B.useMemo(()=>d=>{const m=d.parentElement.parentElement.scrollHeight;i(m);const g=d.firstChild;if(g){const{height:z,width:C}=g.getBoundingClientRect();v({height:z,width:C})}p({column:wn("column-gap",getComputedStyle(d).columnGap,I),row:wn("row-gap",getComputedStyle(d).rowGap,I)})},[i,v,p,I]),!0,!1);return Xn(()=>{e.itemHeight>0&&e.itemWidth>0&&R(!0)},[e]),S?null:f.jsx(a,{className:t,ref:x,...fe(a,h),"data-testid":"virtuoso-item-list",style:{paddingBottom:e.offsetBottom,paddingTop:e.offsetTop},children:e.items.map(d=>{const m=r(d.index,d.data,h);return s?f.jsx(u,{...fe(u,h),height:e.itemHeight,index:d.index,width:e.itemWidth},m):Q.createElement(l,{...fe(l,h),className:n,"data-index":d.index,key:m},o(d.index,d.data,h))})})}),Gr=B.memo(function(){const e=oe("HeaderComponent"),t=Re("headerHeight"),n=oe("headerFooterTag"),o=Ue(B.useMemo(()=>s=>{t(Me(s,"height"))},[t]),!0,!1),r=oe("context");return e?f.jsx(n,{ref:o,children:f.jsx(e,{...fe(e,r)})}):null}),Ur=B.memo(function(){const e=oe("FooterComponent"),t=Re("footerHeight"),n=oe("headerFooterTag"),o=Ue(B.useMemo(()=>s=>{t(Me(s,"height"))},[t]),!0,!1),r=oe("context");return e?f.jsx(n,{ref:o,children:f.jsx(e,{...fe(e,r)})}):null}),_r=({children:e})=>{const t=B.useContext(Yn),n=Re("itemDimensions"),o=Re("viewportDimensions"),r=Ue(B.useMemo(()=>s=>{o(s.getBoundingClientRect())},[o]),!0,!1);return B.useEffect(()=>{t&&(o({height:t.viewportHeight,width:t.viewportWidth}),n({height:t.itemHeight,width:t.itemWidth}))},[t,o,n]),f.jsx("div",{ref:r,style:wt(!1),children:e})},$r=({children:e})=>{const t=B.useContext(Yn),n=Re("windowViewportRect"),o=Re("itemDimensions"),r=oe("customScrollParent"),s=jn(n,r,!1);return B.useEffect(()=>{t&&(o({height:t.itemHeight,width:t.itemWidth}),n({offsetTop:0,visibleHeight:t.viewportHeight,visibleWidth:t.viewportWidth}))},[t,n,o]),f.jsx("div",{ref:s,style:wt(!1),children:e})},qr=B.memo(function({...e}){const t=oe("useWindowScroll"),n=oe("customScrollParent"),o=n||t?Zr:Kr,r=n||t?$r:_r,s=oe("context");return f.jsx(o,{...e,...fe(o,s),children:f.jsxs(r,{children:[f.jsx(Gr,{}),f.jsx(Vr,{}),f.jsx(Ur,{})]})})}),{useEmitter:oo,useEmitterValue:oe,usePublisher:Re}=Kn(Pr,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",restoreStateFrom:"restoreStateFrom",initialTopMostItemIndex:"initialTopMostItemIndex",increaseViewportBy:"increaseViewportBy"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",stateChanged:"stateChanged",readyStateChanged:"readyStateChanged"}},qr),Kr=eo({useEmitter:oo,useEmitterValue:oe,usePublisher:Re}),Zr=to({useEmitter:oo,useEmitterValue:oe,usePublisher:Re});function wn(e,t,n){return t!=="normal"&&!(t!=null&&t.endsWith("px"))&&n(`${e} was not resolved to pixel value correctly`,t,pe.WARN),t==="normal"?0:parseInt(t??"0",10)}function Yr({companyId:e,filters:t,excludedIds:n=[],onToggleExclusion:o}){const[r,s]=Q.useState([]),[i,l]=Q.useState(!1),[a,u]=Q.useState(null),[h,v]=Q.useState(!0),[p,I]=Q.useState(null),S=Q.useRef(!1),R=Q.useCallback(async(d=!1)=>{if(!S.current&&!(!d&&!h)){S.current=!0,l(!0),d&&I(null);try{const m=Tn(Sn,"getFilteredLeadsPage"),g={...t,excludeRecentDays:t.excludeRecentDays?7:null,campaignLimit:t.campaignLimit?parseInt(t.campaignLimit):null},z=await m({companyId:e,filters:g,pageSize:50,lastDocId:d?null:a}),C=z.data.leads||[],k=z.data.lastDocId;s(c=>d?C:[...c,...C]),u(k),v(!!k&&C.length===50)}catch(m){console.error("Failed to load leads:",m),I(m.message)}finally{l(!1),S.current=!1}}},[e,t,a,h]);Q.useEffect(()=>{s([]),u(null),v(!0),S.current=!1,R(!0)},[t,e]);const x=(d,m)=>{const g=n.includes(m.id),z=m.firstName?`${m.firstName} ${m.lastName||""}`:m.name||"Unknown",C=m.phone||m.normalizedPhone||m.email||"No Contact Info";return f.jsx("div",{className:"pb-2 pr-2",children:f.jsxs("div",{onClick:()=>o&&o(m.id),className:`
                        p-3 rounded-xl flex items-center gap-4 border transition-all cursor-pointer group
                        ${g?"bg-slate-900/50 border-slate-800 opacity-60":"bg-slate-800 border-transparent hover:border-slate-700"}
                    `,children:[f.jsx("div",{className:`
                        w-5 h-5 rounded-full flex items-center justify-center border transition-all
                        ${g?"border-slate-600 bg-transparent text-slate-600":"border-blue-500 bg-blue-500 text-white"}
                    `,children:g?f.jsx(fo,{size:14}):f.jsx(Cn,{size:14})}),f.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-700 flex items-center justify-center font-bold text-sm text-slate-300 shrink-0",children:z[0]||"?"}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:`text-sm font-semibold truncate ${g?"text-slate-500 line-through":"text-white"}`,children:z}),f.jsx("div",{className:"text-xs text-slate-400 truncate",children:C})]}),f.jsx("span",{className:`
                        px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wider
                        ${m.status==="new"?"bg-blue-500/10 text-blue-400":m.status==="hired"?"bg-emerald-500/10 text-emerald-400":"bg-slate-700/50 text-slate-500"}
                    `,children:m.status||"Lead"})]})})};return p?f.jsxs("div",{className:"h-[400px] flex flex-col items-center justify-center text-red-400 p-4 text-center bg-slate-900/50 rounded-xl border border-red-500/10",children:[f.jsx(Qt,{className:"mb-2"}),f.jsx("p",{className:"text-sm",children:"Failed to load preview"}),f.jsx("button",{onClick:()=>R(!0),className:"mt-4 px-4 py-2 bg-white/5 rounded-lg hover:bg-white/10 text-white text-xs font-bold transition-colors",children:"Retry Connection"})]}):f.jsx("div",{className:"h-[500px] w-full bg-slate-950 rounded-2xl border border-slate-800 overflow-hidden shadow-inner",children:r.length===0&&i?f.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-500 gap-3",children:[f.jsx(en,{className:"animate-spin text-blue-600",size:24}),f.jsx("span",{className:"text-xs font-medium uppercase tracking-widest",children:"Scanning Database..."})]}):r.length===0?f.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-500 gap-2",children:[f.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-900 flex items-center justify-center text-slate-700 mb-2",children:f.jsx(Qt,{size:24})}),f.jsx("p",{className:"font-medium",children:"No leads match these filters."}),f.jsx("p",{className:"text-xs text-slate-600",children:"Try adjusting your criteria."})]}):f.jsx(Or,{style:{height:"100%"},data:r,endReached:()=>h&&R(!1),itemContent:x,className:"custom-scrollbar",components:{Footer:()=>i?f.jsxs("div",{className:"p-4 flex justify-center text-slate-500 text-xs gap-2 items-center",children:[f.jsx(en,{className:"w-3 h-3 animate-spin"})," Fetching more..."]}):f.jsx("div",{className:"h-4"})}})})}function ts({companyId:e,filters:t,onChange:n}){const{currentUser:o}=ho(),{team:r}=Co(e),[s,i]=Q.useState("crm"),[l,a]=Q.useState(t||{leadType:"applications",status:["new"],recruiterId:"all"}),{matchCount:u,isLoading:h}=So(e,l,o),{csvData:v,handleFileChange:p}=vo();Q.useEffect(()=>{s==="upload"&&n({...l,leadType:"import",rawData:v},v.length)},[v,s]),Q.useEffect(()=>{s==="crm"&&n(l,u)},[u,s,l]);const I=(g,z)=>{a(C=>({...C,[g]:z}))},S=g=>{const z=l.excludedLeadIds||[],C=z.includes(g)?z.filter(k=>k!==g):[...z,g];I("excludedLeadIds",C)},R=s==="upload",x=R?v.length:u,d=l.excludedLeadIds?.length||0,m=Math.max(0,x-d);return f.jsxs("div",{className:"max-w-6xl mx-auto",children:[f.jsxs("div",{className:"mb-8 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-2",children:"Target Audience"}),f.jsx("p",{className:"text-slate-500",children:"Define criteria or upload a custom list."})]}),f.jsxs("div",{className:"flex bg-white p-1.5 rounded-xl border border-slate-200 shadow-sm",children:[f.jsx("button",{onClick:()=>i("crm"),className:`px-5 py-2.5 rounded-lg text-sm font-bold transition-all ${s==="crm"?"bg-slate-900 text-white shadow-md":"text-slate-500 hover:bg-slate-50"}`,children:"CRM Filters"}),f.jsxs("button",{onClick:()=>i("upload"),className:`px-5 py-2.5 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${s==="upload"?"bg-blue-600 text-white shadow-md":"text-slate-500 hover:bg-slate-50"}`,children:[f.jsx(Io,{size:16})," Upload List"]})]})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[f.jsx("div",{className:"lg:col-span-4 space-y-6",children:f.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm h-full",children:s==="crm"?f.jsxs(f.Fragment,{children:[f.jsxs("h3",{className:"flex items-center gap-2 font-bold text-slate-900 mb-6 pb-4 border-b border-slate-100",children:[f.jsx(go,{size:18,className:"text-blue-600"})," Filter Criteria"]}),f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-2",children:"Source"}),f.jsxs("select",{className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-semibold text-slate-700 outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all",value:l.leadType||"applications",onChange:g=>I("leadType",g.target.value),children:[f.jsx("option",{value:"applications",children:"Applicants"}),f.jsx("option",{value:"leads",children:"My Leads"}),f.jsx("option",{value:"global",children:"Global Pool"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-2",children:"Owner"}),f.jsxs("select",{className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-semibold text-slate-700 outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all",value:l.recruiterId||"all",onChange:g=>I("recruiterId",g.target.value),children:[f.jsx("option",{value:"all",children:"All Team Members"}),f.jsx("option",{value:"my_leads",children:"Current User Only"}),r.map(g=>f.jsx("option",{value:g.id,children:g.name},g.id))]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-2",children:"Status"}),f.jsx("div",{className:"flex flex-wrap gap-2",children:wo.map(g=>{const z=l.status?.includes(g.id);return f.jsx("button",{onClick:()=>{const C=l.status||[],k=z?C.filter(c=>c!==g.id):[...C,g.id];I("status",k)},className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${z?"bg-blue-600 border-blue-600 text-white shadow-sm":"bg-white border-slate-200 text-slate-500 hover:border-slate-300"}`,children:g.label},g.id)})})]}),f.jsx("div",{className:"pt-4 border-t border-slate-100",children:f.jsxs("label",{className:"flex items-center justify-between p-3 rounded-xl border border-slate-200 hover:bg-slate-50 cursor-pointer transition-colors group",children:[f.jsx("span",{className:"text-sm font-medium text-slate-700 group-hover:text-slate-900",children:"Exclude Recent (7 Days)"}),f.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded text-blue-600 focus:ring-offset-0 focus:ring-0",checked:!!l.excludeRecentDays,onChange:g=>I("excludeRecentDays",g.target.checked)})]})}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-2",children:"Limit Volume"}),f.jsx("input",{type:"number",placeholder:"No Limit",className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-medium outline-none focus:ring-2 focus:ring-blue-500/20 transition-all",value:l.campaignLimit||"",onChange:g=>I("campaignLimit",g.target.value)}),f.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"Leave empty to message all matches."})]})]})]}):f.jsxs("div",{className:"text-center py-8",children:[f.jsx(po,{className:"mx-auto text-slate-300 mb-4",size:48}),f.jsx("h3",{className:"font-bold text-slate-900",children:"Import Contacts"}),f.jsx("input",{type:"file",onChange:p,className:"mt-4"})]})})}),f.jsx("div",{className:"lg:col-span-8",children:f.jsxs("div",{className:"bg-slate-900 text-white p-1 rounded-2xl shadow-xl border border-slate-800 overflow-hidden flex flex-col h-[650px]",children:[f.jsxs("div",{className:"p-6 bg-slate-900 border-b border-slate-800 z-10",children:[f.jsxs("div",{className:"flex justify-between items-end",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-sm font-bold text-blue-400 mb-1 tracking-wide uppercase",children:R?"Import Manifest":"Live Database Query"}),f.jsxs("div",{className:"text-4xl font-black tracking-tight text-white flex items-baseline gap-2",children:[m,f.jsx("span",{className:"text-lg font-medium text-slate-500",children:"recipients"})]})]}),h&&f.jsx(xo,{className:"animate-spin text-blue-500"})]}),d>0&&f.jsxs("div",{className:"mt-2 text-xs font-medium text-red-400 bg-red-500/10 inline-block px-2 py-1 rounded",children:[d," manually excluded"]})]}),f.jsx("div",{className:"flex-1 bg-black/20 min-h-0 relative",children:R?f.jsx("div",{className:"p-4 text-center text-slate-500",children:v.length>0?`${v.length} rows ready.`:"Waiting for file..."}):f.jsx(Yr,{companyId:e,filters:l,excludedIds:l.excludedLeadIds,onToggleExclusion:S})}),f.jsx("div",{className:"p-4 bg-slate-900 border-t border-slate-800",children:f.jsxs("button",{className:"w-full py-4 bg-blue-600 hover:bg-blue-500 text-white rounded-xl font-bold text-lg shadow-lg shadow-blue-900/20 transition-all flex items-center justify-center gap-3",onClick:()=>n(l,m),children:[f.jsx(Cn,{size:20}),"Confirm Audience (",m,")"]})})]})})]})]})}export{ts as AudienceBuilder};
