import{c as j,C as c,D as e,L as w,al as E,am as U,P as _,H as T,I as L,a1 as D,U as P,an as O,ao as $,ap as F,aq as I,X as A,g as Q,d as H,a as B,ar as V,ad as G,a3 as J,M as K,as as W,T as X,at as Y,au as Z}from"./index-Eut2KIY5.js";import{T as M}from"./trash-2-RTc4kdO5.js";import{P as S}from"./plus-DHyG1REA.js";import{C as q}from"./circle-BoyhTIEe.js";import{a as ee,C as se}from"./shield-alert-CyrU0uX3.js";import{a as C}from"./shield-B8dSCmK2.js";import{S as re}from"./save-xDZOd2sT.js";const te=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],_e=j("activity",te);const ae=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],Te=j("building",ae);const ne=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Le=j("chart-column",ne);const le=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],oe=j("ellipsis-vertical",le);const ie=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],de=j("grid-3x3",ie);const ce=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],me=j("hash",ce);const xe=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],pe=j("key-round",xe);const he=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],De=j("pause",he);const ue=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],Pe=j("server",ue);const ge=[["path",{d:"M3 5h18",key:"1u36vt"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 19h18",key:"awlh7x"}]],be=j("text-align-justify",ge);const ye=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],fe=j("text-align-start",ye);const je=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Oe=j("trending-up",je);function ve({userId:s,initialName:m,email:g,companyId:h,onSave:a}){const[f,u]=c.useState(m||""),[i,b]=c.useState(g||""),[r,n]=c.useState(!1),[p,x]=c.useState(""),[t,o]=c.useState(!1),[l,v]=c.useState(!1),d=async()=>{n(!0),x("Saving...");try{await E(s,{name:f,email:i},h),x("Profile saved!"),a&&a(),setTimeout(()=>x(""),2e3)}catch(y){console.error("Error updating user:",y),x("Error: "+(y.message||"Unknown error"))}finally{n(!1)}},N=async()=>{if(i&&window.confirm(`Send password reset email to ${i}?`)){o(!0);try{await U(_,i),alert(`Password reset email sent to ${i}`)}catch(y){console.error("Reset Password Error:",y),alert("Failed to send reset email: "+y.message)}finally{o(!1)}}},k=async()=>{if(window.confirm("Are you sure you want to delete this user? This action cannot be undone.")){v(!0);try{await T(L,"deletePortalUser")({userId:s,companyId:h}),alert("User deleted/removed successfully."),a&&a()}catch(y){console.error("Delete User Error:",y),alert("Failed to delete user: "+y.message)}finally{v(!1)}}};return e.jsxs("div",{className:"bg-white p-5 rounded-lg border border-gray-200 shadow-sm space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"User Profile"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Update basic information."})]}),e.jsxs("form",{className:"space-y-4",onSubmit:y=>{y.preventDefault(),d()},children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"edit-user-name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),e.jsx("input",{type:"text",id:"edit-user-name",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-shadow",required:!0,value:f,onChange:y=>u(y.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"edit-user-email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),e.jsx("input",{type:"email",id:"edit-user-email",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-shadow",required:!0,value:i,onChange:y=>b(y.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-4 pt-2",children:[e.jsxs("button",{type:"submit",className:"px-5 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors shadow-sm flex items-center gap-2",disabled:r,children:[r&&e.jsx(w,{size:16,className:"animate-spin"}),r?"Saving...":"Save Changes"]}),e.jsx("p",{className:`text-sm font-medium ${p.startsWith("Error")?"text-red-600":"text-green-600"}`,children:p})]})]}),e.jsxs("div",{className:"pt-6 border-t border-gray-100",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-900 mb-4",children:"Account Actions"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("button",{type:"button",onClick:N,disabled:t,className:"flex-1 px-4 py-2 bg-orange-50 text-orange-700 border border-orange-200 rounded-lg hover:bg-orange-100 font-medium text-sm flex items-center justify-center gap-2 transition-colors",children:[t?e.jsx(w,{size:16,className:"animate-spin"}):e.jsx(pe,{size:16}),"Send Password Reset"]}),e.jsxs("button",{type:"button",onClick:k,disabled:l,className:"flex-1 px-4 py-2 bg-red-50 text-red-700 border border-red-200 rounded-lg hover:bg-red-100 font-medium text-sm flex items-center justify-center gap-2 transition-colors",children:[l?e.jsx(w,{size:16,className:"animate-spin"}):e.jsx(M,{size:16}),"Delete User"]})]})]})]})}function Ne({membership:s,companyName:m,onUpdate:g,onRemove:h}){const[a,f]=c.useState(s.role),[u,i]=c.useState(!1),[b,r]=c.useState(!1),n=async x=>{const t=x.target.value;i(!0);try{await F(s.id,t),f(t),g()}catch(o){console.error("Error updating role:",o),alert(`Failed to update role: ${o.message}
Ensure you are logged in as Super Admin.`),x.target.value=a}finally{i(!1)}},p=async()=>{if(window.confirm(`Remove access to ${m}?`)){r(!0);try{await I(s.id),h(),g()}catch(x){console.error("Error removing membership:",x),alert(`Failed to remove: ${x.message}`),r(!1)}}};return e.jsxs("div",{className:"flex items-center justify-between gap-3 p-3 bg-white rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("strong",{className:"font-medium text-gray-800 block",children:m}),e.jsxs("span",{className:"text-xs text-gray-400",children:["ID: ",s.companyId]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{className:"p-2 border border-gray-300 rounded-lg bg-white text-sm",value:a,onChange:n,disabled:u||b,children:[e.jsx("option",{value:"hr_user",children:"HR User"}),e.jsx("option",{value:"company_admin",children:"Company Admin"})]}),e.jsx("button",{className:"p-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 text-sm disabled:opacity-50",onClick:p,disabled:u||b,title:"Remove Membership",children:b?e.jsx("div",{className:"w-4 h-4 border-2 border-red-300 border-t-red-600 rounded-full animate-spin"}):e.jsx(M,{size:16})})]})]})}function we({userId:s,allCompaniesMap:m,onDataUpdate:g}){const[h,a]=c.useState([]),[f,u]=c.useState(!0),[i,b]=c.useState(""),[r,n]=c.useState("hr_user"),[p,x]=c.useState(""),t=async()=>{u(!0);try{const N=(await O(s)).docs.map(k=>({id:k.id,...k.data()}));a(N)}catch(d){console.error("Error rendering user memberships:",d),x("Could not load memberships. Check permissions.")}u(!1)};c.useEffect(()=>{t()},[s]);const o=c.useMemo(()=>new Set(h.map(d=>d.companyId)),[h]),l=c.useMemo(()=>Array.from(m.entries()).filter(([d])=>!o.has(d)),[m,o]),v=async d=>{if(d.preventDefault(),x(""),!i||!r){x("Please select a company and role.");return}try{await $({userId:s,companyId:i,role:r}),b(""),n("hr_user"),await t(),g()}catch(N){console.error("Add Membership Error:",N),x(N.message)}};return e.jsxs("div",{className:"bg-white p-5 rounded-lg border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Access & Permissions"}),e.jsx("button",{onClick:t,className:"p-1 text-gray-400 hover:text-blue-600 rounded-full hover:bg-blue-50 transition-colors",title:"Refresh List",children:e.jsx(D,{size:16})})]}),e.jsx("div",{id:"edit-user-memberships-list",className:"space-y-3 mb-4 max-h-48 overflow-y-auto p-1",children:f?e.jsxs("p",{className:"text-center text-gray-500 py-4 flex items-center justify-center gap-2",children:[e.jsx(w,{className:"animate-spin",size:16})," Loading..."]}):h.length>0?h.map(d=>e.jsx(Ne,{membership:d,companyName:m.get(d.companyId)||"Unknown Company",onUpdate:g,onRemove:t},d.id)):e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg border border-dashed border-gray-300",children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"No active memberships."}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"This user cannot access any company data."})]})}),e.jsxs("form",{id:"add-membership-form",className:"flex items-end gap-2 p-3 bg-gray-50 rounded-lg border border-gray-200",onSubmit:v,children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"add-membership-company",className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Add to Company"}),e.jsxs("select",{id:"add-membership-company",className:"w-full p-2 text-sm border border-gray-300 rounded-lg bg-white",required:!0,value:i,onChange:d=>b(d.target.value),disabled:l.length===0,children:[e.jsx("option",{value:"",children:"Select Company..."}),l.map(([d,N])=>e.jsx("option",{value:d,children:N},d))]})]}),e.jsxs("div",{className:"w-1/3",children:[e.jsx("label",{htmlFor:"add-membership-role",className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Role"}),e.jsxs("select",{id:"add-membership-role",className:"w-full p-2 text-sm border border-gray-300 rounded-lg bg-white",required:!0,value:r,onChange:d=>n(d.target.value),children:[e.jsx("option",{value:"hr_user",children:"HR User"}),e.jsx("option",{value:"company_admin",children:"Admin"})]})]}),e.jsx("button",{type:"submit",className:"p-2.5 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-all shadow-sm",disabled:l.length===0,title:"Grant Access",children:e.jsx(S,{size:20})})]}),p&&e.jsxs("div",{className:"mt-3 p-3 bg-red-50 text-red-700 text-sm rounded-lg flex items-start gap-2",children:[e.jsx(P,{size:16,className:"mt-0.5 shrink-0"}),e.jsx("span",{children:p})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-3 text-center",children:"Note: Users may need to log out and log back in for new permissions to apply."})]})}function $e({userId:s,companyId:m,allCompaniesMap:g,onClose:h,onSave:a}){const[f,u]=c.useState(!0),[i,b]=c.useState(null),r=async()=>{u(!0);try{const n=await Q(H(B,"users",s));n.exists()&&b(n.data())}catch(n){console.error("Error fetching user data for modal:",n)}u(!1)};return c.useEffect(()=>{r()},[s]),e.jsx("div",{id:"edit-user-modal",className:"fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col border border-gray-200",children:[e.jsxs("header",{className:"p-5 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Edit User"}),e.jsx("button",{className:"p-2 text-gray-500 hover:bg-gray-100 rounded-full",onClick:h,children:e.jsx(A,{size:20})})]}),f||!i?e.jsx("div",{className:"p-6 text-center text-gray-500",children:"Loading user data..."}):e.jsxs("div",{className:"p-5 overflow-y-auto space-y-6 bg-gray-50",children:[e.jsx(ve,{userId:s,initialName:i.name,email:i.email,companyId:m||Object.keys(g||{})[0]||null,onSave:a}),e.jsx(we,{userId:s,allCompaniesMap:g,onDataUpdate:a})]}),e.jsx("footer",{className:"p-4 bg-gray-50 border-t border-gray-200 flex justify-end items-center rounded-b-xl",children:e.jsx("button",{id:"edit-user-close-btn",className:"px-5 py-2 bg-gray-100 text-gray-700 font-semibold rounded-lg hover:bg-gray-200 transition-all",onClick:h,children:"Close"})})]})})}const R=[{id:"shortAnswer",label:"Short Answer",icon:fe,description:"Single line text input for simple responses."},{id:"paragraph",label:"Paragraph",icon:be,description:"Multi-line text area for detailed explanations."},{id:"multipleChoice",label:"Multiple Choice",icon:q,description:"Select one option from a list (Radio buttons)."},{id:"checkboxes",label:"Checkboxes",icon:V,description:"Select multiple options from a list."},{id:"dropdown",label:"Dropdown",icon:ee,description:"Select one option from a dropdown menu."},{id:"number",label:"Number",icon:me,description:"Numeric input for quantities, ages, etc."},{id:"fileUpload",label:"File Upload",icon:G,description:"Allow applicants to upload documents or images."},{id:"date",label:"Date",icon:J,description:"Date picker input."},{id:"time",label:"Time",icon:K,description:"Time picker input."},{id:"linearScale",label:"Linear Scale",icon:de,description:"Rating scale (e.g., 1 to 5)."}],ke={id:"",type:"shortAnswer",label:"",required:!1,options:["Option 1"],helpText:"",min:1,max:5,minLabel:"Poor",maxLabel:"Excellent",dotRequired:!1,fmcsaReference:"",canCompanyHide:!0,canCompanyModify:!0},z=s=>["multipleChoice","checkboxes","dropdown"].includes(s);function Ce({question:s,index:m,onChange:g,onDelete:h}){const a=(r,n)=>{g(m,{...s,[r]:n})},f=(r,n)=>{const p=[...s.options||[]];p[r]=n,a("options",p)},u=()=>{const r=[...s.options||[],`Option ${(s.options?.length||0)+1}`];a("options",r)},i=r=>{const n=s.options.filter((p,x)=>x!==r);a("options",n)},b=r=>{const n=r.target.value,p={type:n};z(n)&&(!s.options||s.options.length===0)&&(p.options=["Option 1"]),g(m,{...s,...p})};return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm relative group transition-all hover:shadow-md border-l-4 border-l-blue-500",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"p-1 text-gray-400 cursor-move",children:e.jsx(oe,{size:20})}),e.jsxs("div",{className:"flex-1 px-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx("input",{type:"text",placeholder:"Question Title",className:"w-full p-3 bg-gray-50 border border-gray-200 rounded-lg text-lg font-medium text-gray-900 focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all",value:s.label,onChange:r=>a("label",r.target.value)})}),e.jsx("div",{children:e.jsxs("div",{className:"relative",children:[e.jsx("select",{className:"w-full p-3 pl-10 border border-gray-200 rounded-lg bg-white appearance-none cursor-pointer hover:border-gray-300 focus:ring-2 focus:ring-blue-500 outline-none",value:s.type,onChange:b,children:R.map(r=>e.jsx("option",{value:r.id,children:r.label},r.id))}),e.jsx("div",{className:"absolute left-3 top-3.5 text-gray-500 pointer-events-none",children:(()=>{const r=R.find(n=>n.id===s.type)?.icon;return r?e.jsx(r,{size:18}):null})()})]})})]}),e.jsx("button",{onClick:()=>h(m),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors",title:"Delete Question",children:e.jsx(M,{size:20})})]}),e.jsxs("div",{className:"pl-10 pr-12 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{size:14,className:"text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Description (optional)",className:"flex-1 text-sm text-gray-600 border-b border-transparent hover:border-gray-300 focus:border-blue-500 outline-none bg-transparent transition-colors py-1",value:s.helpText||"",onChange:r=>a("helpText",r.target.value)})]}),z(s.type)&&e.jsxs("div",{className:"space-y-2 mt-4 ml-1 pl-4 border-l-2 border-gray-100",children:[s.options?.map((r,n)=>e.jsxs("div",{className:"flex items-center gap-3 group/opt",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-gray-300 rounded-full shrink-0"}),e.jsx("input",{type:"text",className:"flex-1 p-2 text-sm border border-transparent hover:border-gray-200 focus:border-blue-300 rounded outline-none transition-all",value:r,onChange:p=>f(n,p.target.value),placeholder:`Option ${n+1}`}),e.jsx("button",{onClick:()=>i(n),className:"opacity-0 group-hover/opt:opacity-100 p-1 text-gray-400 hover:text-red-500 transition-opacity",children:e.jsx(A,{size:16})})]},n)),e.jsxs("button",{onClick:u,className:"flex items-center gap-2 text-sm text-blue-600 font-medium hover:text-blue-800 mt-2 px-2 py-1 rounded hover:bg-blue-50 transition-colors w-fit",children:[e.jsx(S,{size:16})," Add Option"]})]}),s.type==="fileUpload"&&e.jsx("div",{className:"border-2 border-dashed border-gray-200 rounded-lg p-6 text-center bg-gray-50 text-gray-400 text-sm mt-4",children:e.jsx("p",{children:"Applicants will see a file upload button here."})}),e.jsxs("div",{className:"pt-4 mt-4 border-t border-gray-100 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(C,{size:16,className:"text-amber-600"}),e.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Compliance Settings"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg border border-gray-200 hover:border-amber-300 cursor-pointer transition-all",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 text-amber-600 rounded focus:ring-amber-500",checked:s.dotRequired||!1,onChange:r=>a("dotRequired",r.target.checked)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{size:14,className:s.dotRequired?"text-amber-600":"text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"DOT Required"})]}),s.dotRequired&&e.jsx("span",{className:"ml-auto text-xs bg-amber-100 text-amber-700 px-2 py-0.5 rounded-full font-semibold",children:"FMCSA"})]}),s.dotRequired&&e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"FMCSA Reference (e.g., 49 CFR 391.21)",className:"w-full p-3 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none",value:s.fmcsaReference||"",onChange:r=>a("fmcsaReference",r.target.value)})})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 pt-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 text-gray-600 rounded focus:ring-gray-500",checked:!(s.canCompanyHide??!0),onChange:r=>a("canCompanyHide",!r.target.checked)}),e.jsx(W,{size:14,className:"text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Lock (companies can't hide)"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 text-gray-600 rounded focus:ring-gray-500",checked:!(s.canCompanyModify??!0),onChange:r=>a("canCompanyModify",!r.target.checked)}),e.jsx(X,{size:14,className:"text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Protect label (read-only)"})]})]})]}),e.jsx("div",{className:"pt-4 mt-4 border-t border-gray-100 flex justify-end items-center gap-4",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Required"}),e.jsxs("div",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:s.required||!1,onChange:r=>a("required",r.target.checked)}),e.jsx("div",{className:"w-9 h-5 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600"})]})]})})]})]})}function Fe({questions:s=[],onChange:m,onSave:g,loading:h}){const[a,f]=c.useState(!1),u=c.useRef(null),i=c.useRef(null),b=()=>{const t={...ke,id:crypto.randomUUID()};m([...s,t])},r=(t,o)=>{const l=[...s];l[t]=o,m(l)},n=t=>{if(s[t]?.dotRequired){alert("Cannot delete DOT-required field. This question is mandated by FMCSA regulations.");return}const l=s.filter((v,d)=>d!==t);m(l)},p=()=>{let t=[...s];const o=t.splice(u.current,1)[0];t.splice(i.current,0,o),u.current=null,i.current=null,m(t)},x=t=>{const o="w-full p-3 border border-gray-300 rounded-lg bg-white opacity-75 cursor-not-allowed";switch(t.type){case"paragraph":return e.jsx("textarea",{className:o,rows:"3",disabled:!0,placeholder:"Long answer text..."});case"multipleChoice":return e.jsx("div",{className:"space-y-2",children:t.options?.map((l,v)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-400"}),e.jsx("span",{className:"text-gray-600 text-sm",children:l})]},v))});case"checkboxes":return e.jsx("div",{className:"space-y-2",children:t.options?.map((l,v)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded border border-gray-400"}),e.jsx("span",{className:"text-gray-600 text-sm",children:l})]},v))});case"dropdown":return e.jsxs("select",{className:o,disabled:!0,children:[e.jsx("option",{children:"Select an option..."}),t.options?.map((l,v)=>e.jsx("option",{children:l},v))]});case"fileUpload":return e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center bg-gray-50",children:e.jsx("p",{className:"text-gray-500 text-sm",children:"Upload file button will appear here"})});case"date":return e.jsx("input",{type:"date",className:o,disabled:!0});case"time":return e.jsx("input",{type:"time",className:o,disabled:!0});case"linearScale":return e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-gray-50 rounded border border-gray-200",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:[t.min||1," (",t.minLabel||"Min",")"]}),e.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(l=>e.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-400"},l))}),e.jsxs("span",{className:"text-xs text-gray-500",children:[t.max||5," (",t.maxLabel||"Max",")"]})]});default:return e.jsx("input",{type:"text",className:o,disabled:!0,placeholder:"Short answer text"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 bg-white p-4 rounded-xl border border-gray-200 shadow-sm sticky top-0 z-20",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Custom Questions"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.length," questions added"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>f(!a),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${a?"bg-purple-100 text-purple-700":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[a?e.jsx(Y,{size:18}):e.jsx(Z,{size:18}),a?"Edit Mode":"Preview"]}),e.jsxs("button",{onClick:g,disabled:h,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 disabled:opacity-50 shadow-md transition-all",children:[h?e.jsx(w,{className:"animate-spin",size:18}):e.jsx(re,{size:18}),"Save Changes"]})]})]}),e.jsxs("div",{className:"space-y-4 min-h-[200px]",children:[s.length===0&&e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-200 rounded-xl",children:[e.jsx("p",{className:"text-gray-400 font-medium",children:"No questions yet."}),e.jsx("button",{onClick:b,className:"mt-4 text-blue-600 hover:text-blue-800 font-bold text-sm",children:"+ Add your first question"})]}),s.map((t,o)=>e.jsx("div",{draggable:!a,onDragStart:l=>{u.current=o,l.currentTarget.style.opacity="0.5"},onDragEnter:l=>{i.current=o},onDragEnd:l=>{l.currentTarget.style.opacity="1",p()},onDragOver:l=>l.preventDefault(),className:`transition-all duration-200 ${a?"":"cursor-move"}`,children:a?e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("label",{className:"block text-sm font-bold text-gray-800",children:[t.label||"Untitled Question",t.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.dotRequired&&e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs bg-amber-100 text-amber-700 px-2 py-0.5 rounded-full font-semibold",children:[e.jsx(C,{size:10})," DOT"]}),!t.canCompanyHide&&e.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full",children:"Locked"})]}),t.fmcsaReference&&e.jsx("p",{className:"text-xs text-amber-600 font-medium",children:t.fmcsaReference}),t.helpText&&e.jsx("p",{className:"text-xs text-gray-500",children:t.helpText})]}),x(t)]}):e.jsx(Ce,{question:t,index:o,onChange:r,onDelete:n})},t.id||o))]}),!a&&e.jsx("div",{className:"flex justify-center pt-4",children:e.jsxs("button",{onClick:b,className:"group flex flex-col items-center gap-2 text-gray-400 hover:text-blue-600 transition-colors",children:[e.jsx("div",{className:"w-12 h-12 bg-white border-2 border-dashed border-gray-300 rounded-full flex items-center justify-center group-hover:border-blue-500 group-hover:bg-blue-50 transition-all shadow-sm",children:e.jsx(S,{size:24})}),e.jsx("span",{className:"text-sm font-medium",children:"Add Question"})]})})]})}export{_e as A,Te as B,Fe as C,$e as E,me as H,De as P,Pe as S,Oe as T,oe as a,Le as b};
